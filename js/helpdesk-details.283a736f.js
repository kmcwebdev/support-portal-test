(self["webpackChunkvue3_ts_template"]=self["webpackChunkvue3_ts_template"]||[]).push([[5134],{7665:function(e,t,l){const{createElementVNode:a,openBlock:i,createElementBlock:s}=l(9812);e.exports=function(e,t){return i(),s("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[a("path",{"fill-rule":"evenodd",d:"M18.685 19.097A9.723 9.723 0 0021.75 12c0-5.385-4.365-9.75-9.75-9.75S2.25 6.615 2.25 12a9.723 9.723 0 003.065 7.097A9.716 9.716 0 0012 21.75a9.716 9.716 0 006.685-2.653zm-12.54-1.285A7.486 7.486 0 0112 15a7.486 7.486 0 015.855 2.812A8.224 8.224 0 0112 20.25a8.224 8.224 0 01-5.855-2.438zM15.75 9a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z","clip-rule":"evenodd"})])}},6210:function(e,t,l){"use strict";l.d(t,{Z:function(){return p}});var a=l(6252),i=l(2262),s=l(3577),n=l(9737),d=l(7960);const o=(0,a.Uk)("Click to upload"),u={class:"el-upload__tip"},c=(0,a.Uk)("Attach File ");var r=(0,a.aZ)({__name:"AttachFile",props:{action:{type:String,required:!0},fileSize:{type:Number,default:15},data:{type:Object},limit:{type:Number,default:3}},emits:["disable","files"],setup(e,{expose:t,emit:l}){const r=e;t({sliceAttachments:h,submitUpload:k});const m=(0,i.iH)(null),p=(0,i.iH)([]),f=(0,i.iH)([]),y=(0,i.iH)(!1),v=(0,a.Fl)((()=>({Authorization:`Bearer ${(0,d.LP)()}`})));function g(e){y.value=!0,l("disable",!0);const t=e.size/1024/1024<r.fileSize;return t||(n.T.alert("Document size can not exceed "+r.fileSize+"MB!"),y.value=!1,l("disable",!0)),t}function b(e,t){p.value=t.slice(-3);const l=f.value.filter((t=>t.crmid!==e.response.crmid));f.value=l}function _(){n.T.alert("File limit exceeded. 3 files attachment only.")}function w(e){n.T.alert(e),y.value=!1,l("disable",!1)}function x(e){f.value.push(e),y.value=!1,l("disable",!1),l("files",f.value)}function h(){p.value=[],f.value=[],m.value?.clearFiles()}function k(){y.value=!0,m.value?.submit()}return(t,l)=>{const n=(0,a.up)("el-button"),d=(0,a.up)("el-upload"),r=(0,a.up)("el-badge"),p=(0,a.up)("el-popover");return(0,a.wg)(),(0,a.j4)(p,{placement:"top",width:"400",trigger:"click"},{reference:(0,a.w5)((()=>[(0,a.Wm)(r,{value:f.value.length,class:"item"},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{type:"default"},{default:(0,a.w5)((()=>[c])),_:1})])),_:1},8,["value"])])),default:(0,a.w5)((()=>[(0,a.Wm)(d,{class:"upload-demo",data:e.data,action:e.action,limit:e.limit,ref_key:"upload",ref:m,"before-upload":g,"on-remove":b,"on-exceed":_,headers:(0,i.SU)(v),"on-error":w,"on-success":x,"auto-upload":!0},{tip:(0,a.w5)((()=>[(0,a._)("div",u," Files with a size less than "+(0,s.zw)(e.fileSize)+"mb. ",1)])),default:(0,a.w5)((()=>[(0,a.Wm)(n,{loading:y.value,type:"primary"},{default:(0,a.w5)((()=>[o])),_:1},8,["loading"])])),_:1},8,["data","action","limit","headers"])])),_:1})}}});const m=r;var p=m},7064:function(e,t,l){"use strict";l.d(t,{Z:function(){return g}});var a=l(6252),i=l(2262),s=l(3577),n=l(452),d=l(2115);const o=(0,a._)("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),u={class:"fixed inset-0 z-10 overflow-y-auto"},c={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},r={key:0,class:"sm:flex sm:items-start"},m={class:"text-center sm:mt-0 sm:text-left"},p={key:1,class:"sm:flex sm:flex-row-reverse space-x-2 gap-2 mt-3"},f=(0,a.Uk)(" Cancel ");var y=(0,a.aZ)({__name:"Dialog",props:{show:{type:Boolean,required:!0},title:{type:String},width:{type:String,default:"500px",required:!0},actionBar:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},submitLabel:{type:String,default:"Submit"},submitType:{type:String,default:"primary"},submitDisabled:{type:Boolean,default:!1}},emits:["close","submit"],setup(e,{emit:t}){const l=(0,i.iH)(!1);return(0,a.bv)((()=>{l.value=!0})),(l,y)=>{const v=(0,a.up)("el-button");return(0,a.wg)(),(0,a.j4)((0,i.SU)(n.Q),{as:"template",show:e.show},{default:(0,a.w5)((()=>[(0,a.Wm)((0,i.SU)(d.Vq),{as:"div",class:"relative z-10",onClose:y[2]||(y[2]=e=>t("close"))},{default:(0,a.w5)((()=>[(0,a.Wm)((0,i.SU)(n.x),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:(0,a.w5)((()=>[o])),_:1}),(0,a._)("div",u,[(0,a._)("div",c,[(0,a.Wm)((0,i.SU)(n.x),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,i.SU)(d.EM),{class:(0,s.C_)("relative transform overflow-hidden rounded-lg bg-white px-4 pt-5 pb-4 text-left shadow-xl transition-all sm:my-8 w-full sm:p-6 mb-[64px] md:mb-0"),style:(0,s.j5)(`width: ${e.width}`)},{default:(0,a.w5)((()=>[e.title?((0,a.wg)(),(0,a.iD)("div",r,[(0,a._)("div",m,[(0,a.Wm)((0,i.SU)(d.$N),{as:"h3",class:"text-base font-semibold leading-6 text-gray-900"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(e.title),1)])),_:1})])])):(0,a.kq)("",!0),(0,a.WI)(l.$slots,"default"),e.actionBar?((0,a.wg)(),(0,a.iD)("div",p,[(0,a._)("div",null,[(0,a.Wm)(v,{type:e.submitType,loading:e.loading,disabled:e.submitDisabled,size:"large",class:"mt-3 inline-flex w-full justify-center rounded-md sm:mt-0 sm:w-auto",onClick:y[0]||(y[0]=e=>t("submit"))},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(e.submitLabel),1)])),_:1},8,["type","loading","disabled"])]),(0,a._)("div",null,[(0,a.Wm)(v,{type:"button",size:"large",class:"mt-3 inline-flex w-full justify-center rounded-md sm:mt-0 sm:w-auto",onClick:y[1]||(y[1]=e=>t("close")),ref:"cancelButtonRef"},{default:(0,a.w5)((()=>[f])),_:1},512)])])):(0,a.kq)("",!0)])),_:3},8,["style"])])),_:3})])])])),_:3})])),_:3},8,["show"])}}});const v=y;var g=v},8679:function(e,t,l){"use strict";l.d(t,{Z:function(){return X}});l(6699);var a=l(6252),i=l(2262),s=l(3577),n=l(963),d=l(7027),o=l(9274),u=l(2066),c=l(4949),r=l(2201),m=l(4204);const p={key:0,class:"space-y-4"},f={key:0},y={class:"text-lg leading-6 font-semibold text-gray-900"},v={class:"border-t border-gray-200 mt-4 pt-4"},g={class:"grid gap-x-4 gap-y-8 sm:grid-cols-12"},b={class:"text-sm font-medium text-gray-500"},_={class:"mt-1 text-sm text-gray-900"},w={role:"list",class:"border border-gray-200 rounded-md divide-y divide-gray-200"},x={class:"w-0 flex-1 flex items-center"},h={class:"ml-2 flex-1 w-0 truncate"},k={class:"ml-4 flex-shrink-0"},U=["href"],S={class:"text-sm font-medium text-gray-500"},D={class:"mt-1 text-sm text-gray-900"},z={class:"text-sm font-medium text-gray-500"},H=["innerHTML"],W={class:"text-sm font-medium text-gray-500"},j={class:"mt-1 text-sm text-gray-900"},E={key:1,class:"space-y-4"},T={key:0},Y={class:"text-lg leading-6 font-semibold text-gray-900"},M={class:"border-t border-gray-200 mt-4 pt-4"},F={class:"grid gap-x-4 gap-y-8 sm:grid-cols-12"},q={class:"text-sm font-medium text-gray-500"},B={class:"mt-1 text-sm text-gray-900"},Z={role:"list",class:"border border-gray-200 rounded-md divide-y divide-gray-200"},C={class:"w-0 flex-1 flex items-center"},O={class:"ml-2 flex-1 w-0 truncate"},L={class:"ml-4 flex-shrink-0"},N=["href"],A={class:"text-sm font-medium text-gray-500"},I={class:"mt-1 text-sm text-gray-900"},K={class:"text-sm font-medium text-gray-500"},R=["innerHTML"],V={class:"text-sm font-medium text-gray-500"},G={class:"mt-1 text-sm text-gray-900"};var P=(0,a.aZ)({__name:"RecordDetails",props:{summary:{type:Boolean,default:!1},inlineEdit:{type:Boolean,default:!1},valueOnly:{type:Boolean,default:!1}},setup(e){const t=e,l=(0,i.iH)(!1),P=(0,i.iH)([]),$=(0,r.yj)(),X=(0,a.Fl)((()=>o.h.getters.structure)),J=(0,a.Fl)((()=>o.h.getters.entityForm)),Q=(0,a.Fl)((()=>$.meta.tabId)),ee=(0,a.Fl)((()=>$.params.id)),te=(0,a.Fl)((()=>o.h.getters.hiddenBlocks)),le=(0,a.Fl)((()=>o.h.getters.nextBlocks)),ae=(0,a.Fl)((()=>o.h.getters.entityRecord));function ie(){let e=null;X.value.blocks.map((t=>{if(e){o.h.commit(m.qo.POPULATE_ENTITY_FORM_BYBLOCK,e.blockid),(0,d.Xd)();const t=X.value.blocks.indexOf(e);if(t>=0&&t<X.value.blocks.length-1){let l=t+1,a=0,i=0;if(le.value.length>0){const l=le.value.indexOf(e);if(l>=0){const t=le.value[l+1];if(t){const l=X.value.blocks.find((e=>e.blockid==t.blockid));l&&(e=l,P.value.includes(l.blockid)||P.value.push(l.blockid),i=1)}else a=1}else le.value.map((l=>{if(te.value.includes(l.blockid))a=1;else{const s=X.value.blocks.find((e=>e.blockid==l.blockid));if(s){const l=X.value.blocks.indexOf(s);if(t<l)return e=s,P.value.includes(s.blockid)||P.value.push(s.blockid),void(i=1)}else a=1}}))}1==a&&X.value.blocks.map(((t,a)=>{if(l==a)if(te.value.includes(t.blockid))l+=1;else{const l=X.value.blocks.indexOf(t);if(a<l)return e=t,void(P.value.includes(t.blockid)||P.value.push(t.blockid))}})),0==i&&(e=X.value.blocks[t+1],P.value.includes(X.value.blocks[t+1].blockid)||P.value.push(X.value.blocks[t+1].blockid))}}else e=t,o.h.commit(m.qo.POPULATE_ENTITY_FORM_BYBLOCK,t.blockid),(0,d.Xd)(),P.value.push(t.blockid)}))}function se(e){return 13==Q.value?(0,n.X)(e):199==Q.value?(0,n.JE)(e):1==t.summary?(0,n.II)(e):(0,n.VN)(e)}async function ne(e){let t={value:e.value.value,fieldname:e.fieldname};46==Q.value&&(console.log(t),l.value=!0,await c.c.updateField(ee.value,t).then((()=>{l.value=!1,(0,n.mn)(e.fieldname,e.value)})).catch((()=>{l.value=!1}))),157==Q.value&&(l.value=!0,await c.c.updateNonITField(ee.value,t).then((()=>{l.value=!1,(0,n.mn)(e.fieldname,e.value)})).catch((()=>{l.value=!1})))}return(0,a.YP)((()=>[ae.value]),(()=>{199==Q.value?(P.value=[],ie()):(0,d.Xd)()})),(t,o)=>{const c=(0,a.up)("PaperClipIcon"),r=(0,a.up)("el-rate");return P.value.length>0?((0,a.wg)(),(0,a.iD)("div",p,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,i.SU)(X).blocks,((t,o)=>((0,a.wg)(),(0,a.iD)("div",{key:o},[!(0,i.SU)(te).includes(t.blockid)&&se(t.blockid).length>0&&P.value.includes(t.blockid)?((0,a.wg)(),(0,a.iD)("div",f,[(0,a._)("h2",y,(0,s.zw)(t.blocklabel),1),(0,a._)("div",v,[(0,a._)("dl",g,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(se(t.blockid),((t,o)=>((0,a.wg)(),(0,a.iD)(a.HY,{key:o},[(0,i.SU)(d.cE)(t)?((0,a.wg)(),(0,a.iD)("div",{key:o,class:(0,s.C_)(["col-span-12",`sm:col-span-${t.span}`])},[995==t.uitype?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a._)("dt",b,(0,s.zw)(t.fieldlabel),1),(0,a._)("dd",_,[(0,a._)("ul",w,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,i.SU)(n.dG)(t.fieldname),((e,t)=>((0,a.wg)(),(0,a.iD)("li",{key:t,class:"pl-3 pr-4 py-3 flex items-center justify-between text-sm"},[(0,a._)("div",x,[(0,a.Wm)(c,{class:"flex-shrink-0 h-5 w-5 text-gray-400","aria-hidden":"true"}),(0,a._)("span",h,(0,s.zw)(e.name),1)]),(0,a._)("div",k,[(0,a._)("a",{href:e.filepath,target:"_blank",class:"font-medium text-primary"}," Download ",8,U)])])))),128))])])],64)):994==t.uitype?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a._)("dt",S,(0,s.zw)(t.fieldlabel),1),(0,a._)("dd",D,[(0,a.Wm)(r,{disabled:"","show-score":"","text-color":"#ff9900","model-value":(0,i.SU)(n.dG)(t.fieldname)},null,8,["model-value"])])],64)):19==t.uitype?((0,a.wg)(),(0,a.iD)(a.HY,{key:2},[(0,a._)("dt",z,(0,s.zw)(t.fieldlabel),1),(0,a._)("dd",{class:"mt-1 text-sm text-gray-900",innerHTML:(0,i.SU)(n.dG)(t.fieldname)},null,8,H)],64)):999!=t.uitype?((0,a.wg)(),(0,a.iD)(a.HY,{key:3},[(0,a._)("dt",W,(0,s.zw)(t.fieldlabel),1),(0,a._)("div",j,[(0,a.Wm)(u.Z,{"inline-edit":e.inlineEdit,"value-only":e.valueOnly,editable:(1==t.displaytype||2==t.displaytype)&&1==t.masseditable,"button-loading":l.value,uitype:t.uitype,fieldname:t.fieldname,relation:t.relation,value:(0,i.SU)(J)[(0,i.SU)(n.cx)(t.fieldname)],onSaveField:ne},null,8,["inline-edit","value-only","editable","button-loading","uitype","fieldname","relation","value"])])],64)):(0,a.kq)("",!0)],2)):(0,a.kq)("",!0)],64)))),128))])])])):(0,a.kq)("",!0)])))),128))])):((0,a.wg)(),(0,a.iD)("div",E,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,i.SU)(X).blocks,((t,o)=>((0,a.wg)(),(0,a.iD)("div",{key:o},[!(0,i.SU)(te).includes(t.blockid)&&se(t.blockid).length>0?((0,a.wg)(),(0,a.iD)("div",T,[(0,a._)("h2",Y,(0,s.zw)(t.blocklabel),1),(0,a._)("div",M,[(0,a._)("dl",F,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(se(t.blockid),((t,o)=>((0,a.wg)(),(0,a.iD)(a.HY,{key:o},[(0,i.SU)(d.cE)(t)?((0,a.wg)(),(0,a.iD)("div",{key:o,class:(0,s.C_)(["col-span-12",`sm:col-span-${t.span}`])},[995==t.uitype?((0,a.wg)(),(0,a.iD)(a.HY,{key:0},[(0,a._)("dt",q,(0,s.zw)(t.fieldlabel),1),(0,a._)("dd",B,[(0,a._)("ul",Z,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,i.SU)(n.dG)(t.fieldname),((e,t)=>((0,a.wg)(),(0,a.iD)("li",{key:t,class:"pl-3 pr-4 py-3 flex items-center justify-between text-sm"},[(0,a._)("div",C,[(0,a.Wm)(c,{class:"flex-shrink-0 h-5 w-5 text-gray-400","aria-hidden":"true"}),(0,a._)("span",O,(0,s.zw)(e.name),1)]),(0,a._)("div",L,[(0,a._)("a",{href:e.filepath,target:"_blank",class:"font-medium text-primary"}," Download ",8,N)])])))),128))])])],64)):994==t.uitype?((0,a.wg)(),(0,a.iD)(a.HY,{key:1},[(0,a._)("dt",A,(0,s.zw)(t.fieldlabel),1),(0,a._)("dd",I,[(0,a.Wm)(r,{disabled:"","show-score":"","text-color":"#ff9900","model-value":(0,i.SU)(n.dG)(t.fieldname)},null,8,["model-value"])])],64)):19==t.uitype?((0,a.wg)(),(0,a.iD)(a.HY,{key:2},[(0,a._)("dt",K,(0,s.zw)(t.fieldlabel),1),(0,a._)("dd",{class:"mt-1 text-sm text-gray-900",innerHTML:(0,i.SU)(n.dG)(t.fieldname)},null,8,R)],64)):999!=t.uitype?((0,a.wg)(),(0,a.iD)(a.HY,{key:3},[(0,a._)("dt",V,(0,s.zw)(t.fieldlabel),1),(0,a._)("div",G,[(0,a.Wm)(u.Z,{"inline-edit":e.inlineEdit,"value-only":e.valueOnly,editable:(1==t.displaytype||2==t.displaytype)&&1==t.masseditable,"button-loading":l.value,uitype:t.uitype,fieldname:t.fieldname,relation:t.relation,value:(0,i.SU)(J)[(0,i.SU)(n.cx)(t.fieldname)],onSaveField:ne},null,8,["inline-edit","value-only","editable","button-loading","uitype","fieldname","relation","value"])])],64)):(0,a.kq)("",!0)],2)):(0,a.kq)("",!0)],64)))),128))])])])):(0,a.kq)("",!0)])))),128))]))}}});const $=P;var X=$},8231:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return he}});var a=l(6252),i=l(2262),s=l(2202),n=l(3577),d=l(963);const o={class:"text-2xl font-bold text-gray-900 truncate"},u={class:"text-md font-medium text-gray-500"},c=(0,a.Uk)(" Opened by "),r={class:"font-semibold text-gray-900"},m=(0,a.Uk)(" on "),p={class:"font-semibold text-gray-900"},f={class:"text-md font-medium text-gray-500"},y=(0,a.Uk)(" Status: "),v={class:"text-gray-900 font-semibold"},g={class:"text-md font-medium text-gray-500"},b=(0,a.Uk)(" Priority: "),_={class:"text-gray-900 font-semibold"};var w=(0,a.aZ)({__name:"DetailsHeader",setup(e){return(e,t)=>((0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("h1",o,(0,n.zw)((0,i.SU)(d.el)("ticket_title")),1),(0,a._)("p",u,[c,(0,a._)("span",r,(0,n.zw)((0,i.SU)(d.el)("contact_id")),1),m,(0,a._)("span",p,(0,n.zw)((0,i.SU)(d.el)("createdtime")),1)]),(0,a._)("p",f,[y,(0,a._)("span",v,(0,n.zw)((0,i.SU)(d.el)("ticketstatus")),1)]),(0,a._)("p",g,[b,(0,a._)("span",_,(0,n.zw)((0,i.SU)(d.el)("ticketpriorities")),1)])]))}});const x=w;var h=x,k=(l(6699),l(5953)),U=l(7888),S=l(6382),D=l(3003),z=l(1740),H=l(7026),W=l(3617),j=l(9996),E=l(2201);const T=(0,a._)("h2",{class:"text-lg leading-6 font-semibold text-gray-900"},"Description",-1),Y=["innerHTML"],M={class:"flex justify-between border-t mt-2 p-3 items-start"},F=(0,a.Uk)("Reply"),q={key:0,class:"truncate"},B={style:{color:"rgb(111, 111, 111)"}},Z={key:1,class:"truncate"},C={style:{color:"rgb(111, 111, 111)"}};var O=(0,a.aZ)({__name:"DetailsDescription",setup(e){const t=(0,i.qj)({subject:"",messageID:[],toEmail:[],ccEmail:[],bodyEmail:""}),l=(0,i.qj)({data:[],thread_id:null}),s=(0,i.iH)(!1),o=(0,E.yj)(),u=(0,a.Fl)((()=>o.params.id)),c=(0,a.Fl)((()=>{const e=l.data.find((e=>1==e.initial_email));return e?e.data.attachments:[]}));async function r(){await z.n.getEmails(u.value).then((e=>{l.data=e.data,l.thread_id=e.thread_id}))}function m(e=null){const a=(0,d.dG)("cf_contact_email");a&&t.toEmail.push(a);const i=l.data.find((t=>t.data.mail_id==e));i&&(i.data.from_email.map((e=>{t.toEmail.includes(e.mail)||t.toEmail.push(e.mail)})),i.data.cc_email.map((e=>{t.ccEmail.includes(e.mail)||t.ccEmail.push(e.mail)})),t.subject=i.data.subject,t.messageID=i.data.message_id),s.value=!0}async function p(e){await z.n.sendEmail(u.value,{form:e.form,file:e.file}).then((()=>{(0,j.bM)({type:"success",message:"Success."}),s.value=!1}))}return(0,a.bv)((()=>{r()})),(e,o)=>{const u=(0,a.up)("el-button"),r=(0,a.up)("el-icon"),f=(0,a.up)("el-collapse-item"),y=(0,a.up)("el-collapse");return(0,a.wg)(),(0,a.iD)(a.HY,null,[T,(0,a._)("div",{class:"border-t border-gray-200 overflow-y-auto pt-4",style:{height:"400px"},innerHTML:(0,i.SU)(d.dG)("description")},null,8,Y),(0,a._)("div",M,[(0,a.Wm)(U.Z,{attachments:(0,i.SU)(c)},null,8,["attachments"]),(0,a.Wm)(u,{type:"primary",onClick:m},{default:(0,a.w5)((()=>[F])),_:1})]),l.data.length>0?((0,a.wg)(),(0,a.j4)(y,{key:0,accordion:"",class:"px-3 border-t"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.data,((e,t)=>((0,a.wg)(),(0,a.j4)(f,{key:t,name:t},{title:(0,a.w5)((()=>["received"==e.delivery?((0,a.wg)(),(0,a.iD)("div",q,[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,i.SU)(H))])),_:1}),(0,a.Uk)(" "+(0,n.zw)(e.data.from_email[0].name)+" - ",1),(0,a._)("span",B,(0,n.zw)((0,i.SU)(k.p6)(e.data.created_at,"MMM dd, yyyy hh:mm a")),1)])):(0,a.kq)("",!0),"sent"==e.delivery?((0,a.wg)(),(0,a.iD)("div",Z,[(0,a.Wm)(r,null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,i.SU)(W))])),_:1}),(0,a.Uk)(" "+(0,n.zw)(e.data.from_email[0].name)+" - ",1),(0,a._)("span",C,(0,n.zw)((0,i.SU)(k.p6)(e.data.created_at,"MMM dd, yyyy hh:mm a")),1)])):(0,a.kq)("",!0)])),default:(0,a.w5)((()=>[(0,a.Wm)(S.Z,{thread:e,onReply:m},null,8,["thread"])])),_:2},1032,["name"])))),128))])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(D.Z,{show:s.value,onClose:o[0]||(o[0]=e=>s.value=!1),details:t,onSend:p},null,8,["show","details"])],64)}}});const L=O;var N=L,A=l(7665),I=l(6210),K=l(396),R=l(6080);const V=(0,a._)("h2",{class:"text-lg leading-6 font-semibold text-gray-900"},"Notes",-1),G={key:0,class:"border-t border-gray-200 overflow-y-auto pt-4"},P={role:"list",class:"space-y-8 overflow-y-auto",style:{height:"500px"}},$={class:"flex space-x-3"},X={class:"flex-shrink-0"},J={class:"text-sm"},Q={href:"#",class:"font-medium text-gray-900"},ee=["innerHTML"],te={class:"mt-2 text-sm space-x-2"},le={class:"text-gray-500 font-medium"},ae={class:"flex space-x-3"},ie={class:"min-w-0 flex-1"},se={class:"flex justify-end mt-2"},ne=(0,a.Uk)("Email note to the technician"),de={class:"mt-3 flex items-center justify-between"},oe={class:"flex items-center justify-end space-x-4"},ue=(0,a.Uk)("Add Note");var ce=(0,a.aZ)({__name:"DetailsNotes",setup(e){const t=R.o7,l=(0,i.qj)({file:[],notes:"",permits_scope:null,emailToTech:!0,private:!0}),s=(0,i.iH)(!1),o=(0,i.iH)([]),u=(0,i.iH)(null),c="https://osp-api.kmc.solutions/api/document/upload",r=(0,E.yj)(),m=(0,a.Fl)((()=>r.params.id));async function p(){await z.n.getNotes(m.value).then((e=>{o.value=e}))}function f(e){l.file=e}async function y(){""!=l.notes?(l.private=!l.private,s.value=!0,await z.n.addNotes(l,m.value).then((()=>{p(),l.notes="",l.file=[],u.value?.sliceAttachments(),s.value=!1}))):(0,j.bM)({message:"Empty body",type:"warning"})}return(0,a.bv)((()=>{p()})),(e,r)=>{const m=(0,a.up)("el-checkbox"),p=(0,a.up)("el-button");return(0,a.wg)(),(0,a.iD)(a.HY,null,[V,o.value.length>0?((0,a.wg)(),(0,a.iD)("div",G,[(0,a._)("ul",P,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(o.value,((e,t)=>((0,a.wg)(),(0,a.iD)("li",{key:t},[(0,a._)("div",$,[(0,a._)("div",X,[(0,a.Wm)((0,i.SU)(A),{class:"h-10 w-10 text-gray-500","aria-hidden":"true"})]),(0,a._)("div",null,[(0,a._)("div",J,[(0,a._)("a",Q,(0,n.zw)(e.whodid),1)]),(0,a._)("div",{class:"mt-1 text-sm text-gray-700",innerHTML:e.commentcontent},null,8,ee),(0,a._)("div",te,[(0,a._)("span",le,(0,n.zw)((0,i.SU)(k.p6)(e.createdtime,"MMM dd, yyyy hh:mm a")),1)]),(0,a.Wm)(U.Z,{attachments:e.attachments},null,8,["attachments"])])])])))),128))])])):(0,a.kq)("",!0),(0,a._)("div",ae,[(0,a._)("div",ie,[(0,a._)("div",null,[(0,a.Wm)((0,i.SU)(K.Z),{modelValue:l.notes,"onUpdate:modelValue":r[0]||(r[0]=e=>l.notes=e),"api-key":(0,i.SU)(t),init:{toolbar:"lineheight",lineheight_formats:"1 1.1 1.2 1.3 1.4 1.5 2",fontsize_formats:"6pt 8pt 10pt 12pt 14pt 16pt 18pt 24pt 36pt 48pt",height:400,width:"100%",menubar:!1,menubar:"tools table edit format tc",plugins:["table advlist autolink lists link image imagetools paste charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount lineheight pagebreak"],paste_data_images:!0,branding:!1,relative_urls:!1,remove_script_host:!0,document_base_url:"/",convert_urls:!0,images_upload_handler:function(e,t,l,a){(0,i.SU)(d.vE)(e,t)},toolbar:"insertfile undo redo | styleselect | bold italic | fontsizeselect|  alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | lineheightselect"}},null,8,["modelValue","api-key","init"]),(0,a._)("div",se,[(0,a.Wm)(m,{modelValue:l.emailToTech,"onUpdate:modelValue":r[1]||(r[1]=e=>l.emailToTech=e)},{default:(0,a.w5)((()=>[ne])),_:1},8,["modelValue"])])]),(0,a._)("div",de,[(0,a.Wm)(I.Z,{action:c,onFiles:f,ref_key:"attach",ref:u},null,512),(0,a._)("div",oe,[(0,a.Wm)(p,{loading:s.value,type:"primary",disabled:!l.notes,onClick:y},{default:(0,a.w5)((()=>[ue])),_:1},8,["loading","disabled"])])])])])],64)}}});const re=ce;var me=re,pe=l(8679);const fe={class:"min-h-full pb-20 h-full"},ye={class:"space-y-4 p-0 md:pt-10 md:py-10 2xl:px-8 max-w-[1640px] mx-auto flex flex-col justify-start"},ve={class:"flex flex-col md:rounded-lg gap-5 bg-white p-4 md:p-6 lg:p-8"},ge={class:"flex flex-col md:rounded-lg gap-5 bg-white p-4 md:p-6 lg:p-8"},be={class:"md:rounded-lg gap-5 bg-white p-4 md:p-6 lg:p-8"},_e={class:"flex flex-col md:rounded-lg gap-5 bg-white p-4 md:p-6 lg:p-8"};var we=(0,a.aZ)({__name:"Details",setup(e){return(e,t)=>((0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(s.Z,{name:(0,i.SU)(d.el)("ticket_no"),subName:"Service Request",redirectRoute:"helpdesk"},null,8,["name"]),(0,a._)("div",fe,[(0,a._)("div",ye,[(0,a._)("div",ve,[(0,a.Wm)(h)]),(0,a._)("div",ge,[(0,a.Wm)(N)]),(0,a._)("div",be,[(0,a.Wm)(pe.Z,{valueOnly:!0})]),(0,a._)("div",_e,[(0,a.Wm)(me)])])])],64))}});const xe=we;var he=xe}}]);