"use strict";(self["webpackChunkvue3_ts_template"]=self["webpackChunkvue3_ts_template"]||[]).push([[453],{6332:function(e,t,a){a.d(t,{Z:function(){return g}});var l=a(6252),i=a(3577),s=a(6210);const n={class:"z-30 fixed w-full bottom-0 px-2 items-center md:rounded-lg bg-white border-t md:hidden"},o={class:"flex items-center justify-between border-gray-200 bg-white px-4 py-3 sm:px-6","aria-label":"Pagination"},u={class:"flex flex-1 justify-between sm:justify-end space-x-2"},d=(0,l.Uk)("Cancel"),r=(0,l.Uk)("Decline"),c=(0,l.Uk)("Edit");var p=(0,l.aZ)({__name:"MobileAction",props:{loading:{type:Boolean,default:!1},attachFile:{type:Boolean,default:!1},cancelButton:{type:Boolean,default:!1},editButton:{type:Boolean,default:!1},rejectButton:{type:Boolean,default:!1},disableRejectButton:{type:Boolean,default:!1},disableSubmitButton:{type:Boolean,default:!1},submitLabel:{type:String,default:"Submit"},submitButton:{type:Boolean,default:!0},action:{type:String},fileSize:{type:Number,default:15},data:{type:Object},limit:{type:Number,default:3}},emits:["cancel","submit","files","edit","reject"],setup(e,{emit:t}){return(a,p)=>{const m=(0,l.up)("el-button");return(0,l.wg)(),(0,l.iD)("div",n,[(0,l._)("nav",o,[(0,l._)("div",u,[e.attachFile&&e.action?((0,l.wg)(),(0,l.j4)(s.Z,{key:0,action:e.action,"file-size":e.fileSize,data:e.data,limit:e.limit,onFiles:p[0]||(p[0]=e=>t("files"))},null,8,["action","file-size","data","limit"])):(0,l.kq)("",!0),e.cancelButton?((0,l.wg)(),(0,l.j4)(m,{key:1,class:"w-full",onClick:p[1]||(p[1]=e=>t("cancel"))},{default:(0,l.w5)((()=>[d])),_:1})):(0,l.kq)("",!0),e.rejectButton?((0,l.wg)(),(0,l.j4)(m,{key:2,type:"danger",disable:e.disableRejectButton,class:"w-full",onClick:p[2]||(p[2]=e=>t("reject"))},{default:(0,l.w5)((()=>[r])),_:1},8,["disable"])):(0,l.kq)("",!0),e.submitButton?((0,l.wg)(),(0,l.j4)(m,{key:3,disable:e.disableSubmitButton,type:"primary",loading:e.loading,class:"w-full",onClick:p[3]||(p[3]=e=>t("submit"))},{default:(0,l.w5)((()=>[(0,l.Uk)((0,i.zw)(e.submitLabel),1)])),_:1},8,["disable","loading"])):(0,l.kq)("",!0),e.editButton?((0,l.wg)(),(0,l.j4)(m,{key:4,type:"primary",loading:e.loading,class:"w-full",onClick:p[4]||(p[4]=e=>t("edit"))},{default:(0,l.w5)((()=>[c])),_:1},8,["loading"])):(0,l.kq)("",!0)])])])}}});const m=p;var g=m},2252:function(e,t,a){a.r(t),a.d(t,{default:function(){return ce}});var l=a(6252),i=a(3577),s=a(2202),n=a(2262),o=a(5953),u=a(9963),d=a(9419),r=a(6080),c=a(6210),p=a(9996),m=a(5425);const g={async getDetails(e){const t=await m.s.get(`/digi-sign/get/public-details/${e}`);return t.data},async signAndApprove(e,t){const a=await m.s.put(`/digi-sign/approve/${e}`,{sign:t});return a.data},async decline(e,t){const a=await m.s.put(`/digi-sign/decline/${e}`,{remarks:t});return a.data}};var v=a(7064),f=a(2201);const w={class:"flex justify-between my-2"},b=["onClick"];var y=(0,l.aZ)({__name:"SignatureApproval",props:{details:{type:Object,required:!0},show:{type:Boolean,required:!0}},emits:["reload","reload","close"],setup(e,{expose:t,emit:a}){const i=(0,n.iH)(!1),s=(0,n.iH)(!1),o=(0,n.iH)(null),m=(0,n.iH)(null),y=r.T5+"/admin/upload-sign",x=(0,f.yj)(),_=(0,l.Fl)((()=>x.params.id));function h(e){i.value=e}function k(e){o.value?.fromDataURL("data:image/png;base64,"+e[0].base64)}function j(){o.value?.clearSignature(),m.value?.clearFiles()}async function S(){const e=o.value?.saveSignature().data;e?(s.value=!0,await g.signAndApprove(_.value,e).then((async()=>{(0,p.bM)({title:"Success",type:"success"}),s.value=!1,a("reload"),a("close")}))):(0,p.bM)({title:"Warning",message:"Empty Signature",type:"warning"})}return t({open:i,handleModal:h}),(t,i)=>((0,l.wg)(),(0,l.j4)(v.Z,{show:e.show,onClose:i[0]||(i[0]=e=>a("close")),"action-bar":!0,onSubmit:S,loading:s.value,"submit-label":"Sign & Submit"},{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l.Wm)((0,n.SU)(d.Z),{height:150,width:"100%",ref_key:"signaturePad",ref:o,options:{maxWidth:5},customStyle:{border:"#333333 1px dashed"}},null,512),(0,l._)("div",w,[(0,l.Wm)(c.Z,{ref_key:"attachFile",ref:m,action:y,limit:1,onFiles:k},null,512),(0,l._)("a",{onClick:(0,u.iM)(j,["prevent"]),class:"text-primary cursor-default mt-1"},"Clear",8,b)])])])),_:1},8,["show","loading"]))}});const x=y;var _=x;const h={class:"mt-3 text-center sm:mt-5"};var k=(0,l.aZ)({__name:"DeclineDropbox",props:{show:{type:Boolean,required:!0}},emits:["reload","close"],setup(e,{expose:t,emit:a}){const i=(0,n.iH)(!1),s=(0,n.iH)(!1),o=(0,n.iH)(""),u=(0,f.yj)(),d=(0,l.Fl)((()=>u.params.id));function r(e){i.value=e}async function c(){s.value=!0,await g.decline(d.value,o.value).then((async()=>{(0,p.bM)({title:"Success",type:"success"}),s.value=!1,i.value=!1,a("reload"),a("close")}))}return t({open:i,handleModal:r}),(t,i)=>{const n=(0,l.up)("el-input");return(0,l.wg)(),(0,l.j4)(v.Z,{show:e.show,onClose:i[1]||(i[1]=e=>a("close")),"action-bar":!0,disabled:!o.value,loading:s.value,onSubmit:c,"submit-type":"danger","submit-label":"Decline"},{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l._)("div",h,[(0,l.Wm)(n,{type:"textarea",rows:4,placeholder:"Please input",modelValue:o.value,"onUpdate:modelValue":i[0]||(i[0]=e=>o.value=e)},null,8,["modelValue"])])])])),_:1},8,["show","disabled","loading"])}}});const j=k;var S=j,B=a(6332);const C={class:"px-4 sm:px-6"},D=(0,l._)("h2",{class:"text-lg text-gray-900 font-barlow text-semibold"},"Approvals",-1),q={class:"mt-6 flow-root"},H={class:"-mb-8"},U={class:"relative pb-8"},z={key:0,class:"absolute top-4 left-4 -ml-px h-full w-0.5 bg-gray-200","aria-hidden":"true"},Z={class:"relative flex space-x-3 items-center"},A={class:"pt-1"},F=(0,l._)("svg",{stroke:"currentColor",fill:"currentColor","stroke-width":"0",viewBox:"0 0 640 512",class:"h-5 w-5 text-white","aria-hidden":"true",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg"},[(0,l._)("path",{d:"M623.2 192c-51.8 3.5-125.7 54.7-163.1 71.5-29.1 13.1-54.2 24.4-76.1 24.4-22.6 0-26-16.2-21.3-51.9 1.1-8 11.7-79.2-42.7-76.1-25.1 1.5-64.3 24.8-169.5 126L192 182.2c30.4-75.9-53.2-151.5-129.7-102.8L7.4 116.3C0 121-2.2 130.9 2.5 138.4l17.2 27c4.7 7.5 14.6 9.7 22.1 4.9l58-38.9c18.4-11.7 40.7 7.2 32.7 27.1L34.3 404.1C27.5 421 37 448 64 448c8.3 0 16.5-3.2 22.6-9.4 42.2-42.2 154.7-150.7 211.2-195.8-2.2 28.5-2.1 58.9 20.6 83.8 15.3 16.8 37.3 25.3 65.5 25.3 35.6 0 68-14.6 102.3-30 33-14.8 99-62.6 138.4-65.8 8.5-.7 15.2-7.3 15.2-15.8v-32.1c.2-9.1-7.5-16.8-16.6-16.2z"})],-1),R=[F],W={class:"min-w-0 flex-1 flex justify-between space-x-4"},L={class:"text-sm text-gray-800 font-semibold"},M={class:"text-xs text-gray-500 font-semibold"},P={key:0,class:"text-gray-600 text-sm"},N={key:1,class:"text-gray-500 text-sm"},O={key:0,class:"mt-6 md:flex justify-between space-x-2 hidden"},T=(0,l.Uk)("Decline"),E=(0,l.Uk)("Sign"),V={class:"mt-6"},Y=(0,l.Uk)("Download PDF");var $=(0,l.aZ)({__name:"Signatures",props:{details:{type:Object,required:!0}},emits:["reload"],setup(e,{emit:t}){const a=e,s=(0,n.iH)(!1),u=(0,n.iH)(!1),d=(0,n.iH)(!1),c=(0,f.yj)(),p=(0,l.Fl)((()=>c.params.id)),m=(0,l.Fl)((()=>a.details.signatories?.find((e=>1==e.current))?.status));function g(){u.value=!0}async function v(){d.value=!0,await fetch(r.T5+"/digi-sign/generate-pdf/"+p.value,{method:"GET",headers:{Accept:"arraybuffer","Content-Type":"application/json"}}).then((e=>e.blob())).then((e=>{window.open(URL.createObjectURL(e))})),d.value=!1}function w(){s.value=!0}return(a,r)=>{const c=(0,l.up)("el-button");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",C,[D,(0,l._)("div",q,[(0,l._)("ul",H,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.details.signatories,((t,a)=>((0,l.wg)(),(0,l.iD)("li",{key:a},[(0,l._)("div",U,[a<e.details.signatories.length-1?((0,l.wg)(),(0,l.iD)("span",z)):(0,l.kq)("",!0),(0,l._)("div",Z,[(0,l._)("div",A,[(0,l._)("span",{class:(0,i.C_)(["h-8 w-8 rounded-full flex items-center justify-center ring-8 ring-white",{"bg-positive":"Approved"==t.status,"bg-gray-500":"Pending"==t.status&&0==t.current,"bg-pumpkin":"Pending"==t.status&&1==t.current,"bg-negative":"Declined"==t.status}])},R,2)]),(0,l._)("div",W,[(0,l._)("div",null,[(0,l._)("p",L,(0,i.zw)(t.contactName),1),(0,l._)("p",M,(0,i.zw)(t.label),1)]),"Approved"==t.status?((0,l.wg)(),(0,l.iD)("div",P,(0,i.zw)((0,n.SU)(o.p6)(t.sign_date)),1)):(0,l.kq)("",!0),"Declined"==t.status?((0,l.wg)(),(0,l.iD)("div",N,[(0,l._)("p",null," Reason: "+(0,i.zw)(t.decline_remarks),1)])):(0,l.kq)("",!0)])])])])))),128))]),"Pending"==(0,n.SU)(m)&&"approval"==e.details.view?((0,l.wg)(),(0,l.iD)("div",O,[(0,l.Wm)(c,{class:"w-full",type:"danger",onClick:r[0]||(r[0]=e=>w())},{default:(0,l.w5)((()=>[T])),_:1}),(0,l.Wm)(c,{class:"w-full",type:"primary",onClick:g},{default:(0,l.w5)((()=>[E])),_:1})])):(0,l.kq)("",!0),(0,l._)("div",V,[(0,l.Wm)(c,{class:"w-full",type:"primary",onClick:v,loading:d.value},{default:(0,l.w5)((()=>[Y])),_:1},8,["loading"])])]),(0,l.Wm)(_,{show:u.value,onClose:r[1]||(r[1]=e=>u.value=!1),details:e.details,onReload:r[2]||(r[2]=e=>t("reload"))},null,8,["show","details"])]),(0,l.Wm)(S,{show:s.value,onClose:r[3]||(r[3]=e=>s.value=!1),onReload:r[4]||(r[4]=e=>t("reload"))},null,8,["show"]),"Pending"==(0,n.SU)(m)&&"approval"==e.details.view?((0,l.wg)(),(0,l.j4)(B.Z,{key:0,"reject-button":!0,onReject:w,"submit-label":"Sign",onSubmit:g})):(0,l.kq)("",!0)],64)}}});const G=$;var K=G;const I={class:"min-h-full pb-20 h-full"},J={class:"p-0 md:pt-10 md:py-10 2xl:px-8 max-w-7xl mx-auto flex flex-col justify-start"},Q={class:"w-full grid grid-cols-1 gap-1 sm:px-6 lg:grid-flow-col-dense lg:grid-cols-3"},X={class:"lg:col-span-2 xl:pr-8"},ee={class:"md:flex md:items-center md:justify-between md:space-x-4 bg-white p-5 border-gray-300 rounded-md"},te={class:"text-2xl font-bold text-gray-900 font-barlow"},ae={class:"md:inline text-secondary text-opacity-40 font-barlow font-bold text-sm uppercase text-gray-600"},le={key:0,class:"py-3 xl:pt-6 xl:pb-0 space-y-3"},ie={class:"prose max-w-none bg-white border-gray-300 p-3 rounded-md text-gray-800 unreset"},se={class:"relative",style:{"padding-top":"56.25%","min-height":"1100px"}},ne=["src"],oe={"aria-labelledby":"timeline-title",class:"lg:col-start-3 lg:col-span-1 space-y-5"},ue={class:"bg-white py-5 rounded-md border-gray-300"};var de=(0,l.aZ)({__name:"Approval",setup(e){const t=(0,n.iH)(!1),a=(0,n.iH)(!1),o=(0,n.iH)(null),u=(0,f.yj)(),d=(0,l.Fl)((()=>u.params.id));async function r(){t.value=!0,a.value=!1,await g.getDetails(d.value).then((e=>{o.value=e,t.value=!1,a.value=!0})).catch((()=>{t.value=!1,a.value=!0}))}return(0,l.bv)((()=>{r()})),(e,t)=>((0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(s.Z,{name:"Approval",subName:"Dropbox",redirectRoute:"dropbox"}),(0,l._)("div",I,[(0,l._)("div",J,[(0,l._)("div",Q,[(0,l._)("div",X,[(0,l._)("div",null,[(0,l._)("div",null,[(0,l._)("div",ee,[(0,l._)("div",null,[(0,l._)("h2",te,(0,i.zw)(o.value?.name),1),(0,l._)("p",ae,(0,i.zw)(o.value?.digitalsignature_no),1)])]),a.value?((0,l.wg)(),(0,l.iD)("div",le,[(0,l._)("div",ie,[(0,l._)("div",se,[(0,l._)("iframe",{src:o.value?.iframe,style:{border:"0"},class:"absolute inset-0 w-full h-full",frameborder:"0"},null,8,ne)])])])):(0,l.kq)("",!0)])])]),(0,l._)("section",oe,[(0,l._)("div",ue,[o.value?((0,l.wg)(),(0,l.j4)(K,{key:0,details:o.value,onReload:r},null,8,["details"])):(0,l.kq)("",!0)])])])])])],64))}});const re=de;var ce=re}}]);