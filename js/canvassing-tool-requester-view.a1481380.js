"use strict";(self["webpackChunkvue3_ts_template"]=self["webpackChunkvue3_ts_template"]||[]).push([[550],{5721:function(e,t,a){a.d(t,{Z:function(){return y}});var s=a(6252),l=a(3577),o=a(6080),n=a(2262);const r={class:"text-sm"},i=["onClick"],d=(0,s._)("svg",{class:"flex-shrink-0 h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[(0,s._)("path",{"fill-rule":"evenodd",d:"M8 4a3 3 0 00-3 3v4a5 5 0 0010 0V7a1 1 0 112 0v4a7 7 0 11-14 0V7a5 5 0 0110 0v4a3 3 0 11-6 0V7a1 1 0 012 0v4a1 1 0 102 0V7a3 3 0 00-3-3z","clip-rule":"evenodd"})],-1),c={class:"flex-grow font-medium px-2"},u=(0,s.Uk)("Attachments"),m={class:"mt-3 text-center sm:mt-5"},p=["src"];var x=(0,s.aZ)({__name:"CanvassingAttachments",props:{attachments:{type:Array,required:!0}},setup(e){const t=(0,n.iH)(!1),a=(0,n.iH)("");function x(e){"image/jpeg"==e.filetype||"image/png"==e.filetype?(t.value=!0,a.value=`${o.FX}/public-attachments/${e.filename}`):window.open(`${o.FX}/public-attachments/${e.filename}`,"_blank")}return(o,n)=>{const f=(0,s.up)("el-button"),y=(0,s.up)("el-badge"),v=(0,s.up)("el-popover"),w=(0,s.up)("Dialog");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s.Wm)(v,{placement:"bottom",width:"400",trigger:"hover"},{reference:(0,s.w5)((()=>[(0,s.Wm)(y,{value:e.attachments.length,class:"item"},{default:(0,s.w5)((()=>[(0,s.Wm)(f,{disabled:0==e.attachments.length,size:"small",type:"text"},{default:(0,s.w5)((()=>[u])),_:1},8,["disabled"])])),_:1},8,["value"])])),default:(0,s.w5)((()=>[(0,s._)("div",r,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.attachments,((e,t)=>((0,s.wg)(),(0,s.iD)("div",{class:"flex justify-start cursor-pointer text-gray-700 hover:text-orange-400 hover:bg-orange-100 rounded-md px-2 py-2",key:t,onClick:t=>x(e)},[d,(0,s._)("div",c,(0,l.zw)(e.display_name),1)],8,i)))),128))])])),_:1}),(0,s.Wm)(w,{show:t.value,onClose:n[0]||(n[0]=e=>t.value=!1)},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("div",m,[(0,s._)("img",{src:a.value,alt:"",height:"400px"},null,8,p)])])])),_:1},8,["show"])],64)}}});const f=x;var y=f},6210:function(e,t,a){a.d(t,{Z:function(){return p}});var s=a(6252),l=a(2262),o=a(3577),n=a(9737),r=a(7960);const i=(0,s.Uk)("Click to upload"),d={class:"el-upload__tip"},c=(0,s.Uk)("Attach File ");var u=(0,s.aZ)({__name:"AttachFile",props:{action:{type:String,required:!0},fileSize:{type:Number,default:15},data:{type:Object},limit:{type:Number,default:3}},emits:["disable","files"],setup(e,{expose:t,emit:a}){const u=e;t({sliceAttachments:h,submitUpload:k});const m=(0,l.iH)(null),p=(0,l.iH)([]),x=(0,l.iH)([]),f=(0,l.iH)(!1),y=(0,s.Fl)((()=>({Authorization:`Bearer ${(0,r.LP)()}`})));function v(e){f.value=!0,a("disable",!0);const t=e.size/1024/1024<u.fileSize;return t||(n.T.alert("Document size can not exceed "+u.fileSize+"MB!"),f.value=!1,a("disable",!0)),t}function w(e,t){p.value=t.slice(-3);const a=x.value.filter((t=>t.crmid!==e.response.crmid));x.value=a}function b(){n.T.alert("File limit exceeded. 3 files attachment only.")}function g(e){n.T.alert(e),f.value=!1,a("disable",!1)}function _(e){x.value.push(e),f.value=!1,a("disable",!1),a("files",x.value)}function h(){p.value=[],x.value=[],m.value?.clearFiles()}function k(){f.value=!0,m.value?.submit()}return(t,a)=>{const n=(0,s.up)("el-button"),r=(0,s.up)("el-upload"),u=(0,s.up)("el-badge"),p=(0,s.up)("el-popover");return(0,s.wg)(),(0,s.j4)(p,{placement:"top",width:"400",trigger:"click"},{reference:(0,s.w5)((()=>[(0,s.Wm)(u,{value:x.value.length,class:"item"},{default:(0,s.w5)((()=>[(0,s.Wm)(n,{type:"default"},{default:(0,s.w5)((()=>[c])),_:1})])),_:1},8,["value"])])),default:(0,s.w5)((()=>[(0,s.Wm)(r,{class:"upload-demo",data:e.data,action:e.action,limit:e.limit,ref_key:"upload",ref:m,"before-upload":v,"on-remove":w,"on-exceed":b,headers:(0,l.SU)(y),"on-error":g,"on-success":_,"auto-upload":!0},{tip:(0,s.w5)((()=>[(0,s._)("div",d," Files with a size less than "+(0,o.zw)(e.fileSize)+"mb. ",1)])),default:(0,s.w5)((()=>[(0,s.Wm)(n,{loading:f.value,type:"primary"},{default:(0,s.w5)((()=>[i])),_:1},8,["loading"])])),_:1},8,["data","action","limit","headers"])])),_:1})}}});const m=u;var p=m},7064:function(e,t,a){a.d(t,{Z:function(){return v}});var s=a(6252),l=a(2262),o=a(3577),n=a(452),r=a(2115);const i=(0,s._)("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),d={class:"fixed inset-0 z-10 overflow-y-auto"},c={class:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0"},u={key:0,class:"sm:flex sm:items-start"},m={class:"text-center sm:mt-0 sm:text-left"},p={key:1,class:"sm:flex sm:flex-row-reverse space-x-2 gap-2 mt-3"},x=(0,s.Uk)(" Cancel ");var f=(0,s.aZ)({__name:"Dialog",props:{show:{type:Boolean,required:!0},title:{type:String},width:{type:String,default:"500px",required:!0},actionBar:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},submitLabel:{type:String,default:"Submit"},submitType:{type:String,default:"primary"},submitDisabled:{type:Boolean,default:!1}},emits:["close","submit"],setup(e,{emit:t}){const a=(0,l.iH)(!1);return(0,s.bv)((()=>{a.value=!0})),(a,f)=>{const y=(0,s.up)("el-button");return(0,s.wg)(),(0,s.j4)((0,l.SU)(n.Q),{as:"template",show:e.show},{default:(0,s.w5)((()=>[(0,s.Wm)((0,l.SU)(r.Vq),{as:"div",class:"relative z-10",onClose:f[2]||(f[2]=e=>t("close"))},{default:(0,s.w5)((()=>[(0,s.Wm)((0,l.SU)(n.x),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:(0,s.w5)((()=>[i])),_:1}),(0,s._)("div",d,[(0,s._)("div",c,[(0,s.Wm)((0,l.SU)(n.x),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:(0,s.w5)((()=>[(0,s.Wm)((0,l.SU)(r.EM),{class:(0,o.C_)("relative transform overflow-hidden rounded-lg bg-white px-4 pt-5 pb-4 text-left shadow-xl transition-all sm:my-8 w-full sm:p-6 mb-[64px] md:mb-0"),style:(0,o.j5)(`width: ${e.width}`)},{default:(0,s.w5)((()=>[e.title?((0,s.wg)(),(0,s.iD)("div",u,[(0,s._)("div",m,[(0,s.Wm)((0,l.SU)(r.$N),{as:"h3",class:"text-base font-semibold leading-6 text-gray-900"},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(e.title),1)])),_:1})])])):(0,s.kq)("",!0),(0,s.WI)(a.$slots,"default"),e.actionBar?((0,s.wg)(),(0,s.iD)("div",p,[(0,s._)("div",null,[(0,s.Wm)(y,{type:e.submitType,loading:e.loading,disabled:e.submitDisabled,size:"large",class:"mt-3 inline-flex w-full justify-center rounded-md sm:mt-0 sm:w-auto",onClick:f[0]||(f[0]=e=>t("submit"))},{default:(0,s.w5)((()=>[(0,s.Uk)((0,o.zw)(e.submitLabel),1)])),_:1},8,["type","loading","disabled"])]),(0,s._)("div",null,[(0,s.Wm)(y,{type:"button",size:"large",class:"mt-3 inline-flex w-full justify-center rounded-md sm:mt-0 sm:w-auto",onClick:f[1]||(f[1]=e=>t("close")),ref:"cancelButtonRef"},{default:(0,s.w5)((()=>[x])),_:1},512)])])):(0,s.kq)("",!0)])),_:3},8,["style"])])),_:3})])])])),_:3})])),_:3},8,["show"])}}});const y=f;var v=y},6332:function(e,t,a){a.d(t,{Z:function(){return x}});var s=a(6252),l=a(3577),o=a(6210);const n={class:"z-30 fixed w-full bottom-0 px-2 items-center md:rounded-lg bg-white border-t md:hidden"},r={class:"flex items-center justify-between border-gray-200 bg-white px-4 py-3 sm:px-6","aria-label":"Pagination"},i={class:"flex flex-1 justify-between sm:justify-end space-x-2"},d=(0,s.Uk)("Cancel"),c=(0,s.Uk)("Decline"),u=(0,s.Uk)("Edit");var m=(0,s.aZ)({__name:"MobileAction",props:{loading:{type:Boolean,default:!1},attachFile:{type:Boolean,default:!1},cancelButton:{type:Boolean,default:!1},editButton:{type:Boolean,default:!1},rejectButton:{type:Boolean,default:!1},disableRejectButton:{type:Boolean,default:!1},disableSubmitButton:{type:Boolean,default:!1},submitLabel:{type:String,default:"Submit"},submitButton:{type:Boolean,default:!0},action:{type:String},fileSize:{type:Number,default:15},data:{type:Object},limit:{type:Number,default:3}},emits:["cancel","submit","files","edit","reject"],setup(e,{emit:t}){return(a,m)=>{const p=(0,s.up)("el-button");return(0,s.wg)(),(0,s.iD)("div",n,[(0,s._)("nav",r,[(0,s._)("div",i,[e.attachFile&&e.action?((0,s.wg)(),(0,s.j4)(o.Z,{key:0,action:e.action,"file-size":e.fileSize,data:e.data,limit:e.limit,onFiles:m[0]||(m[0]=e=>t("files"))},null,8,["action","file-size","data","limit"])):(0,s.kq)("",!0),e.cancelButton?((0,s.wg)(),(0,s.j4)(p,{key:1,class:"w-full",onClick:m[1]||(m[1]=e=>t("cancel"))},{default:(0,s.w5)((()=>[d])),_:1})):(0,s.kq)("",!0),e.rejectButton?((0,s.wg)(),(0,s.j4)(p,{key:2,type:"danger",disable:e.disableRejectButton,class:"w-full",onClick:m[2]||(m[2]=e=>t("reject"))},{default:(0,s.w5)((()=>[c])),_:1},8,["disable"])):(0,s.kq)("",!0),e.submitButton?((0,s.wg)(),(0,s.j4)(p,{key:3,disable:e.disableSubmitButton,type:"primary",loading:e.loading,class:"w-full",onClick:m[3]||(m[3]=e=>t("submit"))},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(e.submitLabel),1)])),_:1},8,["disable","loading"])):(0,s.kq)("",!0),e.editButton?((0,s.wg)(),(0,s.j4)(p,{key:4,type:"primary",loading:e.loading,class:"w-full",onClick:m[4]||(m[4]=e=>t("edit"))},{default:(0,s.w5)((()=>[u])),_:1},8,["loading"])):(0,s.kq)("",!0)])])])}}});const p=m;var x=p},4753:function(e,t,a){a.r(t),a.d(t,{default:function(){return qt}});var s=a(6252),l=a(3577),o=a(7700),n=a(2262),r=a(5953),i=a(5721),d=a(9996),c=a(7064);const u={class:"mt-3 text-center sm:mt-5"};var m=(0,s.aZ)({__name:"RejectDialog",props:{id:{type:Number,required:!0},show:{type:Boolean,required:!0}},emits:["reload","close"],setup(e,{emit:t}){const a=e,l=(0,n.iH)(!1),r=(0,n.iH)("");async function i(){l.value=!0,await o.o.rejectProposal(a.id,r.value).then((()=>{l.value=!1,(0,d.bM)({title:"Success",message:"Proposal has been rejected.",type:"success"}),t("close"),t("reload")}))}return(a,o)=>{const n=(0,s.up)("el-input");return(0,s.wg)(),(0,s.j4)(c.Z,{show:e.show,onClose:o[1]||(o[1]=e=>t("close")),"action-bar":!0,"submit-disabled":""==r.value||!r.value,loading:l.value,onSubmit:i,"submit-type":"danger","submit-label":"Reject"},{default:(0,s.w5)((()=>[(0,s._)("div",null,[(0,s._)("div",u,[(0,s.Wm)(n,{type:"textarea",rows:4,placeholder:"Please input",modelValue:r.value,"onUpdate:modelValue":o[0]||(o[0]=e=>r.value=e)},null,8,["modelValue"])])])])),_:1},8,["show","submit-disabled","loading"])}}});const p=m;var x=p,f=a(9737),y=a(6080),v=a(6332);const w={class:"mt-8"},b={class:"mx-auto w-full"},g={class:"mt-2 flex flex-col"},_={class:"min-w-full overflow-hidden overflow-x-auto align-middle border-gray-300 sm:rounded-md"},h={class:"min-w-full divide-y divide-gray-300"},k={class:"bg-gray-50"},z=(0,s._)("th",{class:"p-3 text-xs font-semibold text-gray-900 text-center border",colspan:"3"}," Item ",-1),D=(0,s._)("th",{class:"p-3 text-xs font-semibold text-gray-900 text-center border",rowspan:"2",colspan:"2"}," Approved Items Total ",-1),S=(0,s._)("th",{class:"p-3 text-center text-xs font-semibold text-gray-900 border"}," Description ",-1),j=(0,s._)("th",{class:"p-3 text-center text-xs font-semibold text-gray-900 border"}," Qty ",-1),U=(0,s._)("th",{class:"p-3 text-center text-xs font-semibold text-gray-900 border"}," UOM ",-1),H=(0,s._)("th",{class:"p-3 text-center text-xs font-semibold text-gray-900 border"}," Unit Cost ",-1),q=(0,s._)("th",{class:"p-3 text-center text-xs font-semibold text-gray-900 border"}," Total ",-1),C={class:"divide-y divide-gray-200 bg-white"},A={class:"p-2 text-xs text-gray-500 border",rowspan:"3",style:{"min-width":"350px"}},B={class:"text-pumpkin font-semibold"},Y={class:"text-gray-500"},R=(0,s.Uk)(" Brand: "),N={class:"font-semibold text-gray-800"},T={class:"text-gray-500"},K=(0,s.Uk)(" Specifications: "),P={class:"font-semibold text-gray-800"},W={class:"p-2 text-xs text-gray-500 border text-center font-semibold",rowspan:"3",style:{"min-width":"80px"}},V={class:"p-2 text-xs text-gray-500 border text-center font-semibold",rowspan:"3",style:{"min-width":"80px"}},$={class:"p-2 text-xs text-gray-500 border text-center font-semibold",style:{"min-width":"150px"}},F={key:0,class:"p-2 text-xs text-gray-500 border text-center font-semibold",style:{"min-width":"150px"}},Z={key:1,class:"p-2 text-xs text-gray-500 border text-center"},O={class:"px-3 py-4 text-xs text-gray-500 border text-center font-semibold",rowspan:"3",style:{"min-width":"150px"}},M={class:"flex justify-between"},I=(0,s.Uk)("Approved"),X=(0,s.Uk)("Approve"),E={class:"bg-gray-100 p-1 mb-2 font-semibold"},L={class:"w-full"},Q={class:"text-gray-500"},G={class:"text-gray-500"},J=(0,s.Uk)("Unselect"),ee={key:1,class:"text-center my-5"},te=["colspan"],ae=(0,s._)("td",{class:"p-2 text-xs text-gray-900 border font-semibold",colspan:"3"}," Gross Total ",-1),se=(0,s._)("td",{class:"p-2 text-xs text-gray-500 border font-semibold"},null,-1),le={class:"p-2 text-xs text-gray-500 border font-semibold text-center"},oe={class:"p-2 text-xs text-gray-500 border font-semibold text-center"},ne=(0,s._)("td",{class:"p-2 text-xs text-gray-900 border font-semibold",colspan:"3"}," 12% VAT ",-1),re={class:"p-2 text-xs text-gray-500 border font-semibold text-center"},ie={class:"p-2 text-xs text-gray-500 border font-semibold text-center"},de={class:"p-2 text-xs text-gray-500 border font-semibold text-center"},ce=(0,s._)("td",{class:"p-2 text-xs text-gray-900 border font-semibold",colspan:"3"}," Net Total ",-1),ue={class:"p-2 text-xs text-gray-500 border font-semibold text-center"},me={class:"p-2 text-xs text-gray-500 border font-semibold text-center"},pe={class:"p-2 text-xs text-gray-500 border font-semibold text-center"},xe=(0,s._)("td",{class:"p-2 text-xs text-gray-900 border font-semibold",colspan:"3"}," Discount Percentage & Price ",-1),fe={class:"p-2 text-xs text-gray-500 border font-semibold text-center"},ye={class:"p-2 text-xs text-gray-500 border font-semibold text-center"},ve={class:"p-2 text-xs text-gray-500 border font-semibold text-center"},we=(0,s._)("td",{class:"p-2 text-xs text-gray-900 border font-semibold",colspan:"3"}," 10% Processing Fee ",-1),be={class:"p-2 text-xs text-gray-500 border font-semibold text-center"},ge={class:"p-2 text-xs text-gray-500 border font-semibold text-center"},_e={class:"p-2 text-xs text-gray-500 border font-semibold text-center"},he=(0,s._)("td",{class:"p-2 text-xs text-gray-900 border font-semibold",colspan:"3"}," Grand Total ",-1),ke=(0,s._)("td",{class:"p-2 text-xs text-gray-500 border font-semibold text-center"},null,-1),ze={class:"p-2 text-xs text-gray-500 border font-semibold text-center"},De={class:"p-2 text-xs text-gray-500 border font-semibold text-center"},Se=(0,s._)("td",{class:"p-2 text-xs text-gray-900 border font-semibold",colspan:"3"}," Warranty ",-1),je=(0,s._)("td",{class:"p-2 text-xs text-gray-500 border font-semibold text-center"},null,-1),Ue=(0,s._)("td",{class:"p-2 text-xs text-gray-900 border font-semibold",colspan:"3"}," Availability ",-1),He=(0,s._)("td",{class:"p-2 text-xs text-gray-500 border font-semibold text-center"},null,-1),qe=(0,s._)("td",{class:"p-2 text-xs text-gray-900 border font-semibold",colspan:"3"}," Delivery Leadtime ",-1),Ce=(0,s._)("td",{class:"p-2 text-xs text-gray-500 border font-semibold text-center"},null,-1),Ae=(0,s._)("td",{class:"p-2 text-xs text-gray-900 border font-semibold",colspan:"3"}," Payment Terms ",-1),Be=(0,s._)("td",{class:"p-2 text-xs text-gray-500 border font-semibold text-center"},null,-1),Ye=(0,s._)("td",{class:"p-2 text-xs text-gray-900 border font-semibold",colspan:"3"}," Vendor Remarks ",-1),Re=(0,s._)("td",{class:"p-2 text-xs text-gray-500 border font-semibold text-center"},null,-1),Ne=(0,s._)("td",{class:"p-2 text-xs text-gray-900 border font-semibold",colspan:"3"}," Notes/Remarks from Procurement ",-1),Te={class:"list-disc px-3"},Ke=(0,s._)("td",{class:"p-2 text-xs text-gray-500 border font-semibold text-center"},null,-1),Pe=(0,s._)("td",{class:"p-2 text-xs text-gray-900 border font-semibold",rowspan:"2",colspan:"3"}," Notes/Remarks to Procurement ",-1),We={class:"list-disc px-3"},Ve=(0,s._)("td",{class:"p-2 text-xs text-gray-500 border font-semibold text-center"},null,-1),$e=(0,s.Uk)("Add"),Fe=(0,s.Uk)("Add"),Ze=(0,s._)("td",{class:"p-2 text-xs text-gray-500 border font-semibold text-center"},null,-1),Oe={key:0,class:"md:flex items-center justify-end border-t border-gray-200 bg-white px-4 py-3 sm:px-6 hidden"},Me={class:"flex flex-1 justify-between sm:justify-end"},Ie=(0,s.Uk)("Reject"),Xe=(0,s.Uk)("Proceed to Order");var Ee=(0,s.aZ)({__name:"RequesterCanvassingSheet",props:{details:{type:Object,required:!0},view:{type:String,required:!0}},emits:["editVendor","addProposal","editProposal","removeProposal","editVendorTotal","reload"],setup(e,{emit:t}){const a=e,c=(0,n.iH)(!1),u=(0,n.iH)(!1),m=(0,s.Fl)((()=>{let e=!1,t=0;return a.details.products.map((e=>{e.vendors.map((e=>{"Approved"==e.status&&(t+=1)}))})),a.details.products.length==t&&(e=!0),e})),p=(0,s.Fl)((()=>{let e=!1;return a.details.products.map((t=>{let a=0;t.vendors.map((e=>{0==e.available&&(a+=1),"Approved"==e.status&&(a+=1)})),0==a&&(e=!0)})),e}));function Ee(e){const t=a.details.vendor_total.find((t=>t.vendor_id==e));return t?t.currency:"PHP"}function Le(e){let t=0;return e.vendors.map((e=>{if("Approved"==e.status){const s=a.details.vendor_total.find((e=>e.vendor_id==e.vendor_id));s&&"PHP"!=s.currency?t+=e.total*s.conversion_rate:t+=e.total}})),(0,r.dN)(t,"PHP")}async function Qe(e){f.T.confirm("Are you sure you want to approve this item?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((async()=>{await o.o.awardItem(e).then((e=>{(0,d.bM)({title:"Item has been rewarded",message:e.message,type:"success"})})),t("reload")}))}async function Ge(e){f.T.confirm("Are you sure you want to cancel this item?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((async()=>{await o.o.unApproveCounter(e).then((e=>{(0,d.bM)({title:"Success",message:e.message,type:"success"}),t("reload")}))}))}async function Je(e){f.T.confirm("Are you sure you want to approve this item?","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((async()=>{await o.o.approveCounter(e).then((e=>{(0,d.bM)({title:"Item has been approved",message:e.message,type:"success"})})),t("reload")}))}function et(e){let t=0;return a.details.products.forEach((a=>{a.vendors.forEach((s=>{s.vendor_id==e&&(t+=s.cost*a.quantity)}))})),t}function tt(e){const t=a.details.vendor_total.find((t=>t.vendor_id==e));return t&&1==t.vat?.12*et(e):0}function at(e){return et(e)+tt(e)}function st(e){let t=0;const s=a.details.vendor_total.find((t=>t.vendor_id==e));return s&&(t=(at(e)-s.price_discount)/at(e)*100),parseInt(t.toFixed(2))||0}function lt(e){t("editVendorTotal",e)}async function ot(e,a,s){await o.o.addRemarks(e,a,s).then((a=>{(0,d.bM)({title:"Success",message:a.message,type:"success"}),lt({id:e,key:"requesterRecommendation",value:"",type:"string"}),t("reload")}))}function nt(){u.value=!0}function rt(){f.T.confirm("For approved costs below 20k per vendor, please coordinate directly with them. For costs above 20k, a PO creation will be required.","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((async()=>{p.value||"Canvassing Sheet"!=a.details.cf_4127||(c.value=!0,await o.o.approveClient(a.details.canvassingtoolid).then((async e=>{c.value=!1,(0,d.bM)({title:"Success",message:e.message,type:"success"}),c.value=!1,t("reload"),1==e.generate&&await fetch(y.T5+`/public/canvassing/order-form/${a.details.canvassingtoolid}`,{method:"GET",headers:{Accept:"arraybuffer","Content-Type":"application/json","X-Authorization":`${y.o3}`}}).then((e=>e.blob())).then((e=>{window.open(URL.createObjectURL(e))}))})))}))}return(a,o)=>{const d=(0,s.up)("el-button"),f=(0,s.up)("el-input"),y=(0,s.up)("el-affix");return(0,s.wg)(),(0,s.iD)(s.HY,null,[(0,s._)("div",w,[(0,s._)("div",b,[(0,s._)("div",g,[(0,s._)("div",_,[(0,s._)("table",h,[(0,s._)("thead",k,[(0,s._)("tr",null,[z,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.details.vendor_total,(e=>((0,s.wg)(),(0,s.iD)("th",{key:e.vendor_id,colspan:"2",class:"p-3 text-xs font-semibold text-gray-900 text-center border"},(0,l.zw)(e.vendorname),1)))),128)),D]),(0,s._)("tr",null,[S,j,U,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.details.vendor_total,((e,t)=>((0,s.wg)(),(0,s.iD)(s.HY,{key:t},[H,q],64)))),128))])]),(0,s._)("tbody",C,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.details.products,((t,a)=>((0,s.wg)(),(0,s.iD)(s.HY,{key:a},[(0,s._)("tr",null,[(0,s._)("td",A,[(0,s._)("p",B,(0,l.zw)(t.item_name),1),(0,s._)("p",Y,[R,(0,s._)("span",N,(0,l.zw)(t.brand),1)]),(0,s._)("p",T,[K,(0,s._)("span",P,(0,l.zw)(t.specifications),1)])]),(0,s._)("td",W,(0,l.zw)(t.quantity),1),(0,s._)("td",V,(0,l.zw)(t.uom),1),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.vendors,((e,t)=>((0,s.wg)(),(0,s.iD)(s.HY,{key:t},[(0,s._)("td",$,(0,l.zw)((0,n.SU)(r.dN)(e.cost,Ee(e.vendor_id))),1),e.available?((0,s.wg)(),(0,s.iD)("td",F,(0,l.zw)((0,n.SU)(r.dN)(e.total,Ee(e.vendor_id))),1)):(0,s.kq)("",!0),e.available?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("td",Z," Not Available "))],64)))),128)),(0,s._)("td",O,(0,l.zw)(Le(t)),1)]),(0,s._)("tr",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.vendors,((a,l)=>((0,s.wg)(),(0,s.iD)("td",{class:"p-2 text-xs text-gray-500 border",colspan:"2",key:l},[(0,s._)("div",M,[(0,s.Wm)(i.Z,{attachments:a.attachments},null,8,["attachments"]),"Approved"==a.status&&"approver"==e.view?((0,s.wg)(),(0,s.j4)(d,{key:0,type:"success",disabled:""},{default:(0,s.w5)((()=>[I])),_:1})):"approver"==e.view&&1==a.available?((0,s.wg)(),(0,s.j4)(d,{key:1,type:"primary",disabled:"Approval"!==e.details.cf_3497&&"Re-approval"!==e.details.cf_3497||"Approved"==a.status||t.vendors.find((e=>"Approved"==e.status)),onClick:e=>Qe(a.id)},{default:(0,s.w5)((()=>[X])),_:2},1032,["disabled","onClick"])):(0,s.kq)("",!0)])])))),128))]),(0,s._)("tr",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.vendors,((t,a)=>((0,s.wg)(),(0,s.iD)("td",{class:"p-2 text-xs text-gray-500 border",colspan:"2",key:a},[(0,s._)("p",E,(0,l.zw)(t.counter.length)+" - Other Proposals ",1),t.counter.length>0?((0,s.wg)(!0),(0,s.iD)(s.HY,{key:0},(0,s.Ko)(t.counter,((a,o)=>((0,s.wg)(),(0,s.iD)("div",{class:"flex items-center border-b px-2 font-semibold",key:o},[(0,s._)("div",L,[(0,s._)("p",Q,(0,l.zw)(a.item_name)+" - "+(0,l.zw)(a.brand),1),(0,s._)("p",G,(0,l.zw)((0,n.SU)(r.dN)(a.cost,Ee(t.vendor_id))),1),(0,s.Wm)(i.Z,{attachments:a.attachments},null,8,["attachments"])]),t.approved_counter==a.id&&"Approved"!==t.status&&"approver"==e.view?((0,s.wg)(),(0,s.j4)(d,{key:0,size:"small",onClick:e=>Ge(a.id)},{default:(0,s.w5)((()=>[J])),_:2},1032,["onClick"])):"approver"==e.view?((0,s.wg)(),(0,s.j4)(d,{key:1,disabled:t.approved_counter==a.id||"Closed"==e.details.cf_3497||"Approved"==t.status,size:"small",type:t.approved_counter==a.id?"success":"primary",onClick:e=>Je(a.id)},{default:(0,s.w5)((()=>[(0,s.Uk)((0,l.zw)(t.approved_counter==a.id?"Selected":"Select"),1)])),_:2},1032,["disabled","type","onClick"])):(0,s.kq)("",!0)])))),128)):((0,s.wg)(),(0,s.iD)("p",ee,"No other proposals"))])))),128))])],64)))),128)),(0,s._)("tr",null,[(0,s._)("td",{class:"p-2 text-xs text-gray-500 border",colspan:2*e.details.vendor_total.length+4},null,8,te)]),(0,s._)("tr",null,[ae,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.details.vendor_total,((e,t)=>((0,s.wg)(),(0,s.iD)(s.HY,{key:t},[se,(0,s._)("td",le,(0,l.zw)((0,n.SU)(r.dN)(e.total,e.currency)),1)],64)))),128)),(0,s._)("td",oe,(0,l.zw)((0,n.SU)(r.dN)(e.details.cf_3507)),1)]),(0,s._)("tr",null,[ne,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.details.vendor_total,((e,t)=>((0,s.wg)(),(0,s.iD)(s.HY,{key:t},[(0,s._)("td",re,(0,l.zw)(e.vat?"Yes":"No"),1),(0,s._)("td",ie,(0,l.zw)((0,n.SU)(r.dN)(e.vat_amount,e.currency)),1)],64)))),128)),(0,s._)("td",de,(0,l.zw)((0,n.SU)(r.dN)(e.details.cf_3505)),1)]),(0,s._)("tr",null,[ce,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.details.vendor_total,((e,t)=>((0,s.wg)(),(0,s.iD)(s.HY,{key:t},[(0,s._)("td",ue,(0,l.zw)(e.vat?"Yes":"No"),1),(0,s._)("td",me,(0,l.zw)((0,n.SU)(r.dN)(e.net_total,e.currency)),1)],64)))),128)),(0,s._)("td",pe,(0,l.zw)((0,n.SU)(r.dN)(e.details.cf_3513)),1)]),(0,s._)("tr",null,[xe,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.details.vendor_total,((e,t)=>((0,s.wg)(),(0,s.iD)(s.HY,{key:t},[(0,s._)("td",fe,(0,l.zw)(st(e.vendor_id))+" % ",1),(0,s._)("td",ye,(0,l.zw)((0,n.SU)(r.dN)(e.price_discount,e.currency)),1)],64)))),128)),(0,s._)("td",ve,(0,l.zw)((0,n.SU)(r.dN)(e.details.cf_3511)),1)]),(0,s._)("tr",null,[we,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.details.vendor_total,((e,t)=>((0,s.wg)(),(0,s.iD)(s.HY,{key:t},[(0,s._)("td",be,(0,l.zw)(e.pf?"Yes":"No"),1),(0,s._)("td",ge,(0,l.zw)((0,n.SU)(r.dN)(e.pf_amount,e.currency)),1)],64)))),128)),(0,s._)("td",_e,(0,l.zw)((0,n.SU)(r.dN)(e.details.cf_3509)),1)]),(0,s._)("tr",null,[he,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.details.vendor_total,((e,t)=>((0,s.wg)(),(0,s.iD)(s.HY,{key:t},[ke,(0,s._)("td",ze,(0,l.zw)((0,n.SU)(r.dN)(e.grand_total,e.currency)),1)],64)))),128)),(0,s._)("td",De,(0,l.zw)((0,n.SU)(r.dN)(e.details.cf_3515)),1)]),(0,s._)("tr",null,[Se,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.details.vendor_total,((e,t)=>((0,s.wg)(),(0,s.iD)("td",{key:t,class:"p-2 text-xs text-gray-500 border font-semibold",colspan:"2"},(0,l.zw)(e.warranty),1)))),128)),je]),(0,s._)("tr",null,[Ue,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.details.vendor_total,((e,t)=>((0,s.wg)(),(0,s.iD)("td",{key:t,class:"p-2 text-xs text-gray-500 border font-semibold",colspan:"2"},(0,l.zw)(e.availability),1)))),128)),He]),(0,s._)("tr",null,[qe,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.details.vendor_total,((e,t)=>((0,s.wg)(),(0,s.iD)("td",{key:t,class:"p-2 text-xs text-gray-500 border font-semibold",colspan:"2"},(0,l.zw)(e.lead_time),1)))),128)),Ce]),(0,s._)("tr",null,[Ae,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.details.vendor_total,((e,t)=>((0,s.wg)(),(0,s.iD)("td",{key:t,class:"p-2 text-xs text-gray-500 border font-semibold",colspan:"2"},(0,l.zw)(e.terms),1)))),128)),Be]),(0,s._)("tr",null,[Ye,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.details.vendor_total,((e,t)=>((0,s.wg)(),(0,s.iD)("td",{key:t,class:"p-2 text-xs text-gray-500 border font-semibold",colspan:"2"},(0,l.zw)(e.remarks),1)))),128)),Re]),(0,s._)("tr",null,[Ne,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.details.vendor_total,((t,a)=>((0,s.wg)(),(0,s.iD)("td",{class:"p-2 text-xs text-gray-500 border font-semibold",colspan:"2",key:a},[(0,s._)("ul",Te,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.recommendations.filter((t=>t.receiver==e.view)),((e,t)=>((0,s.wg)(),(0,s.iD)("li",{key:t},(0,l.zw)(e.description),1)))),128))])])))),128)),Ke]),(0,s._)("tr",null,[Pe,((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.details.vendor_total,((t,a)=>((0,s.wg)(),(0,s.iD)("td",{class:"p-2 text-xs text-gray-500 border font-semibold",colspan:"2",key:a},[(0,s._)("ul",We,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.recommendations.filter((t=>t.receiver==("requester"==e.view?"procurement":"procurement-approver"))),((e,t)=>((0,s.wg)(),(0,s.iD)("li",{key:t},(0,l.zw)(e.description),1)))),128))])])))),128)),Ve]),(0,s._)("tr",null,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(e.details.vendor_total,((t,a)=>((0,s.wg)(),(0,s.iD)("td",{key:a,class:"p-2 text-xs text-gray-500 border font-semibold space-y-2",colspan:"2"},["requester"==e.view?((0,s.wg)(),(0,s.j4)(f,{key:0,type:"textarea",rows:2,placeholder:"Please input","model-value":t.requesterRecommendation,"onUpdate:modelValue":e=>lt({id:t.id,key:"requesterRecommendation",value:e,type:"string"})},null,8,["model-value","onUpdate:modelValue"])):(0,s.kq)("",!0),"approver"==e.view?((0,s.wg)(),(0,s.j4)(f,{key:1,type:"textarea",rows:2,placeholder:"Please input","model-value":t.approverRecommendation,"onUpdate:modelValue":e=>lt({id:t.id,key:"approverRecommendation",value:e,type:"string"})},null,8,["model-value","onUpdate:modelValue"])):(0,s.kq)("",!0),"requester"==e.view?((0,s.wg)(),(0,s.j4)(d,{key:2,type:"primary",class:"w-full",disabled:""==t.requesterRecommendation||!t.requesterRecommendation,onClick:e=>ot(t.id,t.requesterRecommendation,"procurement")},{default:(0,s.w5)((()=>[$e])),_:2},1032,["disabled","onClick"])):(0,s.kq)("",!0),"approver"==e.view?((0,s.wg)(),(0,s.j4)(d,{key:3,type:"primary",class:"w-full",disabled:""==t.approverRecommendation||!t.approverRecommendation,onClick:e=>ot(t.id,t.approverRecommendation,"procurement-approver")},{default:(0,s.w5)((()=>[Fe])),_:2},1032,["disabled","onClick"])):(0,s.kq)("",!0)])))),128)),Ze])])]),"Approval"!=e.details.cf_3497&&"Re-approval"!=e.details.cf_3497||"approver"!=e.view?(0,s.kq)("",!0):((0,s.wg)(),(0,s.iD)("nav",Oe,[(0,s._)("div",Me,[(0,s.Wm)(y,{position:"bottom",offset:20},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{type:"danger",size:"medium",onClick:nt,disabled:(0,n.SU)(m)},{default:(0,s.w5)((()=>[Ie])),_:1},8,["disabled"]),(0,s.Wm)(d,{disabled:(0,n.SU)(p),type:"primary",size:"medium",onClick:rt,loading:c.value},{default:(0,s.w5)((()=>[Xe])),_:1},8,["disabled","loading"])])),_:1})])]))])])])]),(0,s.Wm)(x,{show:u.value,onClose:o[0]||(o[0]=e=>u.value=!1),id:e.details.canvassingtoolid,onReload:o[1]||(o[1]=e=>t("reload"))},null,8,["show","id"]),"Approval"!=e.details.cf_3497&&"Re-approval"!=e.details.cf_3497||"approver"!=e.view?(0,s.kq)("",!0):((0,s.wg)(),(0,s.j4)(v.Z,{key:0,onReject:nt,"reject-button":!0,"disable-reject-button":(0,n.SU)(m),"disable-submit-button":(0,n.SU)(p),"submit-label":"Proceed to Order",onSubmit:rt,loading:c.value},null,8,["disable-reject-button","disable-submit-button","loading"]))],64)}}});const Le=Ee;var Qe=Le,Ge=a(2201);const Je={class:"min-h-full pb-20 h-full"},et={class:"p-0 md:pt-10 md:py-10 2xl:px-8 max-w-7xl mx-auto flex flex-col justify-start"},tt={class:"flex flex-1 flex-col"},at={class:"flex-1 pb-8"},st={class:"bg-white border-gray-300 rounded-md"},lt={class:"px-4 sm:px-6 lg:mx-auto w-full"},ot={class:"py-6 md:flex md:items-center md:justify-between lg:border-gray-200"},nt={class:"min-w-0 flex-1"},rt={class:"flex items-center"},it={class:"flex items-center"},dt={class:"ml-3 text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:leading-9"},ct={class:"mt-6 flex flex-col sm:ml-3 sm:mt-1 sm:flex-row sm:flex-wrap"},ut=(0,s._)("dt",{class:"flex items-center text-sm font-medium capitalize text-gray-500 sm:mr-6"}," Control ID: ",-1),mt={class:"flex items-center text-sm font-semibold capitalize text-gray-800 sm:mr-6"},pt={class:"mt-6 flex flex-col sm:ml-3 sm:mt-1 sm:flex-row sm:flex-wrap"},xt=(0,s._)("dt",{class:"flex items-center text-sm font-medium capitalize text-gray-500 sm:mr-6"}," Project Name: ",-1),ft={class:"flex items-center text-sm font-semibold capitalize text-gray-800 sm:mr-6"},yt={class:"mt-6 flex flex-col sm:ml-3 sm:mt-1 sm:flex-row sm:flex-wrap"},vt=(0,s._)("dt",{class:"flex items-center text-sm font-medium capitalize text-gray-500 sm:mr-6"}," Entity Name: ",-1),wt={class:"flex items-center text-sm font-semibold capitalize text-gray-800 sm:mr-6"},bt={class:"mt-6 flex flex-col sm:ml-3 sm:mt-1 sm:flex-row sm:flex-wrap"},gt=(0,s._)("dt",{class:"flex items-center text-sm font-medium capitalize text-gray-500 sm:mr-6"}," Entity Address: ",-1),_t={class:"flex items-center text-sm font-semibold capitalize text-gray-800 sm:mr-6"},ht={class:"mt-6 flex flex-col sm:ml-3 sm:mt-1 sm:flex-row sm:flex-wrap"},kt=(0,s._)("dt",{class:"flex items-center text-sm font-medium capitalize text-gray-500 sm:mr-6"}," SR No: ",-1),zt={class:"flex items-center text-sm font-semibold capitalize text-gray-800 sm:mr-6"},Dt={class:"mt-6 flex flex-col sm:ml-3 sm:mt-1 sm:flex-row sm:flex-wrap"},St=(0,s._)("dt",{class:"flex items-center text-sm font-medium capitalize text-gray-500 sm:mr-6"}," Requester Name: ",-1),jt={class:"flex items-center text-sm font-semibold capitalize text-gray-800 sm:mr-6"};var Ut=(0,s.aZ)({__name:"RequesterView",setup(e){const t=(0,n.iH)(null),a=(0,n.iH)(0),r=(0,n.iH)(""),i=(0,Ge.yj)(),d=(0,s.Fl)((()=>i.params.id));async function c(){await o.o.decryptSession(d.value).then((e=>{a.value=e.recordID,r.value=e.view}))}async function u(){await o.o.getRequesterQuotationDetails(a.value).then((e=>{t.value=e}))}async function m(){r.value&&await o.o.quotationViewed(d.value,r.value)}function p(e){const a=t.value?.vendor_total.find((t=>t.id==e.id));a&&(a[e.key]=e.value)}return(0,s.bv)((async()=>{await c(),await u(),await m()})),(e,a)=>((0,s.wg)(),(0,s.iD)("div",Je,[(0,s._)("div",et,[(0,s._)("div",tt,[(0,s._)("div",at,[(0,s._)("div",st,[(0,s._)("div",lt,[(0,s._)("div",ot,[(0,s._)("div",nt,[(0,s._)("div",rt,[(0,s._)("div",null,[(0,s._)("div",it,[(0,s._)("h1",dt,(0,l.zw)(t.value?.name),1)]),(0,s._)("dl",ct,[ut,(0,s._)("dd",mt,(0,l.zw)(t.value?.canvassingtoolno),1)]),(0,s._)("dl",pt,[xt,(0,s._)("dd",ft,(0,l.zw)(t.value?.name),1)]),(0,s._)("dl",yt,[vt,(0,s._)("dd",wt,(0,l.zw)(t.value?.cf_3798),1)]),(0,s._)("dl",bt,[gt,(0,s._)("dd",_t,(0,l.zw)(t.value?.cf_3800),1)]),(0,s._)("dl",ht,[kt,(0,s._)("dd",zt,(0,l.zw)(t.value?.cf_3479),1)]),(0,s._)("dl",Dt,[St,(0,s._)("dd",jt,(0,l.zw)(t.value?.contact_name),1)])])])])])])]),t.value?((0,s.wg)(),(0,s.j4)(Qe,{key:0,view:r.value,details:t.value,onEditVendorTotal:p,onReload:u},null,8,["view","details"])):(0,s.kq)("",!0)])])])]))}});const Ht=Ut;var qt=Ht},7700:function(e,t,a){a.d(t,{o:function(){return l}});var s=a(5425);const l={async quotationViewed(e,t){s.s.setXAuth();const a=await s.s.get(`/public/canvassing/view/${t}`,e);return a.data},async approveClient(e){const t=await s.s.get(`/canvassing/client-approved/${e}`);return t.data},async getQuotationDetails(e){s.s.setXAuth();const t=await s.s.get("/public/canvassing",e);return t.data},async updateQuotationDetails(e,t){s.s.setXAuth();const a=await s.s.put(`/public/canvassing/update-quotation/${t}`,e);return a.data},async getRequesterQuotationDetails(e){s.s.setXAuth();const t=await s.s.query(`/canvassing/${e}`,{approval:!0});return t.data},async decryptSession(e){s.s.setXAuth();const t=await s.s.get("/canvassing/decrypt",e);return t.data},async awardItem(e){s.s.setXAuth();const t=await s.s.get(`/canvassing-approve/item/vendor/${e}?approver=requester`);return t.data},async unApproveCounter(e){s.s.setXAuth();const t=await s.s.get(`/canvassing-unapprove/item/${e}?approver=requester`);return t.data},async approveCounter(e){const t=await s.s.get(`/canvassing-approve/item/${e}?approver=requester`);return t.data},async addRemarks(e,t,a){const l=await s.s.post(`/canvassing/add-recommendation/${e}`,{recommendation:t,receiver:a});return l.data},async rejectProposal(e,t){const a=await s.s.post(`/canvassing/client-rejected/${e}`,{reason:t});return a.data}}}}]);