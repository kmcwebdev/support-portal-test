"use strict";(self["webpackChunkvue3_ts_template"]=self["webpackChunkvue3_ts_template"]||[]).push([[2670],{5721:function(e,t,a){a.d(t,{Z:function(){return y}});var l=a(6252),o=a(3577),s=a(6080),d=a(2262);const n={class:"text-sm"},r=["onClick"],i=(0,l._)("svg",{class:"flex-shrink-0 h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[(0,l._)("path",{"fill-rule":"evenodd",d:"M8 4a3 3 0 00-3 3v4a5 5 0 0010 0V7a1 1 0 112 0v4a7 7 0 11-14 0V7a5 5 0 0110 0v4a3 3 0 11-6 0V7a1 1 0 012 0v4a1 1 0 102 0V7a3 3 0 00-3-3z","clip-rule":"evenodd"})],-1),u={class:"flex-grow font-medium px-2"},c=(0,l.Uk)("Attachments"),p={class:"mt-3 text-center sm:mt-5"},v=["src"];var m=(0,l.aZ)({__name:"CanvassingAttachments",props:{attachments:{type:Array,required:!0}},setup(e){const t=(0,d.iH)(!1),a=(0,d.iH)("");function m(e){"image/jpeg"==e.filetype||"image/png"==e.filetype?(t.value=!0,a.value=`${s.FX}/public-attachments/${e.filename}`):window.open(`${s.FX}/public-attachments/${e.filename}`,"_blank")}return(s,d)=>{const _=(0,l.up)("el-button"),y=(0,l.up)("el-badge"),f=(0,l.up)("el-popover"),x=(0,l.up)("Dialog");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l.Wm)(f,{placement:"bottom",width:"400",trigger:"hover"},{reference:(0,l.w5)((()=>[(0,l.Wm)(y,{value:e.attachments.length,class:"item"},{default:(0,l.w5)((()=>[(0,l.Wm)(_,{disabled:0==e.attachments.length,size:"small",type:"text"},{default:(0,l.w5)((()=>[c])),_:1},8,["disabled"])])),_:1},8,["value"])])),default:(0,l.w5)((()=>[(0,l._)("div",n,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.attachments,((e,t)=>((0,l.wg)(),(0,l.iD)("div",{class:"flex justify-start cursor-pointer text-gray-700 hover:text-orange-400 hover:bg-orange-100 rounded-md px-2 py-2",key:t,onClick:t=>m(e)},[i,(0,l._)("div",u,(0,o.zw)(e.display_name),1)],8,r)))),128))])])),_:1}),(0,l.Wm)(x,{show:t.value,onClose:d[0]||(d[0]=e=>t.value=!1)},{default:(0,l.w5)((()=>[(0,l._)("div",null,[(0,l._)("div",p,[(0,l._)("img",{src:a.value,alt:"",height:"400px"},null,8,v)])])])),_:1},8,["show"])],64)}}});const _=m;var y=_},6210:function(e,t,a){a.d(t,{Z:function(){return v}});var l=a(6252),o=a(2262),s=a(3577),d=a(9737),n=a(7960);const r=(0,l.Uk)("Click to upload"),i={class:"el-upload__tip"},u=(0,l.Uk)("Attach File ");var c=(0,l.aZ)({__name:"AttachFile",props:{action:{type:String,required:!0},fileSize:{type:Number,default:15},data:{type:Object},limit:{type:Number,default:3}},emits:["disable","files"],setup(e,{expose:t,emit:a}){const c=e;t({sliceAttachments:k,submitUpload:h});const p=(0,o.iH)(null),v=(0,o.iH)([]),m=(0,o.iH)([]),_=(0,o.iH)(!1),y=(0,l.Fl)((()=>({Authorization:`Bearer ${(0,n.LP)()}`})));function f(e){_.value=!0,a("disable",!0);const t=e.size/1024/1024<c.fileSize;return t||(d.T.alert("Document size can not exceed "+c.fileSize+"MB!"),_.value=!1,a("disable",!0)),t}function x(e,t){v.value=t.slice(-3);const a=m.value.filter((t=>t.crmid!==e.response.crmid));m.value=a}function b(){d.T.alert("File limit exceeded. 3 files attachment only.")}function g(e){d.T.alert(e),_.value=!1,a("disable",!1)}function w(e){m.value.push(e),_.value=!1,a("disable",!1),a("files",m.value)}function k(){v.value=[],m.value=[],p.value?.clearFiles()}function h(){_.value=!0,p.value?.submit()}return(t,a)=>{const d=(0,l.up)("el-button"),n=(0,l.up)("el-upload"),c=(0,l.up)("el-badge"),v=(0,l.up)("el-popover");return(0,l.wg)(),(0,l.j4)(v,{placement:"top",width:"400",trigger:"click"},{reference:(0,l.w5)((()=>[(0,l.Wm)(c,{value:m.value.length,class:"item"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{type:"default"},{default:(0,l.w5)((()=>[u])),_:1})])),_:1},8,["value"])])),default:(0,l.w5)((()=>[(0,l.Wm)(n,{class:"upload-demo",data:e.data,action:e.action,limit:e.limit,ref_key:"upload",ref:p,"before-upload":f,"on-remove":x,"on-exceed":b,headers:(0,o.SU)(y),"on-error":g,"on-success":w,"auto-upload":!0},{tip:(0,l.w5)((()=>[(0,l._)("div",i," Files with a size less than "+(0,s.zw)(e.fileSize)+"mb. ",1)])),default:(0,l.w5)((()=>[(0,l.Wm)(d,{loading:_.value,type:"primary"},{default:(0,l.w5)((()=>[r])),_:1},8,["loading"])])),_:1},8,["data","action","limit","headers"])])),_:1})}}});const p=c;var v=p},6332:function(e,t,a){a.d(t,{Z:function(){return m}});var l=a(6252),o=a(3577),s=a(6210);const d={class:"z-30 fixed w-full bottom-0 px-2 items-center md:rounded-lg bg-white border-t md:hidden"},n={class:"flex items-center justify-between border-gray-200 bg-white px-4 py-3 sm:px-6","aria-label":"Pagination"},r={class:"flex flex-1 justify-between sm:justify-end space-x-2"},i=(0,l.Uk)("Cancel"),u=(0,l.Uk)("Decline"),c=(0,l.Uk)("Edit");var p=(0,l.aZ)({__name:"MobileAction",props:{loading:{type:Boolean,default:!1},attachFile:{type:Boolean,default:!1},cancelButton:{type:Boolean,default:!1},editButton:{type:Boolean,default:!1},rejectButton:{type:Boolean,default:!1},disableRejectButton:{type:Boolean,default:!1},disableSubmitButton:{type:Boolean,default:!1},submitLabel:{type:String,default:"Submit"},submitButton:{type:Boolean,default:!0},action:{type:String},fileSize:{type:Number,default:15},data:{type:Object},limit:{type:Number,default:3}},emits:["cancel","submit","files","edit","reject"],setup(e,{emit:t}){return(a,p)=>{const v=(0,l.up)("el-button");return(0,l.wg)(),(0,l.iD)("div",d,[(0,l._)("nav",n,[(0,l._)("div",r,[e.attachFile&&e.action?((0,l.wg)(),(0,l.j4)(s.Z,{key:0,action:e.action,"file-size":e.fileSize,data:e.data,limit:e.limit,onFiles:p[0]||(p[0]=e=>t("files"))},null,8,["action","file-size","data","limit"])):(0,l.kq)("",!0),e.cancelButton?((0,l.wg)(),(0,l.j4)(v,{key:1,class:"w-full",onClick:p[1]||(p[1]=e=>t("cancel"))},{default:(0,l.w5)((()=>[i])),_:1})):(0,l.kq)("",!0),e.rejectButton?((0,l.wg)(),(0,l.j4)(v,{key:2,type:"danger",disable:e.disableRejectButton,class:"w-full",onClick:p[2]||(p[2]=e=>t("reject"))},{default:(0,l.w5)((()=>[u])),_:1},8,["disable"])):(0,l.kq)("",!0),e.submitButton?((0,l.wg)(),(0,l.j4)(v,{key:3,disable:e.disableSubmitButton,type:"primary",loading:e.loading,class:"w-full",onClick:p[3]||(p[3]=e=>t("submit"))},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.submitLabel),1)])),_:1},8,["disable","loading"])):(0,l.kq)("",!0),e.editButton?((0,l.wg)(),(0,l.j4)(v,{key:4,type:"primary",loading:e.loading,class:"w-full",onClick:p[4]||(p[4]=e=>t("edit"))},{default:(0,l.w5)((()=>[c])),_:1},8,["loading"])):(0,l.kq)("",!0)])])])}}});const v=p;var m=v},3025:function(e,t,a){a.r(t),a.d(t,{default:function(){return Je}});var l=a(6252),o=a(3577),s=a(2262),d=a(5953),n=a(5721),r=a(6080),i=a(6210),u=a(7700),c=a(9737),p=a(6332),v=a(2201);const m={class:"mt-8"},_={class:"mx-auto w-full"},y={class:"mt-2 flex flex-col"},f={class:"min-w-full overflow-hidden overflow-x-auto align-middle border-gray-300 sm:rounded-md"},x={class:"min-w-full divide divide-gray-200"},b=(0,l._)("thead",{class:"bg-gray-50"},[(0,l._)("tr",null,[(0,l._)("th",{class:"p-3 text-xs font-semibold text-gray-900 text-center border",colspan:"2"}," Item "),(0,l._)("th",{class:"p-3 text-xs font-semibold text-gray-900 text-center border"}," Qty "),(0,l._)("th",{class:"p-3 text-xs font-semibold text-gray-900 text-center border"}," UOM "),(0,l._)("th",{class:"p-3 text-xs font-semibold text-gray-900 text-center border"}," Unit Cost (Vat-ex) "),(0,l._)("th",{class:"p-3 text-xs font-semibold text-gray-900 text-center border"}," Total Cost "),(0,l._)("th",{class:"p-3 text-xs font-semibold text-gray-900 text-center border"}),(0,l._)("th",{class:"p-3 text-xs font-semibold text-gray-900 text-center border"})])],-1),g={class:"divide-y divide-gray-200 bg-white"},w={class:"p-2 text-xs text-gray-500 border"},k={class:"p-2 text-xs text-gray-500 border",style:{"min-width":"350px"}},h={class:"text-pumpkin font-semibold"},U={class:"text-gray-500"},z=(0,l.Uk)(" Brand: "),V={class:"font-semibold text-gray-800"},j={class:"text-gray-500"},C=(0,l.Uk)(" Specifications: "),q={class:"font-semibold text-gray-800"},A={class:"p-2 text-xs text-gray-500 border text-center font-semibold",style:{"min-width":"70px"}},S={class:"p-2 text-xs text-gray-500 border text-center font-semibold",style:{"min-width":"70px"}},B={class:"p-2 text-xs text-gray-500 border",style:{"min-width":"150px"}},P={class:"p-2 text-xs text-gray-500 border text-center font-semibold",style:{"min-width":"130px"}},W={class:"p-2 text-xs text-gray-500 border",style:{"min-width":"80px"}},D={class:"p-2 text-xs text-gray-500 border"},F=(0,l.Uk)("Add Offer/Proposal"),N={class:"p-2 text-xs text-gray-500 border",colspan:"9"},H={class:"text-pumpkin ml-3 font-semibold"},T={class:"px-3"},$={class:"table-auto border-collapse w-full text-gray-700 border-b border-r border-l"},Z={class:"py-20"},E=(0,l._)("p",{class:"uppercase font-semibold mb-2"}," Item Name ",-1),R=(0,l._)("p",{class:"uppercase font-semibold mb-2"}," Brand ",-1),O=(0,l._)("p",{class:"uppercase font-semibold mb-2"}," Unit Cost (Vat-ex) ",-1),Y=(0,l._)("p",{class:"uppercase font-semibold mb-2"}," Total ",-1),X={key:0},K={class:"flex flex-col items-center"},Q=(0,l.Uk)("Remove"),I={class:"border-b border-gray-200 py-20"},M=(0,l._)("p",{class:"uppercase font-semibold mb-2"}," Specification ",-1),L={colspan:"4",class:"p-2 text-xs text-gray-900 border font-semibold"},G=(0,l.Uk)(" Net Total "),J={key:0},ee=(0,l._)("td",{class:"p-2 text-xs text-gray-900 border font-semibold"},null,-1),te={class:"p-2 text-xs text-gray-500 border font-semibold text-center"},ae=(0,l._)("td",{class:"p-2 text-xs text-gray-500 border font-semibold",colspan:"3"},null,-1),le=(0,l._)("td",{colspan:"4",class:"p-2 text-xs text-gray-900 border font-semibold"}," Discount Percentage & Price ",-1),oe={class:"p-2 text-xs text-gray-500 border font-semibold text-center"},se={class:"p-2 text-xs text-gray-500 border font-semibold"},de=(0,l._)("td",{class:"p-2 text-xs text-gray-500 border font-semibold",colspan:"3"},null,-1),ne=(0,l._)("td",{class:"p-2 text-xs text-gray-900 border font-semibold"}," Warranty ",-1),re={colspan:8,class:"border p-2"},ie=(0,l._)("td",{class:"p-2 text-xs text-gray-900 border font-semibold"}," Availability ",-1),ue=["colspan"],ce=(0,l._)("td",{class:"p-2 text-xs text-gray-900 border font-semibold"}," Delivery Leadtime ",-1),pe=["colspan"],ve=(0,l._)("td",{class:"p-2 text-xs text-gray-900 border font-semibold"}," Payment Terms ",-1),me=["colspan"],_e=(0,l._)("td",{class:"p-2 text-xs text-gray-900 border font-semibold"}," Remarks ",-1),ye=["colspan"],fe=(0,l._)("td",{class:"p-2 text-xs text-gray-900 border font-semibold"}," KMC Procurement Remarks ",-1),xe={class:"p-2 text-xs text-gray-500 border font-semibold",colspan:"8"},be={class:"list-disc px-3"},ge={class:"md:flex items-center justify-end border-t border-gray-200 bg-white px-4 py-3 sm:px-6 hidden","aria-label":"Pagination"},we={class:"flex flex-1 justify-between sm:justify-end"},ke=(0,l.Uk)("Cancel"),he=(0,l.Uk)("Save"),Ue=(0,l.Uk)("Edit");var ze=(0,l.aZ)({__name:"CanvassingSheet",props:{details:{type:Object,required:!0}},emits:["editVendor","addProposal","editProposal","removeProposal","editVendorTotal","reload"],setup(e,{emit:t}){const a=e,ze=(0,v.yj)(),Ve=(0,l.Fl)((()=>ze.params.id)),je=(0,l.Fl)((()=>{let e=0;return a.details.products.forEach((t=>{"For Approval"==t.vendors.status?e+=t.vendors.fa_cost*t.quantity:e+=t.vendors.cost*t.quantity})),e})),Ce=(0,l.Fl)((()=>{let e=0;return e+=je.value,a.details.products.forEach((t=>{1==t.vendors.vat_ex&&(e-=t.vendors.cost*t.quantity)})),e})),qe=(0,l.Fl)((()=>1==a.details.vendor_total.vat?.12*Ce.value:0)),Ae=(0,l.Fl)((()=>je.value+qe.value)),Se=(0,l.Fl)((()=>{let e=0;return e=1==a.details.vendor_total.for_approval?(Ae.value-a.details.vendor_total.fa_price_discount)/Ae.value*100:(Ae.value-a.details.vendor_total.price_discount)/Ae.value*100,e?e<=0?0:e.toFixed(2):0})),Be=(0,s.iH)(!1),Pe=(0,s.iH)(null),We=(0,s.iH)(!1),De=r.T5+`/public/canvassing/upload-attachment/${Ve.value}`,Fe=r.T5+`/public/canvassing/upload-attachment/${Ve.value}?scope=counter`;function Ne(e){t("editVendor",e)}function He(e){t("editProposal",e)}function Te(e){t("removeProposal",e)}function $e(e){t("editVendorTotal",e)}function Ze(){We.value=!1,t("reload")}async function Ee(){const e={vendors:[],vendor_total:a.details.vendor_total};a.details.products.map((t=>{e.vendors.push({id:t.vendors.id,vtiger_canvassingproduct_id:t.vendors.vtiger_canvassingproduct_id,vendor_id:t.vendors.vendor_id,cost:t.vendors.cost,total:t.vendors.total,available:t.vendors.available,is_existing:t.vendors.is_existing,counter:t.counter,vat_ex:t.vendors.vat_ex})})),Be.value=!0,await u.o.updateQuotationDetails(e,Ve.value).then((()=>{(0,c.T)({type:"success",message:"Thank you for submitting your proposal. You will be notified on its progress once finalized."}),Be.value=!1,We.value=!1,t("reload")}))}return(a,r)=>{const u=(0,l.up)("el-checkbox"),c=(0,l.up)("el-input"),v=(0,l.up)("el-button"),ze=(0,l.up)("el-collapse-item"),Ve=(0,l.up)("el-collapse"),je=(0,l.up)("el-affix");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",m,[(0,l._)("div",_,[(0,l._)("div",y,[(0,l._)("div",f,[(0,l._)("table",x,[b,(0,l._)("tbody",g,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.details.products,((a,p)=>((0,l.wg)(),(0,l.iD)(l.HY,{key:p},[(0,l._)("tr",null,[(0,l._)("td",w,[(0,l.Wm)(u,{class:"w-full",disabled:!We.value||!a.editable||a.vendors.approved_counter>0,"model-value":1==a.vendors.available,"onUpdate:modelValue":e=>(Ne({id:a.id,key:"available",value:e,type:"boolean"}),Ne({id:a.id,key:"cost",value:1==a.vendors.available?a.vendors.cost:0,type:"number"})),label:"Available",border:""},null,8,["disabled","model-value","onUpdate:modelValue"])]),(0,l._)("td",k,[(0,l._)("p",h,(0,o.zw)(a.item_name),1),(0,l._)("p",U,[z,(0,l._)("span",V,(0,o.zw)(a.brand),1)]),(0,l._)("p",j,[C,(0,l._)("span",q,(0,o.zw)(a.specifications),1)])]),(0,l._)("td",A,(0,o.zw)(a.quantity),1),(0,l._)("td",S,(0,o.zw)(a.uom),1),(0,l._)("td",B,[(0,l.Wm)(c,{readonly:!We.value||!a.editable||a.vendors.approved_counter>0,disabled:0==a.vendors.available,"model-value":We.value&&"Approved"!==a.vendors.status&&"Renegotiate-Pending"!==a.vendors.status||"For Approval"==a.vendors.status||a.vendors.approved_counter>0?"For Approval"==a.vendors.status?a.vendors.fa_cost:a.vendors.cost:"For Approval"==a.vendors.status?(0,s.SU)(d.dN)(a.vendors.fa_cost,e.details.vendor_total.currency):(0,s.SU)(d.dN)(a.vendors.cost,e.details.vendor_total.currency),"onUpdate:modelValue":e=>Ne({id:a.id,key:"cost",value:e,type:"number"})},null,8,["readonly","disabled","model-value","onUpdate:modelValue"])]),(0,l._)("td",P,(0,o.zw)("For Approval"==a.vendors.status?(0,s.SU)(d.dN)(a.vendors.fa_cost*a.quantity,e.details.vendor_total.currency):(0,s.SU)(d.dN)(a.vendors.cost*a.quantity,e.details.vendor_total.currency)),1),(0,l._)("td",W,[(0,l.Wm)(n.Z,{attachments:a.attachments},null,8,["attachments"]),(0,l.Wm)(i.Z,{limit:20,action:De,data:{id:a.vendors.id}},null,8,["data"])]),(0,l._)("td",D,[(0,l.Wm)(v,{disabled:!We.value||!a.editable,type:"primary",class:"w-full",onClick:e=>{t("addProposal",a.id),Pe.value=p}},{default:(0,l.w5)((()=>[F])),_:2},1032,["disabled","onClick"])])]),(0,l._)("tr",null,[(0,l._)("td",N,[(0,l.Wm)(Ve,{modelValue:Pe.value,"onUpdate:modelValue":r[0]||(r[0]=e=>Pe.value=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(ze,{name:p,disabled:0==a.counter.length},{title:(0,l.w5)((()=>[(0,l._)("span",H,(0,o.zw)(a.counter.length)+" Other Proposals for "+(0,o.zw)(a.item_name),1)])),default:(0,l.w5)((()=>[(0,l._)("div",T,[(0,l._)("table",$,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(a.counter,((t,r)=>((0,l.wg)(),(0,l.iD)(l.HY,{key:r},[(0,l._)("tr",Z,[(0,l._)("td",{class:(0,o.C_)(["px-2 py-2 border-t text-xs",{"bg-orange-100":a.vendors.approved_counter==t.id}]),colspan:"2"},[E,a.vendors&&t.id?((0,l.wg)(),(0,l.j4)(c,{key:0,readonly:!We.value||null!=a.vendors.approved_counter||"Approved"==a.vendors.status,size:"small",placeholder:"Item Name","model-value":t.item_name,"onUpdate:modelValue":e=>He({id:a.id,index:r,key:"item_name",value:e})},null,8,["readonly","model-value","onUpdate:modelValue"])):((0,l.wg)(),(0,l.j4)(c,{key:1,readonly:!We.value,size:"small",placeholder:"Item Name","model-value":t.item_name,"onUpdate:modelValue":e=>He({id:a.id,index:r,key:"item_name",value:e})},null,8,["readonly","model-value","onUpdate:modelValue"]))],2),(0,l._)("td",{class:(0,o.C_)(["px-2 py-2 border-t text-xs",{"bg-orange-100":a.vendors.approved_counter==t.id}]),colspan:"2"},[R,a.vendors&&t.id?((0,l.wg)(),(0,l.j4)(c,{key:0,readonly:!We.value||null!=a.vendors.approved_counter||"Approved"==a.vendors.status,size:"small",placeholder:"Brand","model-value":t.brand,"onUpdate:modelValue":e=>He({id:a.id,index:r,key:"brand",value:e})},null,8,["readonly","model-value","onUpdate:modelValue"])):((0,l.wg)(),(0,l.j4)(c,{key:1,readonly:!We.value,size:"small",placeholder:"Brand","model-value":t.brand,"onUpdate:modelValue":e=>He({id:a.id,index:r,key:"brand",value:e})},null,8,["readonly","model-value","onUpdate:modelValue"]))],2),(0,l._)("td",{class:(0,o.C_)(["px-2 py-2 border-t text-xs",{"bg-orange-100":a.vendors.approved_counter==t.id}])},[O,a.vendors&&t.id?((0,l.wg)(),(0,l.j4)(c,{key:0,readonly:!We.value||null!=a.vendors.approved_counter||!a.editable,size:"small",placeholder:"Cost","model-value":!We.value||null!=a.vendors.approved_counter&&"Renegotiate"!==a.vendors.status||"Approved"==a.vendors.status?(0,s.SU)(d.dN)(t.cost,e.details.vendor_total.currency):t.cost,"onUpdate:modelValue":e=>He({id:a.id,index:r,key:"cost",value:e})},null,8,["readonly","model-value","onUpdate:modelValue"])):((0,l.wg)(),(0,l.j4)(c,{key:1,readonly:!We.value,size:"small",placeholder:"Cost","model-value":We.value?t.cost:(0,s.SU)(d.dN)(t.cost,e.details.vendor_total.currency),"onUpdate:modelValue":e=>He({id:a.id,index:r,key:"cost",value:e})},null,8,["readonly","model-value","onUpdate:modelValue"]))],2),(0,l._)("td",{class:(0,o.C_)(["px-2 py-2 border-t border-r text-xs",{"bg-orange-100":a.vendors.approved_counter==t.id}])},[Y,(0,l.Uk)(" "+(0,o.zw)((0,s.SU)(d.dN)(t.cost*a.quantity,e.details.vendor_total.currency)),1)],2),(0,l._)("td",{class:(0,o.C_)(["px-2 py-2 border text-xs",{"bg-orange-100":a.vendors.approved_counter==t.id}]),rowspan:"2"},[t.id?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("p",X," You can attach file after saving. ")),(0,l._)("div",K,[t.id?((0,l.wg)(),(0,l.j4)(n.Z,{key:0,attachments:t.attachments},null,8,["attachments"])):(0,l.kq)("",!0),t.id?((0,l.wg)(),(0,l.j4)(i.Z,{key:1,limit:20,action:Fe,data:{id:t.id}},null,8,["data"])):(0,l.kq)("",!0)])],2),(0,l._)("td",{class:(0,o.C_)(["px-2 py-2 border text-xs",{"bg-orange-100":a.vendors.approved_counter==t.id}]),rowspan:"2"},[(0,l.Wm)(v,{disabled:!We.value||a.vendors.approved_counter==t.id||!a.editable,type:"default",size:"small",class:"w-full",onClick:e=>Te({id:a.id,index:r})},{default:(0,l.w5)((()=>[Q])),_:2},1032,["disabled","onClick"])],2)]),(0,l._)("tr",I,[(0,l._)("td",{class:(0,o.C_)(["px-2 py-2 border-b text-xs",{"bg-orange-100":a.vendors.approved_counter==t.id}]),colspan:"6"},[M,a.vendors&&t.id?((0,l.wg)(),(0,l.j4)(c,{key:0,readonly:!We.value,type:"textarea",rows:3,placeholder:"Please input specifications","model-value":t.specifications,"onUpdate:modelValue":e=>He({id:a.id,index:r,key:"specifications",value:e})},null,8,["readonly","model-value","onUpdate:modelValue"])):((0,l.wg)(),(0,l.j4)(c,{key:1,readonly:!We.value,type:"textarea",rows:2,placeholder:"Please input specifications","model-value":t.specifications,"onUpdate:modelValue":e=>He({id:a.id,index:r,key:"specifications",value:e})},null,8,["readonly","model-value","onUpdate:modelValue"]))],2)])],64)))),128))])])])),_:2},1032,["name","disabled"])])),_:2},1032,["modelValue"])])])],64)))),128)),(0,l._)("tr",null,[(0,l._)("td",L,[G,1==e.details.vendor_total.vat?((0,l.wg)(),(0,l.iD)("span",J,"(w/ 12% Vat)")):(0,l.kq)("",!0)]),ee,(0,l._)("td",te,(0,o.zw)((0,s.SU)(d.dN)((0,s.SU)(Ae),e.details.vendor_total.currency)),1),ae]),(0,l._)("tr",null,[le,(0,l._)("td",oe,(0,o.zw)((0,s.SU)(Se))+" % ",1),(0,l._)("td",se,[(0,l.Wm)(c,{readonly:!We.value,"model-value":We.value?1==e.details.vendor_total.discount_approval?e.details.vendor_total.fa_price_discount:e.details.vendor_total.price_discount:(0,s.SU)(d.dN)(1==e.details.vendor_total.discount_approval?e.details.vendor_total.fa_price_discount:e.details.vendor_total.price_discount,e.details.vendor_total.currency),"onUpdate:modelValue":r[1]||(r[1]=t=>$e({id:e.details.vendor_total.vendor_id,key:"price_discount",value:t,type:"number"}))},null,8,["readonly","model-value"])]),de]),(0,l._)("tr",null,[ne,(0,l._)("td",re,[(0,l.Wm)(c,{readonly:!We.value,type:"textarea",rows:2,placeholder:"Please input","model-value":1==e.details.vendor_total.for_approval?e.details.vendor_total.fa_warranty:e.details.vendor_total.warranty,"onUpdate:modelValue":r[2]||(r[2]=t=>$e({id:e.details.vendor_total.vendor_id,key:"warranty",value:t,type:"string"}))},null,8,["readonly","model-value"])])]),(0,l._)("tr",null,[ie,(0,l._)("td",{class:"border p-2",colspan:e.details.vendor_total.for_approval?7:8},[(0,l.Wm)(c,{readonly:!We.value,type:"textarea",rows:2,placeholder:"Please input","model-value":1==e.details.vendor_total.for_approval?e.details.vendor_total.fa_availability:e.details.vendor_total.availability,"onUpdate:modelValue":r[3]||(r[3]=t=>$e({id:e.details.vendor_total.vendor_id,key:"availability",value:t,type:"string"}))},null,8,["readonly","model-value"])],8,ue)]),(0,l._)("tr",null,[ce,(0,l._)("td",{class:"border p-2",colspan:e.details.vendor_total.for_approval?7:8},[(0,l.Wm)(c,{readonly:!We.value,type:"textarea",rows:2,placeholder:"Please input","model-value":1==e.details.vendor_total.for_approval?e.details.vendor_total.fa_leadtime:e.details.vendor_total.lead_time,"onUpdate:modelValue":r[4]||(r[4]=t=>$e({id:e.details.vendor_total.vendor_id,key:"lead_time",value:t,type:"string"}))},null,8,["readonly","model-value"])],8,pe)]),(0,l._)("tr",null,[ve,(0,l._)("td",{class:"border p-2",colspan:e.details.vendor_total.for_approval?7:8},[(0,l.Wm)(c,{readonly:!We.value,type:"textarea",rows:2,placeholder:"Please input","model-value":1==e.details.vendor_total.for_approval?e.details.vendor_total.fa_terms:e.details.vendor_total.terms,"onUpdate:modelValue":r[5]||(r[5]=t=>$e({id:e.details.vendor_total.vendor_id,key:"terms",value:t,type:"string"}))},null,8,["readonly","model-value"])],8,me)]),(0,l._)("tr",null,[_e,(0,l._)("td",{class:"border p-2",colspan:e.details.vendor_total.for_approval?7:8},[(0,l.Wm)(c,{readonly:!We.value,type:"textarea",rows:2,placeholder:"Please input","model-value":1==e.details.vendor_total.for_approval?e.details.vendor_total.fa_remarks:e.details.vendor_total.remarks,"onUpdate:modelValue":r[6]||(r[6]=t=>$e({id:e.details.vendor_total.vendor_id,key:"remarks",value:t,type:"string"}))},null,8,["readonly","model-value"])],8,ye)]),(0,l._)("tr",null,[fe,(0,l._)("td",xe,[(0,l._)("ul",be,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.details.vendor_total.recommendations.filter((e=>"vendor"==e.receiver)),((e,t)=>((0,l.wg)(),(0,l.iD)("li",{key:t},(0,o.zw)(e.description),1)))),128))])])])])]),(0,l._)("nav",ge,[(0,l._)("div",we,[(0,l.Wm)(je,{position:"bottom",offset:20},{default:(0,l.w5)((()=>[We.value?((0,l.wg)(),(0,l.j4)(v,{key:0,type:"default",onClick:Ze},{default:(0,l.w5)((()=>[ke])),_:1})):(0,l.kq)("",!0),We.value?((0,l.wg)(),(0,l.j4)(v,{key:1,type:"primary",onClick:Ee,loading:Be.value},{default:(0,l.w5)((()=>[he])),_:1},8,["loading"])):(0,l.kq)("",!0),We.value||"Open"!=e.details.cf_3497&&"Reopen"!=e.details.cf_3497?(0,l.kq)("",!0):((0,l.wg)(),(0,l.j4)(v,{key:2,type:"primary",onClick:r[7]||(r[7]=e=>We.value=!0)},{default:(0,l.w5)((()=>[Ue])),_:1}))])),_:1})])])])])])]),(0,l.Wm)(p.Z,{"edit-button":!We.value&&("Open"==e.details.cf_3497||"Reopen"==e.details.cf_3497),"submit-button":We.value,"cancel-button":We.value,onEdit:r[8]||(r[8]=e=>We.value=!0),onCancel:r[9]||(r[9]=e=>We.value=!1),loading:Be.value,onSubmit:Ee},null,8,["edit-button","submit-button","cancel-button","loading"])],64)}}});const Ve=ze;var je=Ve;const Ce={class:"min-h-full pb-20 h-full"},qe={class:"p-0 md:pt-10 md:py-10 2xl:px-8 max-w-7xl mx-auto flex flex-col justify-start"},Ae={class:"flex flex-1 flex-col"},Se={class:"flex-1 pb-8"},Be={class:"bg-white border-gray-300 rounded-md"},Pe={class:"px-4 sm:px-6 lg:mx-auto w-full"},We={class:"py-6 md:flex md:items-center md:justify-between lg:border-gray-200"},De={class:"min-w-0 flex-1"},Fe={class:"flex items-center"},Ne={class:"flex items-center"},He={class:"ml-3 text-2xl font-bold leading-7 text-gray-900 sm:truncate sm:leading-9"},Te={class:"mt-6 flex flex-col sm:ml-3 sm:mt-1 sm:flex-row sm:flex-wrap"},$e=(0,l._)("dt",{class:"flex items-center text-sm font-medium capitalize text-gray-500 sm:mr-6"}," Control ID: ",-1),Ze={class:"flex items-center text-sm font-semibold capitalize text-gray-800 sm:mr-6"},Ee={class:"mt-6 flex flex-col sm:ml-3 sm:mt-1 sm:flex-row sm:flex-wrap"},Re=(0,l._)("dt",{class:"flex items-center text-sm font-medium capitalize text-gray-500 sm:mr-6"}," Project Name: ",-1),Oe={class:"flex items-center text-sm font-semibold capitalize text-gray-800 sm:mr-6"},Ye={class:"mt-6 flex flex-col sm:ml-3 sm:mt-1 sm:flex-row sm:flex-wrap"},Xe=(0,l._)("dt",{class:"flex items-center text-sm font-medium capitalize text-gray-500 sm:mr-6"}," Entity Name: ",-1),Ke={class:"flex items-center text-sm font-semibold capitalize text-gray-800 sm:mr-6"},Qe={class:"mt-6 flex flex-col sm:ml-3 sm:mt-1 sm:flex-row sm:flex-wrap"},Ie=(0,l._)("dt",{class:"flex items-center text-sm font-medium capitalize text-gray-500 sm:mr-6"}," Entity Address: ",-1),Me={class:"flex items-center text-sm font-semibold capitalize text-gray-800 sm:mr-6"};var Le=(0,l.aZ)({__name:"VendorQuotation",setup(e){const t=(0,s.iH)(null),a=(0,v.yj)(),n=(0,l.Fl)((()=>a.params.id));async function r(){await u.o.quotationViewed(n.value,"vendor")}async function i(){await u.o.getQuotationDetails(n.value).then((e=>{t.value=e}))}function p(e){const a=t.value?.products.find((t=>t.id==e));a&&a.counter.push({product_id:0,specifications:"",item_name:"",brand:"",canvassingproduct_id:e,cost:0})}function m(e){const a=t.value?.products.find((t=>t.id==e.id));a&&("number"==e.type?(0,d.kE)(e.value)?a.vendors[e.key]=e.value:a.vendors[e.key]="":a.vendors[e.key]=e.value)}function _(e){const a=t.value?.products.find((t=>t.id==e.id));a&&(a.counter[e.index][e.key]=e.value)}function y(e){c.T.confirm("Are you sure you want to delete this item? This action cannot be undone. Click 'OK' to delete or 'Cancel' to keep the item.","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((()=>{const a=t.value?.products.find((t=>t.id==e.id));a&&a.counter.splice(e.index,1)}))}function f(e){t.value&&("number"==e.type?(0,d.kE)(e.value)?t.value.vendor_total[e.key]=e.value:t.value.vendor_total[e.key]="":t.value.vendor_total[e.key]=e.value)}return(0,l.bv)((()=>{r(),i()})),(e,a)=>((0,l.wg)(),(0,l.iD)("div",Ce,[(0,l._)("div",qe,[(0,l._)("div",Ae,[(0,l._)("div",Se,[(0,l._)("div",Be,[(0,l._)("div",Pe,[(0,l._)("div",We,[(0,l._)("div",De,[(0,l._)("div",Fe,[(0,l._)("div",null,[(0,l._)("div",Ne,[(0,l._)("h1",He,(0,o.zw)(t.value?.vendor_total.vendorname),1)]),(0,l._)("dl",Te,[$e,(0,l._)("dd",Ze,(0,o.zw)(t.value?.canvassingtoolno),1)]),(0,l._)("dl",Ee,[Re,(0,l._)("dd",Oe,(0,o.zw)(t.value?.name),1)]),(0,l._)("dl",Ye,[Xe,(0,l._)("dd",Ke,(0,o.zw)(t.value?.cf_3798),1)]),(0,l._)("dl",Qe,[Ie,(0,l._)("dd",Me,(0,o.zw)(t.value?.cf_3800),1)])])])])])])]),t.value?((0,l.wg)(),(0,l.j4)(je,{key:0,details:t.value,onAddProposal:p,onEditVendor:m,onEditProposal:_,onRemoveProposal:y,onEditVendorTotal:f},null,8,["details"])):(0,l.kq)("",!0)])])])]))}});const Ge=Le;var Je=Ge},7700:function(e,t,a){a.d(t,{o:function(){return o}});var l=a(5425);const o={async quotationViewed(e,t){l.s.setXAuth();const a=await l.s.get(`/public/canvassing/view/${t}`,e);return a.data},async approveClient(e){const t=await l.s.get(`/canvassing/client-approved/${e}`);return t.data},async getQuotationDetails(e){l.s.setXAuth();const t=await l.s.get("/public/canvassing",e);return t.data},async updateQuotationDetails(e,t){l.s.setXAuth();const a=await l.s.put(`/public/canvassing/update-quotation/${t}`,e);return a.data},async getRequesterQuotationDetails(e){l.s.setXAuth();const t=await l.s.query(`/canvassing/${e}`,{approval:!0});return t.data},async decryptSession(e){l.s.setXAuth();const t=await l.s.get("/canvassing/decrypt",e);return t.data},async awardItem(e){l.s.setXAuth();const t=await l.s.get(`/canvassing-approve/item/vendor/${e}?approver=requester`);return t.data},async unApproveCounter(e){l.s.setXAuth();const t=await l.s.get(`/canvassing-unapprove/item/${e}?approver=requester`);return t.data},async approveCounter(e){const t=await l.s.get(`/canvassing-approve/item/${e}?approver=requester`);return t.data},async addRemarks(e,t,a){const o=await l.s.post(`/canvassing/add-recommendation/${e}`,{recommendation:t,receiver:a});return o.data},async rejectProposal(e,t){const a=await l.s.post(`/canvassing/client-rejected/${e}`,{reason:t});return a.data}}}}]);