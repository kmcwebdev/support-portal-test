(self["webpackChunkvue3_ts_template"]=self["webpackChunkvue3_ts_template"]||[]).push([[6660],{5640:function(e,l,t){const{createElementVNode:a,openBlock:s,createElementBlock:o}=t(9812);e.exports=function(e,l){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[a("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z","clip-rule":"evenodd"})])}},7648:function(e,l,t){const{createElementVNode:a,openBlock:s,createElementBlock:o}=t(9812);e.exports=function(e,l){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[a("path",{"fill-rule":"evenodd",d:"M3.75 12a.75.75 0 01.75-.75h15a.75.75 0 010 1.5h-15a.75.75 0 01-.75-.75z","clip-rule":"evenodd"})])}},485:function(e,l,t){const{createElementVNode:a,openBlock:s,createElementBlock:o}=t(9812);e.exports=function(e,l){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[a("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zM12.75 9a.75.75 0 00-1.5 0v2.25H9a.75.75 0 000 1.5h2.25V15a.75.75 0 001.5 0v-2.25H15a.75.75 0 000-1.5h-2.25V9z","clip-rule":"evenodd"})])}},6210:function(e,l,t){"use strict";t.d(l,{Z:function(){return p}});var a=t(6252),s=t(2262),o=t(3577),r=t(9737),i=t(7960);const n=(0,a.Uk)("Click to upload"),u={class:"el-upload__tip"},m=(0,a.Uk)("Attach File ");var c=(0,a.aZ)({__name:"AttachFile",props:{action:{type:String,required:!0},fileSize:{type:Number,default:15},data:{type:Object},limit:{type:Number,default:3}},emits:["disable","files"],setup(e,{expose:l,emit:t}){const c=e;l({sliceAttachments:h,submitUpload:x});const d=(0,s.iH)(null),p=(0,s.iH)([]),f=(0,s.iH)([]),b=(0,s.iH)(!1),g=(0,a.Fl)((()=>({Authorization:`Bearer ${(0,i.LP)()}`})));function y(e){b.value=!0,t("disable",!0);const l=e.size/1024/1024<c.fileSize;return l||(r.T.alert("Document size can not exceed "+c.fileSize+"MB!"),b.value=!1,t("disable",!0)),l}function w(e,l){p.value=l.slice(-3);const t=f.value.filter((l=>l.crmid!==e.response.crmid));f.value=t}function k(){r.T.alert("File limit exceeded. 3 files attachment only.")}function _(e){r.T.alert(e),b.value=!1,t("disable",!1)}function v(e){f.value.push(e),b.value=!1,t("disable",!1),t("files",f.value)}function h(){p.value=[],f.value=[],d.value?.clearFiles()}function x(){b.value=!0,d.value?.submit()}return(l,t)=>{const r=(0,a.up)("el-button"),i=(0,a.up)("el-upload"),c=(0,a.up)("el-badge"),p=(0,a.up)("el-popover");return(0,a.wg)(),(0,a.j4)(p,{placement:"top",width:"400",trigger:"click"},{reference:(0,a.w5)((()=>[(0,a.Wm)(c,{value:f.value.length,class:"item"},{default:(0,a.w5)((()=>[(0,a.Wm)(r,{type:"default"},{default:(0,a.w5)((()=>[m])),_:1})])),_:1},8,["value"])])),default:(0,a.w5)((()=>[(0,a.Wm)(i,{class:"upload-demo",data:e.data,action:e.action,limit:e.limit,ref_key:"upload",ref:d,"before-upload":y,"on-remove":w,"on-exceed":k,headers:(0,s.SU)(g),"on-error":_,"on-success":v,"auto-upload":!0},{tip:(0,a.w5)((()=>[(0,a._)("div",u," Files with a size less than "+(0,o.zw)(e.fileSize)+"mb. ",1)])),default:(0,a.w5)((()=>[(0,a.Wm)(r,{loading:b.value,type:"primary"},{default:(0,a.w5)((()=>[n])),_:1},8,["loading"])])),_:1},8,["data","action","limit","headers"])])),_:1})}}});const d=c;var p=d},6332:function(e,l,t){"use strict";t.d(l,{Z:function(){return f}});var a=t(6252),s=t(3577),o=t(6210);const r={class:"z-30 fixed w-full bottom-0 px-2 items-center md:rounded-lg bg-white border-t md:hidden"},i={class:"flex items-center justify-between border-gray-200 bg-white px-4 py-3 sm:px-6","aria-label":"Pagination"},n={class:"flex flex-1 justify-between sm:justify-end space-x-2"},u=(0,a.Uk)("Cancel"),m=(0,a.Uk)("Decline"),c=(0,a.Uk)("Edit");var d=(0,a.aZ)({__name:"MobileAction",props:{loading:{type:Boolean,default:!1},attachFile:{type:Boolean,default:!1},cancelButton:{type:Boolean,default:!1},editButton:{type:Boolean,default:!1},rejectButton:{type:Boolean,default:!1},disableRejectButton:{type:Boolean,default:!1},disableSubmitButton:{type:Boolean,default:!1},submitLabel:{type:String,default:"Submit"},submitButton:{type:Boolean,default:!0},action:{type:String},fileSize:{type:Number,default:15},data:{type:Object},limit:{type:Number,default:3}},emits:["cancel","submit","files","edit","reject"],setup(e,{emit:l}){return(t,d)=>{const p=(0,a.up)("el-button");return(0,a.wg)(),(0,a.iD)("div",r,[(0,a._)("nav",i,[(0,a._)("div",n,[e.attachFile&&e.action?((0,a.wg)(),(0,a.j4)(o.Z,{key:0,action:e.action,"file-size":e.fileSize,data:e.data,limit:e.limit,onFiles:d[0]||(d[0]=e=>l("files"))},null,8,["action","file-size","data","limit"])):(0,a.kq)("",!0),e.cancelButton?((0,a.wg)(),(0,a.j4)(p,{key:1,class:"w-full",onClick:d[1]||(d[1]=e=>l("cancel"))},{default:(0,a.w5)((()=>[u])),_:1})):(0,a.kq)("",!0),e.rejectButton?((0,a.wg)(),(0,a.j4)(p,{key:2,type:"danger",disable:e.disableRejectButton,class:"w-full",onClick:d[2]||(d[2]=e=>l("reject"))},{default:(0,a.w5)((()=>[m])),_:1},8,["disable"])):(0,a.kq)("",!0),e.submitButton?((0,a.wg)(),(0,a.j4)(p,{key:3,disable:e.disableSubmitButton,type:"primary",loading:e.loading,class:"w-full",onClick:d[3]||(d[3]=e=>l("submit"))},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(e.submitLabel),1)])),_:1},8,["disable","loading"])):(0,a.kq)("",!0),e.editButton?((0,a.wg)(),(0,a.j4)(p,{key:4,type:"primary",loading:e.loading,class:"w-full",onClick:d[4]||(d[4]=e=>l("edit"))},{default:(0,a.w5)((()=>[c])),_:1},8,["loading"])):(0,a.kq)("",!0)])])])}}});const p=d;var f=p},2202:function(e,l,t){"use strict";t.d(l,{Z:function(){return f}});var a=t(6252),s=t(3577),o=t(9963),r=t(2262),i=t(3824);const n={key:0,class:"flex flex-1"},u={class:"my-auto"},m={class:"text-lg font-barlow font-bold leading-6 text-gray-900 truncate"},c={class:"ml-4 flex items-center lg:ml-6"};var d=(0,a.aZ)({__name:"SubHeader",props:{name:{type:String},subName:{type:String},redirectRoute:{type:String}},setup(e){const l=e,t=(0,r.iH)(!1);return(0,a.bv)((()=>{t.value=!0})),(d,p)=>t.value?((0,a.wg)(),(0,a.j4)(a.lR,{key:0,to:"#testTeleport"},[e.name?((0,a.wg)(),(0,a.iD)("div",n,[(0,a._)("div",u,[(0,a._)("h1",m,(0,s.zw)(l.name),1),e.subName?((0,a.wg)(),(0,a.iD)("a",{key:0,onClick:p[0]||(p[0]=(0,o.iM)((l=>(0,r.SU)(i.Z).push({name:e.redirectRoute})),["prevent"])),class:"md:inline text-secondary text-opacity-40 font-barlow font-bold text-sm uppercase text-gray-600 truncate hover:text-pumpkin cursor-pointer"},(0,s.zw)(e.subName),1)):(0,a.kq)("",!0)])])):(0,a.kq)("",!0),(0,a._)("div",c,[(0,a.WI)(d.$slots,"default")])])):(0,a.kq)("",!0)}});const p=d;var f=p},5598:function(e,l,t){"use strict";t.r(l),t.d(l,{default:function(){return bs}});var a=t(6252),s=t(2202),o=(t(6699),t(2262)),r=t(9963),i=t(3577);const n=[{name:"Gate Pass",query:"gatepass"},{name:"Work Permit",query:"work-permit"},{name:"Temporary Parking",query:"temporary-parking"},{name:"Van Booking",query:"van-booking"},{name:"Visitor Request",query:"visitor-request"},{name:"Access Card",query:"access-card"}];var u=t(3824),m=t(3984),c=t(963),d=t(5953),p=t(9013),f=t(4262),b=t(3882);function g(e){(0,b.Z)(1,arguments);var l=(0,p.Z)(e);return l.setHours(0,0,0,0),l}var y=864e5;function w(e,l){(0,b.Z)(2,arguments);var t=g(e),a=g(l),s=t.getTime()-(0,f.Z)(t),o=a.getTime()-(0,f.Z)(a);return Math.round((s-o)/y)}function k(e,l){var t=e.getFullYear()-l.getFullYear()||e.getMonth()-l.getMonth()||e.getDate()-l.getDate()||e.getHours()-l.getHours()||e.getMinutes()-l.getMinutes()||e.getSeconds()-l.getSeconds()||e.getMilliseconds()-l.getMilliseconds();return t<0?-1:t>0?1:t}function _(e,l){(0,b.Z)(2,arguments);var t=(0,p.Z)(e),a=(0,p.Z)(l),s=k(t,a),o=Math.abs(w(t,a));t.setDate(t.getDate()-s*o);var r=Number(k(t,a)===-s),i=s*(o-r);return 0===i?0:i}const v=[{siteId:210148,maximumDay:1,scope:"GatePass"},{siteId:40047,maximumDay:1,scope:"GatePass"},{siteId:40040,maximumDay:1,scope:"GatePass"},{siteId:210148,maximumDay:7,scope:"WorkingPermit"}];var h=t(9737),x=t(9996),V=t(7648),S=t(485);const W={submitByEmail:[{required:!0,message:"Please input email address",trigger:"blur"},{type:"email",message:"Please input valid email address",trigger:"blur"}],submitByName:[{required:!0,message:"Please input name",trigger:"blur"}],formType:[{required:!0,message:"Please select form type",trigger:"blur"}],type:[{required:!0,message:"Please select service category",trigger:"blur"}],siteID:[{required:!0,message:"Please select site",trigger:"blur"}],floorNo:[{required:!0,message:"Please select floor no.",trigger:"blur"}],personnelName:[{required:!0,message:"Please input personnel name",trigger:"blur"}],personnelAccount:[{required:!0,message:"Please input company",trigger:"blur"}],dateNeeded:[{required:!0,message:"Please select date",trigger:"blur"}],timeFrom:[{required:!0,message:"Please select start time",trigger:"blur"}],timeTo:[{required:!0,message:"Please select end time",trigger:"blur"}],permitApplied:[{required:!0,message:"Please select an item",trigger:"blur"}],scopeofWork:[{required:!0,message:"Please input scope of work",trigger:"blur"}],contractorName:[{required:!0,message:"Please input contractor name",trigger:"blur"}],driversName:[{required:!0,message:"Please input driver's name",trigger:"blur"}],vehicleModel:[{required:!0,message:"Please input vehicle model",trigger:"blur"}],vehicleColor:[{required:!0,message:"Please input vehicle color",trigger:"blur"}],vehiclePlateNumber:[{required:!0,message:"Please input vehicle plate number",trigger:"blur"}],date:[{required:!0,message:"Please select date",trigger:"blur"}],time:[{required:!0,message:"Please select time",trigger:"blur"}],pickUpLocation:[{required:!0,message:"Please input pickup location",trigger:"blur"}],dropOffLocation:[{required:!0,message:"Please input drop-off location",trigger:"blur"}],typeOfRequest:[{required:!0,message:"Please select type of request",trigger:"blur"}],department:[{required:!0,message:"Please select your department",trigger:"blur"}],contactNumber:[{required:!0,message:"Please input your contact number",trigger:"blur"}],dateOfVisit:[{required:!0,message:"Please select date of visit",trigger:"blur"}],contactPerson:[{required:!0,message:"Please input contact person",trigger:"blur"}],purposeOfVisit:[{required:!0,message:"Please input purpose of visit",trigger:"blur"}],designation:[{required:!0,message:"Please input your designation",trigger:"blur"}],typeOfAccess:[{required:!0,message:"Please select type of access",trigger:"blur"}]};var U=t(3724),N=t(6332);const q={class:"mt-3 grid grid-cols-12 gap-x-3 py-3"},B={class:"col-span-12 sm:col-span-12"},D=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Type")],-1),R={class:"col-span-12 sm:col-span-6"},P=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Email address")],-1),I={class:"col-span-12 sm:col-span-6"},C=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Name")],-1),T={class:"col-span-12 sm:col-span-4"},z=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Service Category")],-1),A={class:"col-span-12 sm:col-span-4"},E=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Site")],-1),O={class:"col-span-12 sm:col-span-4"},H=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Floor")],-1),M={class:"col-span-12 sm:col-span-6"},Y=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Carrier Name")],-1),j={class:"col-span-12 sm:col-span-6"},F=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Company / Contractor")],-1),K={class:"col-span-6 sm:col-span-3"},Z=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Date Needed From")],-1),$={class:"col-span-6 sm:col-span-3"},L=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Date Needed To")],-1),G={class:"col-span-6 sm:col-span-3"},X=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("From")],-1),Q={class:"col-span-6 sm:col-span-3"},J=(0,a._)("label",{for:"last_name",class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("To")],-1),ee={class:"col-span-12 sm:col-span-12"},le=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},"Reason",-1),te={class:"col-span-12 sm:col-span-12"},ae=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},"Emails to Notify",-1),se=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Description")],-1),oe=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Qty")],-1),re=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Unit")],-1),ie=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},"Remarks",-1),ne=(0,a._)("label",{class:"md:block text-sm font-semibold text-gray-700 mb-1.5 text-center hidden"},"Remove",-1),ue={class:"md:flex hidden"},me={class:"flex md:hidden"},ce={class:"flex justify-end py-4"},de=(0,a.Uk)(" Add Item"),pe={class:"mt-4 py-4 md:flex justify-end hidden"},fe=(0,a.Uk)(" Submit ");var be=(0,a.aZ)({__name:"Gatepass",props:{sites:{type:Array,required:!0}},setup(e){const l=e,t=(0,o.iH)(null),s=(0,o.qj)({submitByID:1,formScope:"Client",submitByEmail:"",submitByName:"",siteID:40041,formType:"Gate Pass",type:[],floorNo:[],dateNeeded:(0,d.Iz)("yyyy-MM-dd"),dateNeededTo:(0,d.Iz)("yyyy-MM-dd"),timeFrom:"",timeTo:"",personnelName:"",personnelAccount:"",reason:"",emailToNotify:[],particulars:[{quantity:0,description:"",remarks:"",uom:"pcs."},{quantity:0,description:"",remarks:"",uom:"pcs."}]}),r=(0,o.iH)(!1),i=(0,o.iH)(!1),n=(0,a.Fl)((()=>{const e=l.sites.find((e=>e.siteid==s.siteID));return e?e.floors:[]})),p=(0,a.Fl)((()=>{const e=v.find((e=>e.siteId==s.siteID&&"GatePass"==e.scope));return!(!e||1!=e.maximumDay)}));async function f(e){r.value=!0,await m.g.fetchDetailsByEmail(e).then((e=>{e&&e.contactid&&(s.submitByName=`${e.firstname} ${e.lastname}`)})),r.value=!1}function b(e){return 40045==s.siteID&&(!s.type.includes(e)&&s.type.length>0)}function g(e){h.T.confirm("Are you sure you want to delete this item? This action cannot be undone. Click 'OK' to delete or 'Cancel' to keep the item.","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((()=>{if(0==e)return!1;s.particulars.splice(e,1)}))}function y(){s.particulars.push({quantity:0,description:"",remarks:"",uom:"pcs."})}async function w(){await(t.value?.validate().then((async()=>{i.value=!0,await U.G.submitGatepass(s).then((e=>{u.Z.push({name:"permits-tracker",query:{email:e.email,cn:e.controlNumber}}),i.value=!1})).catch((()=>i.value=!1))})))}return(0,a.YP)((()=>[s.emailToNotify]),(()=>{if((0,d.xe)(s.emailToNotify)){const e=s.emailToNotify.length-1;s.emailToNotify.splice(e,1)}})),(0,a.YP)((()=>s.siteID),(()=>{s.type=[]})),(0,a.YP)((()=>[s.timeFrom,s.timeTo]),(()=>{s.timeFrom>s.timeTo&&(s.timeTo="20:30")})),(0,a.YP)((()=>[s.submitByEmail,s.submitByName,s.formScope,s.type,s.siteID]),(()=>{s.submitByEmail&&(localStorage.submitByEmail=s.submitByEmail),s.submitByName&&(localStorage.submitByName=s.submitByName),s.formScope&&(localStorage.formScope=s.formScope),s.type&&(localStorage.type=s.type),s.siteID&&(localStorage.siteID=s.siteID,s.floorNo=[])})),(0,a.YP)((()=>s.type),((e,l)=>{e.includes("Delivery")&&e.includes("Pull-out")&&(s.type=l)})),(0,a.YP)((()=>[s.dateNeeded,s.dateNeededTo,s.siteID]),(()=>{const e=_(new Date(s.dateNeeded),new Date(s.dateNeededTo));e<0&&(s.dateNeededTo=s.dateNeeded);const l=v.find((e=>e.siteId==s.siteID&&"GatePass"==e.scope));if(l&&e>=l.maximumDay-1){let e=`Permit filing is good for ${l.maximumDay} day only`;l.maximumDay>1&&(e=`Permit filing is good for ${l.maximumDay} days only`),s.dateNeededTo=s.dateNeeded,(0,x.bM)({type:"warning",message:e})}})),(0,a.bv)((()=>{localStorage.submitByEmail&&(s.submitByEmail=localStorage.submitByEmail),localStorage.submitByName&&(s.submitByName=localStorage.submitByName),localStorage.formScope&&(s.formScope=localStorage.formScope),localStorage.siteID&&(s.siteID=+localStorage.siteID),localStorage.type&&(s.type=localStorage.type.split(",")),localStorage.floorNo&&(s.floorNo=localStorage.floorNo.split(","))})),(l,r)=>{const u=(0,a.up)("el-radio-button"),m=(0,a.up)("el-radio-group"),d=(0,a.up)("el-form-item"),k=(0,a.up)("el-input"),_=(0,a.up)("el-option"),v=(0,a.up)("el-select"),h=(0,a.up)("el-date-picker"),x=(0,a.up)("el-time-select"),U=(0,a.up)("el-input-number"),be=(0,a.up)("el-icon"),ge=(0,a.up)("el-button"),ye=(0,a.up)("el-form");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(ye,{class:"divide-y divide-gray-200 overflow-hidden px-4",model:s,ref_key:"editForm",ref:t,rules:(0,o.SU)(W)},{default:(0,a.w5)((()=>[(0,a._)("div",q,[(0,a._)("div",B,[(0,a.Wm)(d,{prop:"formScope"},{default:(0,a.w5)((()=>[D,(0,a.Wm)(m,{modelValue:s.formScope,"onUpdate:modelValue":r[0]||(r[0]=e=>s.formScope=e),class:"w-full"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{label:"Client"}),(0,a.Wm)(u,{label:"Internal"}),(0,a.Wm)(u,{label:"Vendor"})])),_:1},8,["modelValue"])])),_:1})]),(0,a._)("div",R,[(0,a.Wm)(d,{prop:"submitByEmail"},{default:(0,a.w5)((()=>[P,(0,a.Wm)(k,{size:"large",modelValue:s.submitByEmail,"onUpdate:modelValue":r[1]||(r[1]=e=>s.submitByEmail=e),onChange:f,placeholder:"Requester email address"},null,8,["modelValue"])])),_:1})]),(0,a._)("div",I,[(0,a.Wm)(d,{prop:"submitByName"},{default:(0,a.w5)((()=>[C,(0,a.Wm)(k,{size:"large",class:"w-full",modelValue:s.submitByName,"onUpdate:modelValue":r[2]||(r[2]=e=>s.submitByName=e),placeholder:"Requester name"},null,8,["modelValue"])])),_:1})]),(0,a._)("div",T,[(0,a.Wm)(d,{prop:"type"},{default:(0,a.w5)((()=>[z,(0,a.Wm)(v,{size:"large",modelValue:s.type,"onUpdate:modelValue":r[3]||(r[3]=e=>s.type=e),multiple:"",style:{width:"100%"},placeholder:"Select category"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,o.SU)(c.b9)("cf_3342"),((e,l)=>((0,a.wg)(),(0,a.j4)(_,{key:l,label:e,disabled:b(e),value:e},null,8,["label","disabled","value"])))),128)),40045==s.siteID?((0,a.wg)(),(0,a.j4)(_,{key:0,disabled:b("Delivery of Company Asset/s"),value:"Delivery of Company Asset/s"},null,8,["disabled"])):(0,a.kq)("",!0),40045==s.siteID?((0,a.wg)(),(0,a.j4)(_,{key:1,disabled:b("Delivery of Consumables/Supplies"),value:"Delivery of Consumables/Supplies"},null,8,["disabled"])):(0,a.kq)("",!0),40045==s.siteID?((0,a.wg)(),(0,a.j4)(_,{key:2,disabled:b("For moving out purposes"),value:"For moving out purposes"},null,8,["disabled"])):(0,a.kq)("",!0)])),_:1},8,["modelValue"])])),_:1})]),(0,a._)("div",A,[(0,a.Wm)(d,{prop:"siteID"},{default:(0,a.w5)((()=>[E,e.sites?((0,a.wg)(),(0,a.j4)(v,{key:0,size:"large",filterable:"",modelValue:s.siteID,"onUpdate:modelValue":r[4]||(r[4]=e=>s.siteID=e),class:"w-full",placeholder:"Select site"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.sites,((e,l)=>((0,a.wg)(),(0,a.j4)(_,{key:l,label:e.name,value:e.siteid},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])):(0,a.kq)("",!0)])),_:1})]),(0,a._)("div",O,[(0,a.Wm)(d,{prop:"floorNo"},{default:(0,a.w5)((()=>[H,(0,a.Wm)(v,{size:"large",modelValue:s.floorNo,"onUpdate:modelValue":r[5]||(r[5]=e=>s.floorNo=e),multiple:"",class:"w-full",placeholder:"Select floor"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,o.SU)(n),((e,l)=>((0,a.wg)(),(0,a.j4)(_,{key:l,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})]),(0,a._)("div",M,[(0,a.Wm)(d,{prop:"personnelName"},{default:(0,a.w5)((()=>[Y,(0,a.Wm)(k,{size:"large",class:"w-full",modelValue:s.personnelName,"onUpdate:modelValue":r[6]||(r[6]=e=>s.personnelName=e),placeholder:"Input personnel name"},null,8,["modelValue"])])),_:1})]),(0,a._)("div",j,[(0,a.Wm)(d,{prop:"personnelAccount"},{default:(0,a.w5)((()=>[F,(0,a.Wm)(k,{size:"large",class:"w-full",modelValue:s.personnelAccount,"onUpdate:modelValue":r[7]||(r[7]=e=>s.personnelAccount=e),placeholder:"Input personnel company"},null,8,["modelValue"])])),_:1})]),(0,a._)("div",K,[(0,a.Wm)(d,{prop:"dateNeeded"},{default:(0,a.w5)((()=>[Z,(0,a.Wm)(h,{size:"large",modelValue:s.dateNeeded,"onUpdate:modelValue":r[8]||(r[8]=e=>s.dateNeeded=e),style:{width:"100%"},type:"date",placeholder:"Pick a day","value-format":"YYYY-MM-DD"},null,8,["modelValue"])])),_:1})]),(0,a._)("div",$,[(0,a.Wm)(d,{prop:"dateNeededTo"},{default:(0,a.w5)((()=>[L,(0,a.Wm)(h,{size:"large",style:{width:"100%"},disabled:(0,o.SU)(p),modelValue:s.dateNeededTo,"onUpdate:modelValue":r[9]||(r[9]=e=>s.dateNeededTo=e),class:"w-full",type:"date",placeholder:"Pick a day","value-format":"YYYY-MM-DD"},null,8,["disabled","modelValue"])])),_:1})]),(0,a._)("div",G,[(0,a.Wm)(d,{prop:"timeFrom"},{default:(0,a.w5)((()=>[X,(0,a.Wm)(x,{size:"large",class:"w-full",placeholder:"Start time",modelValue:s.timeFrom,"onUpdate:modelValue":r[10]||(r[10]=e=>s.timeFrom=e),start:"00:00",step:"00:15",end:"24:00"},null,8,["modelValue"])])),_:1})]),(0,a._)("div",Q,[(0,a.Wm)(d,{prop:"timeTo"},{default:(0,a.w5)((()=>[J,(0,a.Wm)(x,{size:"large",disabled:""==s.timeFrom,class:"w-full",placeholder:"End time",modelValue:s.timeTo,"onUpdate:modelValue":r[11]||(r[11]=e=>s.timeTo=e),start:"00:00",step:"00:15",end:"24:00",minTime:s.dateNeededTo!=s.dateNeeded?"00:00":s.timeFrom},null,8,["disabled","modelValue","minTime"])])),_:1})]),(0,a._)("div",ee,[(0,a.Wm)(d,{prop:"reason"},{default:(0,a.w5)((()=>[le,(0,a.Wm)(k,{size:"large",class:"w-full",type:"textarea",rows:2,placeholder:"Input reason",modelValue:s.reason,"onUpdate:modelValue":r[12]||(r[12]=e=>s.reason=e)},null,8,["modelValue"])])),_:1})]),(0,a._)("div",te,[(0,a.Wm)(d,{prop:"emailToNotify"},{default:(0,a.w5)((()=>[ae,(0,a.Wm)(v,{size:"large",ref:"findContact",class:"w-full","allow-create":"",modelValue:s.emailToNotify,"onUpdate:modelValue":r[13]||(r[13]=e=>s.emailToNotify=e),multiple:"",filterable:"",remote:"","reserve-keyword":"",placeholder:"Select Recepients"},null,8,["modelValue"])])),_:1})])]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(s.particulars,((e,l)=>((0,a.wg)(),(0,a.iD)("div",{class:"grid grid-cols-12 gap-3 md:gap-6 py-3",key:l},[(0,a.Wm)(d,{class:"col-span-12 sm:col-span-4 mb-0",prop:`particulars[${l}].description`,rules:[{required:!0,message:"Please input item description",trigger:"blur"}]},{default:(0,a.w5)((()=>[se,(0,a.Wm)(k,{size:"large",maxlength:254,modelValue:s.particulars[l].description,"onUpdate:modelValue":e=>s.particulars[l].description=e,placeholder:"Input item description/name"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["prop"]),(0,a.Wm)(d,{class:"col-span-6 sm:col-span-2 mb-0",prop:`particulars[${l}].quantity`,rules:[{type:"number",message:"Quantity must be a number",trigger:"blur"}]},{default:(0,a.w5)((()=>[oe,(0,a.Wm)(U,{size:"large",style:{width:"100%"},modelValue:s.particulars[l].quantity,"onUpdate:modelValue":e=>s.particulars[l].quantity=e,"controls-position":"right",min:1},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["prop"]),(0,a.Wm)(d,{class:"col-span-6 sm:col-span-2 mb-0",prop:`particulars[${l}].uom`,rules:[{required:!0,message:"Please input item quantity",trigger:"blur"}]},{default:(0,a.w5)((()=>[re,(0,a.Wm)(v,{size:"large",modelValue:s.particulars[l].uom,"onUpdate:modelValue":e=>s.particulars[l].uom=e,class:"w-full",placeholder:"Unit"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,o.SU)(c.b9)("cf_3150"),((e,l)=>((0,a.wg)(),(0,a.j4)(_,{label:e,value:e,key:l},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["prop"]),(0,a.Wm)(d,{class:"col-span-12 sm:col-span-3 mb-0",prop:`particulars[${l}].remarks`},{default:(0,a.w5)((()=>[ie,(0,a.Wm)(k,{size:"large",modelValue:s.particulars[l].remarks,"onUpdate:modelValue":e=>s.particulars[l].remarks=e,placeholder:"Input remarks"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["prop"]),(0,a.Wm)(d,{class:"col-span-12 sm:col-span-1 mb-0"},{default:(0,a.w5)((()=>[ne,(0,a._)("div",ue,[(0,a.Wm)(ge,{class:"mx-auto",disabled:1==s.particulars.length,onClick:e=>g(l),circle:"",type:"danger"},{default:(0,a.w5)((()=>[(0,a.Wm)(be,null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,o.SU)(V))])),_:1})])),_:2},1032,["disabled","onClick"])]),(0,a._)("div",me,[(0,a.Wm)(ge,{class:"mx-auto w-full",disabled:1==s.particulars.length,onClick:e=>g(l),type:"danger"},{default:(0,a.w5)((()=>[(0,a.Wm)(be,null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,o.SU)(V))])),_:1})])),_:2},1032,["disabled","onClick"])])])),_:2},1024)])))),128)),(0,a._)("div",ce,[(0,a.Wm)(ge,{onClick:y,type:"primary"},{default:(0,a.w5)((()=>[(0,a.Wm)(be,{class:"el-icon--left"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,o.SU)(S))])),_:1}),de])),_:1})]),(0,a._)("div",pe,[(0,a.Wm)(ge,{loading:i.value,type:"primary",onClick:w},{default:(0,a.w5)((()=>[fe])),_:1},8,["loading"])])])),_:1},8,["model","rules"]),(0,a.Wm)(N.Z,{loading:i.value,onSubmit:w},null,8,["loading"])],64)}}});const ge=be;var ye=ge;const we={40041:{scopeOfWork:[19,20,21,22,2,3,23,24,1,5,6,41,42,43,44,45,46,47],scopeRequired:!0,scopeOfWorkRequired:!0,workRequirements:[],workRequirementsRequired:!1},40042:{scopeOfWork:[25,15,26,27,28,29,2,30,31,24,32,18,33,34,35,36],scopeRequired:!0,scopeOfWorkRequired:!0,workRequirements:[],workRequirementsRequired:!1},40043:{scopeOfWork:[22,3,2,24],scopeRequired:!0,scopeOfWorkRequired:!0,workRequirements:[14,15,16,17,18,19,20,21],workRequirementsRequired:!1},40044:{scopeOfWork:[4,2,3,24,21],scopeRequired:!0,scopeOfWorkRequired:!0,workRequirements:[],workRequirementsRequired:!1},40045:{scopeOfWork:[1,2,3,4,5,19,8,9,37,10,11,12,13,14,15,16,17,18],scopeRequired:!0,scopeOfWorkRequired:!0,workRequirements:[1,2,3,4,5,6,7,8,9,10,11,12,13,24],workRequirementsRequired:!1},40053:{scopeOfWork:[23,15,2,14,24,36,39],scopeRequired:!0,scopeOfWorkRequired:!0,workRequirements:[],workRequirementsRequired:!1},40058:{scopeOfWork:[25,27,31,50],scopeRequired:!0,scopeOfWorkRequired:!0,workRequirements:[],workRequirementsRequired:!1},40059:{scopeOfWork:[23,15,2,24,34,33,2,35],scopeRequired:!0,scopeOfWorkRequired:!0,workRequirements:[],workRequirementsRequired:!1},210148:{scopeOfWork:[23,33,2,34,15,35,24,8,48],scopeRequired:!0,scopeOfWorkRequired:!0,workRequirements:[],workRequirementsRequired:!1},297199:{scopeOfWork:[22,3,2,24,29,8,48,52],scopeRequired:!0,scopeOfWorkRequired:!0,workRequirements:[14,15,16,17,18,19,20,21],workRequirementsRequired:!1},209811:{scopeOfWork:[23,15,2,24,34,33,2,35],scopeRequired:!0,scopeOfWorkRequired:!0,workRequirements:[],workRequirementsRequired:!1},236084:{scopeOfWork:[25,29,18],scopeRequired:!0,scopeOfWorkRequired:!0,workRequirements:[],workRequirementsRequired:!1},1381877:{scopeOfWork:[26,14,2,50,51,3,15],scopeRequired:!0,scopeOfWorkRequired:!0,workRequirements:[],workRequirementsRequired:!1}},ke=[40051],_e={class:"mt-3 grid grid-cols-12 gap-x-3 py-3"},ve={class:"col-span-12 sm:col-span-6"},he=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Type")],-1),xe={class:"col-span-12 sm:col-span-6"},Ve=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"}," Templates",-1),Se={class:"col-span-12 sm:col-span-6"},We=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Email address")],-1),Ue={class:"col-span-12 sm:col-span-6"},Ne=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Name")],-1),qe={key:0,class:"col-span-12 sm:col-span-3"},Be=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"}," Work Category",-1),De={key:1,class:"col-span-12 sm:col-span-3"},Re=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"}," Work Area",-1),Pe={class:"col-span-12 sm:col-span-3"},Ie=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Site")],-1),Ce={class:"col-span-12 sm:col-span-3"},Te=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Floor")],-1),ze={class:"col-span-12 sm:col-span-3"},Ae=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Tenant")],-1),Ee={class:"col-span-12 sm:col-span-4"},Oe=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Name of Contractor")],-1),He={class:"col-span-12 sm:col-span-4"},Me=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Person in Charge")],-1),Ye={class:"col-span-12 sm:col-span-4"},je=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"}," Contact Number",-1),Fe={class:"col-span-6 sm:col-span-3"},Ke=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Date Needed From")],-1),Ze={class:"col-span-6 sm:col-span-3"},$e=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Date Needed To")],-1),Le={class:"col-span-6 sm:col-span-3"},Ge=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("From")],-1),Xe={class:"col-span-6 sm:col-span-3"},Qe=(0,a._)("label",{for:"last_name",class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("To")],-1),Je={class:"col-span-6 sm:col-span-3"},el=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Type of Work")],-1),ll={class:"col-span-6 sm:col-span-3"},tl=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"}," Others (Type of work)",-1),al={class:"col-span-6 sm:col-span-3"},sl=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"}," Work Requirements",-1),ol={class:"col-span-6 sm:col-span-3"},rl=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"}," Others (Work requirements)",-1),il={class:"col-span-12 sm:col-span-4"},nl=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},"Emails to Notify",-1),ul={class:"col-span-12 sm:col-span-8"},ml=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Scope of Work")],-1),cl={class:"col-span-12 sm:col-span-4 mb-0"},dl=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Name")],-1),pl={class:"col-span-6 sm:col-span-3 mb-0"},fl=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"}," Company",-1),bl={class:"col-span-6 sm:col-span-4 mb-0"},gl=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"}," Description",-1),yl={class:"col-span-12 sm:col-span-1 mb-0"},wl=(0,a._)("label",{class:"md:block text-sm font-semibold text-gray-700 mb-1.5 text-center hidden"},"Remove",-1),kl={class:"md:flex hidden"},_l={class:"flex md:hidden"},vl={class:"flex justify-end py-4"},hl=(0,a.Uk)(" Add Worker"),xl=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Description")],-1),Vl=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Qty")],-1),Sl=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Unit")],-1),Wl=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},"Remarks",-1),Ul=(0,a._)("label",{class:"md:block text-sm font-semibold text-gray-700 mb-1.5 text-center hidden"},"Remove",-1),Nl={class:"md:flex hidden"},ql={class:"flex md:hidden"},Bl={class:"flex justify-end py-4"},Dl=(0,a.Uk)(" Add Tool"),Rl={class:"mt-4 py-4 md:flex justify-end hidden"},Pl=(0,a.Uk)(" Submit ");var Il=(0,a.aZ)({__name:"Workpermit",props:{sites:{type:Array,required:!0}},setup(e){const l=e,t=(0,o.iH)(!1),s=(0,o.iH)(null),r=(0,o.iH)(!1),i=(0,o.iH)(null),n=(0,o.qj)({submitByID:1,formScope:"Vendor",submitByEmail:"",submitByName:"",siteID:40048,formType:"Work Permit",workCategory:"",floorNo:[],dateNeeded:(0,d.Iz)("yyyy-MM-dd"),dateNeededTo:(0,d.Iz)("yyyy-MM-dd"),timeFrom:"",timeTo:"",personnelName:"",personnelAccount:"",contractorName:"",personnelContact:"",permitApplied:[],permitAppliedOthers:"",workrRequirements:[],workRequirementOthers:"",scopeofWork:"",reason:"",emailToNotify:[],workers:[{workerName:"",company:"",description:""}],workArea:"",particulars:[{quantity:0,description:"",remarks:"",uom:"pcs.",jobStep:"",potentialHazard:"",controls:"",personInCharge:""}],saveAsTemplate:!1,templateName:"",files:[]}),p=(0,o.iH)([]),f=(0,a.Fl)((()=>{const e=[];return we[n.siteID]?((0,c.Vz)("cf_3556").map((l=>{e.push(l)})),e):(0,c.Vz)("cf_3556")})),b=(0,a.Fl)((()=>{const e=[];return we[n.siteID]?((0,c.Vz)("cf_3558").map((l=>{e.push(l)})),e):(0,c.Vz)("cf_3558")})),g=(0,a.Fl)((()=>{const e=l.sites.find((e=>e.siteid==n.siteID));return e?e.floors:[]})),y=(0,a.Fl)((()=>{const e=v.find((e=>e.siteId==n.siteID&&"WorkingPermit"==e.scope));return!(!e||1!=e.maximumDay)}));async function w(){await U.G.getWorkingpermitsTemplates(n.submitByEmail).then((e=>p.value=e))}function k(){1!=n.saveAsTemplate||""!=n.templateName?i.value?.validate().then((async()=>{r.value=!0,await U.G.submitWorkingPermit(n).then((e=>{r.value=!1,u.Z.push({name:"permits-tracker",query:{email:e.email,cn:e.controlNumber}})})).catch((()=>r.value=!1))})):(0,x.bM)({title:"Warning",message:"Please input template name",type:"warning"})}function q(){n.workers.push({workerName:"",company:"",description:""})}function B(){n.particulars.push({quantity:0,description:"",remarks:"",uom:"pcs.",jobStep:"",potentialHazard:"",controls:"",personInCharge:""})}function D(e){h.T.confirm("Are you sure you want to delete this item? This action cannot be undone. Click 'OK' to delete or 'Cancel' to keep the item.","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((()=>{if(0==e)return!1;n.workers.splice(e,1)}))}function R(e){h.T.confirm("Are you sure you want to delete this item? This action cannot be undone. Click 'OK' to delete or 'Cancel' to keep the item.","Warning",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((()=>{if(0==e)return!1;n.particulars.splice(e,1)}))}async function P(e){t.value=!0,await m.g.fetchDetailsByEmail(e).then((e=>{e&&e.contactid&&(n.submitByName=`${e.firstname} ${e.lastname}`)})),t.value=!1}async function I(e){await U.G.workingPermitsDetails(e).then((e=>{n.siteID=e.cf_site_id,n.personnelName=e.cf_3355,n.personnelAccount=e.cf_3357,n.contractorName=e.cf_3584,n.personnelContact=e.cf_3580,n.dateNeeded=e.cf_3349,n.dateNeededTo=e.cf_3446,n.timeFrom=e.cf_3351,n.timeTo=e.cf_3353,n.floorNo=e.cf_3344.split(" |##| "),n.workCategory=e.cf_3554;const l=e.cf_3556.split(" |##| ");1==l.length&&""==l[0]?n.permitApplied=[]:n.permitApplied=e.cf_3556.split(" |##| ");const t=e.cf_3558.split(" |##| ");1==t.length&&""==t[0]?n.workrRequirements=[]:n.workrRequirements=e.cf_3558.split(" |##| "),n.permitAppliedOthers=e.cf_3572,n.workRequirementOthers=e.cf_3574,n.scopeofWork=e.cf_3582,n.particulars=[],n.workers=[],e.particulars.map((e=>{n.particulars.push({quantity:e.cf_3146,description:e.cf_3148,remarks:e.cf_3241,uom:e.cf_3150,jobStep:e.cf_3586,potentialHazard:e.cf_3588,controls:e.cf_3590,personInCharge:e.cf_3592})})),e.personnels.map((e=>{n.workers.push({workerName:e.cf_3568,company:e.cf_3564,description:e.cf_3576})}))}))}return(0,a.YP)((()=>[n.emailToNotify]),(()=>{if((0,d.xe)(n.emailToNotify)){const e=n.emailToNotify.length-1;n.emailToNotify.splice(e,1)}})),(0,a.YP)((()=>[n.timeFrom,n.timeTo]),(()=>{n.timeFrom>n.timeTo&&(n.timeTo="20:30")})),(0,a.YP)((()=>[n.submitByEmail,n.submitByName,n.formScope,n.siteID]),(()=>{n.submitByEmail&&(localStorage.submitByEmail=n.submitByEmail),n.submitByName&&(localStorage.submitByName=n.submitByName),n.formScope&&(localStorage.formScope=n.formScope),n.siteID&&(localStorage.siteID=n.siteID,n.floorNo=[])})),(0,a.YP)((()=>[n.dateNeeded,n.dateNeededTo,n.siteID]),(()=>{const e=_(new Date(n.dateNeededTo),new Date(n.dateNeeded));e<0&&(n.dateNeededTo=n.dateNeeded);const l=v.find((e=>e.siteId==n.siteID&&"WorkingPermit"==e.scope));if(l&&e>=l.maximumDay-1){let e=`Permit filing is good for ${l.maximumDay} day only`;l.maximumDay>1&&(e=`Permit filing is good for ${l.maximumDay} days only`),n.dateNeededTo=n.dateNeeded,(0,x.bM)({type:"warning",message:e})}})),(0,a.bv)((()=>{localStorage.submitByEmail&&(n.submitByEmail=localStorage.submitByEmail),localStorage.submitByName&&(n.submitByName=localStorage.submitByName),localStorage.formScope&&(n.formScope=localStorage.formScope),localStorage.siteID&&(n.siteID=+localStorage.siteID),localStorage.floorNo&&(n.floorNo=localStorage.floorNo.split(",")),n.submitByEmail&&w()})),(l,t)=>{const u=(0,a.up)("el-radio-button"),m=(0,a.up)("el-radio-group"),d=(0,a.up)("el-form-item"),w=(0,a.up)("el-option"),_=(0,a.up)("el-select"),v=(0,a.up)("el-input"),h=(0,a.up)("el-date-picker"),x=(0,a.up)("el-time-select"),U=(0,a.up)("el-icon"),C=(0,a.up)("el-button"),T=(0,a.up)("el-input-number"),z=(0,a.up)("el-form");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(z,{class:"divide-y divide-gray-200 overflow-hidden px-4",model:n,ref_key:"editForm",ref:i,rules:(0,o.SU)(W)},{default:(0,a.w5)((()=>[(0,a._)("div",_e,[(0,a._)("div",ve,[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[he,(0,a.Wm)(m,{modelValue:n.formScope,"onUpdate:modelValue":t[0]||(t[0]=e=>n.formScope=e),class:"w-full"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{label:"Client"}),(0,a.Wm)(u,{label:"Internal"}),(0,a.Wm)(u,{label:"Vendor"})])),_:1},8,["modelValue"])])),_:1})]),(0,a._)("div",xe,[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[Ve,(0,a.Wm)(_,{size:"large",placeholder:"Select a template",modelValue:s.value,"onUpdate:modelValue":t[1]||(t[1]=e=>s.value=e),onChange:I,class:"w-full"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(p.value,((e,l)=>((0,a.wg)(),(0,a.j4)(w,{key:l,value:e.reference_id,label:e.template_name},null,8,["value","label"])))),128))])),_:1},8,["modelValue"])])),_:1})]),(0,a._)("div",Se,[(0,a.Wm)(d,{prop:"submitByEmail"},{default:(0,a.w5)((()=>[We,(0,a.Wm)(v,{size:"large",modelValue:n.submitByEmail,"onUpdate:modelValue":t[2]||(t[2]=e=>n.submitByEmail=e),onChange:P,placeholder:"Requester email address"},null,8,["modelValue"])])),_:1})]),(0,a._)("div",Ue,[(0,a.Wm)(d,{prop:"submitByName"},{default:(0,a.w5)((()=>[Ne,(0,a.Wm)(v,{size:"large",class:"w-full",modelValue:n.submitByName,"onUpdate:modelValue":t[3]||(t[3]=e=>n.submitByName=e),placeholder:"Requester name"},null,8,["modelValue"])])),_:1})]),(0,o.SU)(ke).includes(n.siteID)?((0,a.wg)(),(0,a.iD)("div",qe,[(0,a.Wm)(d,{prop:"workCategory"},{default:(0,a.w5)((()=>[Be,(0,a.Wm)(_,{size:"large",modelValue:n.workCategory,"onUpdate:modelValue":t[4]||(t[4]=e=>n.workCategory=e),style:{width:"100%"},placeholder:"Select"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,o.SU)(c.b9)("cf_3554"),((e,l)=>((0,a.wg)(),(0,a.j4)(w,{key:l,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])):((0,a.wg)(),(0,a.iD)("div",De,[(0,a.Wm)(d,{prop:"workArea"},{default:(0,a.w5)((()=>[Re,(0,a.Wm)(v,{size:"large",modelValue:n.workArea,"onUpdate:modelValue":t[5]||(t[5]=e=>n.workArea=e),placeholder:"Please input work area"},null,8,["modelValue"])])),_:1})])),(0,a._)("div",Pe,[(0,a.Wm)(d,{prop:"siteID"},{default:(0,a.w5)((()=>[Ie,e.sites?((0,a.wg)(),(0,a.j4)(_,{key:0,size:"large",filterable:"",modelValue:n.siteID,"onUpdate:modelValue":t[6]||(t[6]=e=>n.siteID=e),class:"w-full",placeholder:"Select site"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.sites,((e,l)=>((0,a.wg)(),(0,a.j4)(w,{key:l,label:e.name,value:e.siteid},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])):(0,a.kq)("",!0)])),_:1})]),(0,a._)("div",Ce,[(0,a.Wm)(d,{prop:"floorNo"},{default:(0,a.w5)((()=>[Te,(0,a.Wm)(_,{size:"large",modelValue:n.floorNo,"onUpdate:modelValue":t[7]||(t[7]=e=>n.floorNo=e),multiple:"",class:"w-full",placeholder:"Select floor"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,o.SU)(g),((e,l)=>((0,a.wg)(),(0,a.j4)(w,{key:l,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})]),(0,a._)("div",ze,[(0,a.Wm)(d,{prop:"personnelAccount"},{default:(0,a.w5)((()=>[Ae,(0,a.Wm)(v,{size:"large",class:"w-full",modelValue:n.personnelAccount,"onUpdate:modelValue":t[8]||(t[8]=e=>n.personnelAccount=e),placeholder:"Input personnel company"},null,8,["modelValue"])])),_:1})]),(0,a._)("div",Ee,[(0,a.Wm)(d,{prop:"contractorName"},{default:(0,a.w5)((()=>[Oe,(0,a.Wm)(v,{size:"large",class:"w-full",modelValue:n.contractorName,"onUpdate:modelValue":t[9]||(t[9]=e=>n.contractorName=e),placeholder:"Input contractor name"},null,8,["modelValue"])])),_:1})]),(0,a._)("div",He,[(0,a.Wm)(d,{prop:"personnelName"},{default:(0,a.w5)((()=>[Me,(0,a.Wm)(v,{size:"large",class:"w-full",modelValue:n.personnelName,"onUpdate:modelValue":t[10]||(t[10]=e=>n.personnelName=e),placeholder:"Input person in charge"},null,8,["modelValue"])])),_:1})]),(0,a._)("div",Ye,[(0,a.Wm)(d,{prop:"personnelContact"},{default:(0,a.w5)((()=>[je,(0,a.Wm)(v,{size:"large",class:"w-full",modelValue:n.personnelContact,"onUpdate:modelValue":t[11]||(t[11]=e=>n.personnelContact=e),placeholder:"Input person in charge contact number"},null,8,["modelValue"])])),_:1})]),(0,a._)("div",Fe,[(0,a.Wm)(d,{prop:"dateNeeded"},{default:(0,a.w5)((()=>[Ke,(0,a.Wm)(h,{size:"large",modelValue:n.dateNeeded,"onUpdate:modelValue":t[12]||(t[12]=e=>n.dateNeeded=e),style:{width:"100%"},type:"date",placeholder:"Pick a day","value-format":"YYYY-MM-DD"},null,8,["modelValue"])])),_:1})]),(0,a._)("div",Ze,[(0,a.Wm)(d,{prop:"dateNeededTo"},{default:(0,a.w5)((()=>[$e,(0,a.Wm)(h,{size:"large",disabled:(0,o.SU)(y),modelValue:n.dateNeededTo,"onUpdate:modelValue":t[13]||(t[13]=e=>n.dateNeededTo=e),style:{width:"100%"},type:"date",placeholder:"Pick a day","value-format":"YYYY-MM-DD"},null,8,["disabled","modelValue"])])),_:1})]),(0,a._)("div",Le,[(0,a.Wm)(d,{prop:"timeFrom"},{default:(0,a.w5)((()=>[Ge,(0,a.Wm)(x,{size:"large",class:"w-full",placeholder:"Start time",modelValue:n.timeFrom,"onUpdate:modelValue":t[14]||(t[14]=e=>n.timeFrom=e),start:"00:00",step:"00:15",end:"24:00"},null,8,["modelValue"])])),_:1})]),(0,a._)("div",Xe,[(0,a.Wm)(d,{prop:"timeTo"},{default:(0,a.w5)((()=>[Qe,(0,a.Wm)(x,{size:"large",disabled:""==n.timeFrom,class:"w-full",placeholder:"End time",modelValue:n.timeTo,"onUpdate:modelValue":t[15]||(t[15]=e=>n.timeTo=e),start:"00:00",step:"00:15",end:"24:00",minTime:n.dateNeededTo!=n.dateNeeded?"00:00":n.timeFrom},null,8,["disabled","modelValue","minTime"])])),_:1})]),(0,a._)("div",Je,[(0,a.Wm)(d,{class:"col-span-6 sm:col-span-3 mb-2",prop:"permitApplied"},{default:(0,a.w5)((()=>[el,(0,a.Wm)(_,{size:"large",filterable:"",modelValue:n.permitApplied,"onUpdate:modelValue":t[16]||(t[16]=e=>n.permitApplied=e),style:{width:"100%"},placeholder:"Select",multiple:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,o.SU)(f),((e,l)=>((0,a.wg)(),(0,a.j4)(w,{key:l,label:e.values,value:e.values},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})]),(0,a._)("div",ll,[(0,a.Wm)(d,{prop:"workRequirementOthers"},{default:(0,a.w5)((()=>[tl,(0,a.Wm)(v,{size:"large",placeholder:"Please specify",modelValue:n.permitAppliedOthers,"onUpdate:modelValue":t[17]||(t[17]=e=>n.permitAppliedOthers=e)},null,8,["modelValue"])])),_:1})]),(0,a._)("div",al,[(0,a.Wm)(d,{prop:"workrRequirements",rules:[{required:40045==n.siteID,message:"Please input work requirements",trigger:"blur"}]},{default:(0,a.w5)((()=>[sl,(0,a.Wm)(_,{size:"large",filterable:"",disabled:0==(0,o.SU)(b).length,modelValue:n.workrRequirements,"onUpdate:modelValue":t[18]||(t[18]=e=>n.workrRequirements=e),style:{width:"100%"},placeholder:"Select",multiple:""},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,o.SU)(b),((e,l)=>((0,a.wg)(),(0,a.j4)(w,{key:l,label:e.values,value:e.values},null,8,["label","value"])))),128))])),_:1},8,["disabled","modelValue"])])),_:1},8,["rules"])]),(0,a._)("div",ol,[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[rl,(0,a.Wm)(v,{size:"large",placeholder:"Please specify",modelValue:n.workRequirementOthers,"onUpdate:modelValue":t[19]||(t[19]=e=>n.workRequirementOthers=e)},null,8,["modelValue"])])),_:1})]),(0,a._)("div",il,[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[nl,(0,a.Wm)(_,{size:"large",ref:"findContact",class:"w-full","allow-create":"",modelValue:n.emailToNotify,"onUpdate:modelValue":t[20]||(t[20]=e=>n.emailToNotify=e),multiple:"",filterable:"",remote:"","reserve-keyword":"",placeholder:"Select Recepients"},null,8,["modelValue"])])),_:1})]),(0,a._)("div",ul,[(0,a.Wm)(d,{prop:"scopeofWork"},{default:(0,a.w5)((()=>[ml,(0,a.Wm)(v,{size:"large",type:"textarea",rows:2,placeholder:"Please specify",modelValue:n.scopeofWork,"onUpdate:modelValue":t[21]||(t[21]=e=>n.scopeofWork=e)},null,8,["modelValue"])])),_:1})])]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.workers,((e,l)=>((0,a.wg)(),(0,a.iD)("div",{class:"grid grid-cols-12 gap-3 md:gap-6 py-3",key:l},[(0,a._)("div",cl,[(0,a.Wm)(d,{prop:`workers[${l}].workerName`,rules:[{required:!0,message:"Please input name",trigger:"blur"}]},{default:(0,a.w5)((()=>[dl,(0,a.Wm)(v,{size:"large",maxlength:254,modelValue:n.workers[l].workerName,"onUpdate:modelValue":e=>n.workers[l].workerName=e,placeholder:"Input name"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["prop"])]),(0,a._)("div",pl,[(0,a.Wm)(d,{prop:`workers[${l}].company`},{default:(0,a.w5)((()=>[fl,(0,a.Wm)(v,{size:"large",maxlength:200,style:{width:"100%"},placeholder:"Input company",modelValue:n.workers[l].company,"onUpdate:modelValue":e=>n.workers[l].company=e,min:1},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["prop"])]),(0,a._)("div",bl,[(0,a.Wm)(d,{prop:`workers[${l}].description`},{default:(0,a.w5)((()=>[gl,(0,a.Wm)(v,{size:"large",placeholder:"Input description",style:{width:"100%"},modelValue:n.workers[l].description,"onUpdate:modelValue":e=>n.workers[l].description=e,min:1},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["prop"])]),(0,a._)("div",yl,[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[wl,(0,a._)("div",kl,[(0,a.Wm)(C,{class:"mx-auto",disabled:1==n.workers.length,onClick:e=>D(l),circle:"",type:"danger"},{default:(0,a.w5)((()=>[(0,a.Wm)(U,null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,o.SU)(V))])),_:1})])),_:2},1032,["disabled","onClick"])]),(0,a._)("div",_l,[(0,a.Wm)(C,{class:"mx-auto w-full",disabled:1==n.workers.length,onClick:e=>D(l),type:"danger"},{default:(0,a.w5)((()=>[(0,a.Wm)(U,null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,o.SU)(V))])),_:1})])),_:2},1032,["disabled","onClick"])])])),_:2},1024)])])))),128)),(0,a._)("div",vl,[(0,a.Wm)(C,{onClick:q,type:"primary"},{default:(0,a.w5)((()=>[(0,a.Wm)(U,{class:"el-icon--left"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,o.SU)(S))])),_:1}),hl])),_:1})]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(n.particulars,((e,l)=>((0,a.wg)(),(0,a.iD)("div",{class:"grid grid-cols-12 gap-3 md:gap-6 py-3",key:l},[(0,a.Wm)(d,{class:"col-span-12 sm:col-span-4 mb-0",prop:`particulars[${l}].description`,rules:[{required:!0,message:"Please input item description",trigger:"blur"}]},{default:(0,a.w5)((()=>[xl,(0,a.Wm)(v,{size:"large",maxlength:254,modelValue:n.particulars[l].description,"onUpdate:modelValue":e=>n.particulars[l].description=e,placeholder:"Input item description/name"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["prop"]),(0,a.Wm)(d,{class:"col-span-6 sm:col-span-2 mb-0",prop:`particulars[${l}].quantity`,rules:[{type:"number",message:"Quantity must be a number",trigger:"blur"}]},{default:(0,a.w5)((()=>[Vl,(0,a.Wm)(T,{size:"large",style:{width:"100%"},modelValue:n.particulars[l].quantity,"onUpdate:modelValue":e=>n.particulars[l].quantity=e,"controls-position":"right",min:1},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["prop"]),(0,a.Wm)(d,{class:"col-span-6 sm:col-span-2 mb-0",prop:`particulars[${l}].uom`,rules:[{required:!0,message:"Please input item quantity",trigger:"blur"}]},{default:(0,a.w5)((()=>[Sl,(0,a.Wm)(_,{size:"large",modelValue:n.particulars[l].uom,"onUpdate:modelValue":e=>n.particulars[l].uom=e,class:"w-full",placeholder:"Unit"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,o.SU)(c.b9)("cf_3150"),((e,l)=>((0,a.wg)(),(0,a.j4)(w,{label:e,value:e,key:l},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["prop"]),(0,a.Wm)(d,{class:"col-span-12 sm:col-span-3 mb-0",prop:`particulars[${l}].remarks`},{default:(0,a.w5)((()=>[Wl,(0,a.Wm)(v,{size:"large",modelValue:n.particulars[l].remarks,"onUpdate:modelValue":e=>n.particulars[l].remarks=e,placeholder:"Input remarks"},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["prop"]),(0,a.Wm)(d,{class:"col-span-12 sm:col-span-1 mb-0"},{default:(0,a.w5)((()=>[Ul,(0,a._)("div",Nl,[(0,a.Wm)(C,{class:"mx-auto",disabled:1==n.particulars.length,onClick:e=>R(l),circle:"",type:"danger"},{default:(0,a.w5)((()=>[(0,a.Wm)(U,null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,o.SU)(V))])),_:1})])),_:2},1032,["disabled","onClick"])]),(0,a._)("div",ql,[(0,a.Wm)(C,{class:"mx-auto w-full",disabled:1==n.particulars.length,onClick:e=>R(l),type:"danger"},{default:(0,a.w5)((()=>[(0,a.Wm)(U,null,{default:(0,a.w5)((()=>[(0,a.Wm)((0,o.SU)(V))])),_:1})])),_:2},1032,["disabled","onClick"])])])),_:2},1024)])))),128)),(0,a._)("div",Bl,[(0,a.Wm)(C,{onClick:B,type:"primary"},{default:(0,a.w5)((()=>[(0,a.Wm)(U,{class:"el-icon--left"},{default:(0,a.w5)((()=>[(0,a.Wm)((0,o.SU)(S))])),_:1}),Dl])),_:1})]),(0,a._)("div",Rl,[(0,a.Wm)(C,{loading:r.value,type:"primary",onClick:k},{default:(0,a.w5)((()=>[Pl])),_:1},8,["loading"])])])),_:1},8,["model","rules"]),(0,a.Wm)(N.Z,{loading:r.value,onSubmit:k},null,8,["loading"])],64)}}});const Cl=Il;var Tl=Cl;const zl=[40041,40043,40040,40048,40046,297199,236084,40044,40042,40057,40051,40059,209811,40047,210148,40058,40049,40054,40055,40053,40045,626441,1381877,110170,1358690,1238998,209034],Al={class:"mt-3 grid grid-cols-12 gap-x-3 py-3"},El={class:"col-span-12 sm:col-span-12"},Ol=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Type")],-1),Hl={class:"col-span-12 sm:col-span-6"},Ml=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Email address")],-1),Yl={class:"col-span-12 sm:col-span-6"},jl=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Name")],-1),Fl={class:"col-span-12 sm:col-span-4"},Kl=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Site")],-1),Zl={class:"col-span-12 sm:col-span-4"},$l=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Floor")],-1),Ll={class:"col-span-12 sm:col-span-4"},Gl=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Driver's Name")],-1),Xl={class:"col-span-12 sm:col-span-4"},Ql=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Vehicle Model")],-1),Jl={class:"col-span-12 sm:col-span-4"},et=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Vehicle Color")],-1),lt={class:"col-span-12 sm:col-span-4 mb-0"},tt=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Vehicle Plate Number")],-1),at={class:"col-span-6 sm:col-span-3"},st=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Date Needed From")],-1),ot={class:"col-span-6 sm:col-span-3 mb-0"},rt=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Date Needed To")],-1),it={class:"col-span-6 sm:col-span-3"},nt=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("From")],-1),ut={class:"col-span-6 sm:col-span-3"},mt=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("To")],-1),ct={class:"col-span-12 sm:col-span-12"},dt=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},"Manager's Email",-1),pt={class:"mt-4 py-4 md:flex justify-end hidden"},ft=(0,a.Uk)(" Submit ");var bt=(0,a.aZ)({__name:"TemporaryParking",props:{sites:{type:Array,required:!0}},setup(e){const l=e,t=(0,o.iH)(!1),s=(0,o.iH)(!1),r=(0,o.iH)(null),i=(0,o.qj)({submitByID:1,formScope:"Client",submitByEmail:"",submitByName:"",siteID:40041,floorNo:[],formType:"Temporary Parking Request",dateNeeded:(0,d.Iz)("yyyy-MM-dd"),dateNeededTo:(0,d.Iz)("yyyy-MM-dd"),timeFrom:"",timeTo:"",driversName:"",vehicleModel:"",vehicleColor:"",vehiclePlateNumber:"",managersEmail:[]}),n=(0,a.Fl)((()=>{const e=l.sites.find((e=>e.siteid==i.siteID));return e?e.floors:[]}));async function c(e){t.value=!0,await m.g.fetchDetailsByEmail(e).then((e=>{e&&e.contactid&&(i.submitByName=`${e.firstname} ${e.lastname}`)})),t.value=!1}async function p(){await(r.value?.validate().then((async()=>{s.value=!0,await U.G.submitTemporaryParking(i).then((e=>{s.value=!1,u.Z.push({name:"permits-tracker",query:{email:e.email,cn:e.controlNumber}})})).catch((()=>s.value=!1))})))}return(0,a.YP)((()=>[i.timeFrom,i.timeTo]),(()=>{i.timeFrom>i.timeTo&&(i.timeTo=i.timeFrom)})),(0,a.YP)((()=>[i.submitByEmail,i.submitByName,i.formScope,i.siteID]),(()=>{i.submitByEmail&&(localStorage.submitByEmail=i.submitByEmail),i.submitByName&&(localStorage.submitByName=i.submitByName),i.formScope&&(localStorage.formScope=i.formScope),i.siteID&&(localStorage.siteID=i.siteID)})),(0,a.YP)((()=>[i.dateNeeded,i.dateNeededTo,i.siteID]),(()=>{const e=_(new Date(i.dateNeeded),new Date(i.dateNeededTo));e<0&&(i.dateNeededTo=i.dateNeeded)})),(0,a.bv)((()=>{localStorage.submitByEmail&&(i.submitByEmail=localStorage.submitByEmail),localStorage.submitByName&&(i.submitByName=localStorage.submitByName),localStorage.formScope&&(i.formScope=localStorage.formScope),localStorage.siteID&&(i.siteID=+localStorage.siteID)})),(l,t)=>{const u=(0,a.up)("el-radio-button"),m=(0,a.up)("el-radio-group"),d=(0,a.up)("el-form-item"),f=(0,a.up)("el-input"),b=(0,a.up)("el-option"),g=(0,a.up)("el-select"),y=(0,a.up)("el-date-picker"),w=(0,a.up)("el-time-select"),k=(0,a.up)("el-button"),_=(0,a.up)("el-form");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(_,{class:"divide-y divide-gray-200 overflow-hidden px-4",model:i,ref_key:"editForm",ref:r,rules:(0,o.SU)(W)},{default:(0,a.w5)((()=>[(0,a._)("div",Al,[(0,a._)("div",El,[(0,a.Wm)(d,{prop:"formScope"},{default:(0,a.w5)((()=>[Ol,(0,a.Wm)(m,{modelValue:i.formScope,"onUpdate:modelValue":t[0]||(t[0]=e=>i.formScope=e),class:"w-full"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{label:"Client"}),(0,a.Wm)(u,{label:"Internal"}),(0,a.Wm)(u,{label:"Vendor"})])),_:1},8,["modelValue"])])),_:1})]),(0,a._)("div",Hl,[(0,a.Wm)(d,{prop:"submitByEmail"},{default:(0,a.w5)((()=>[Ml,(0,a.Wm)(f,{size:"large",modelValue:i.submitByEmail,"onUpdate:modelValue":t[1]||(t[1]=e=>i.submitByEmail=e),onChange:c,placeholder:"Requester email address"},null,8,["modelValue"])])),_:1})]),(0,a._)("div",Yl,[(0,a.Wm)(d,{prop:"submitByName"},{default:(0,a.w5)((()=>[jl,(0,a.Wm)(f,{size:"large",class:"w-full",modelValue:i.submitByName,"onUpdate:modelValue":t[2]||(t[2]=e=>i.submitByName=e),placeholder:"Requester name"},null,8,["modelValue"])])),_:1})]),(0,a._)("div",Fl,[(0,a.Wm)(d,{prop:"siteID"},{default:(0,a.w5)((()=>[Kl,(0,a.Wm)(g,{size:"large",filterable:"",modelValue:i.siteID,"onUpdate:modelValue":t[3]||(t[3]=e=>i.siteID=e),class:"w-full",placeholder:"Select site"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.sites,((e,l)=>((0,a.wg)(),(0,a.j4)(b,{key:l,label:e.name,value:e.siteid},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})]),(0,a._)("div",Zl,[(0,a.Wm)(d,{prop:"floorNo"},{default:(0,a.w5)((()=>[$l,(0,a.Wm)(g,{size:"large",modelValue:i.floorNo,"onUpdate:modelValue":t[4]||(t[4]=e=>i.floorNo=e),multiple:"",class:"w-full",placeholder:"Select floor"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,o.SU)(n),((e,l)=>((0,a.wg)(),(0,a.j4)(b,{key:l,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})]),(0,a._)("div",Ll,[(0,a.Wm)(d,{prop:"driversName"},{default:(0,a.w5)((()=>[Gl,(0,a.Wm)(f,{size:"large",class:"w-full",modelValue:i.driversName,"onUpdate:modelValue":t[5]||(t[5]=e=>i.driversName=e),placeholder:"Input driver's name"},null,8,["modelValue"])])),_:1})]),(0,a._)("div",Xl,[(0,a.Wm)(d,{prop:"vehicleModel"},{default:(0,a.w5)((()=>[Ql,(0,a.Wm)(f,{size:"large",class:"w-full",modelValue:i.vehicleModel,"onUpdate:modelValue":t[6]||(t[6]=e=>i.vehicleModel=e),placeholder:"Input vehicle model"},null,8,["modelValue"])])),_:1})]),(0,a._)("div",Jl,[(0,a.Wm)(d,{prop:"vehicleColor"},{default:(0,a.w5)((()=>[et,(0,a.Wm)(f,{size:"large",class:"w-full",modelValue:i.vehicleColor,"onUpdate:modelValue":t[7]||(t[7]=e=>i.vehicleColor=e),placeholder:"Input vehicle color"},null,8,["modelValue"])])),_:1})]),(0,a._)("div",lt,[(0,a.Wm)(d,{prop:"vehiclePlateNumber"},{default:(0,a.w5)((()=>[tt,(0,a.Wm)(f,{size:"large",class:"w-full",modelValue:i.vehiclePlateNumber,"onUpdate:modelValue":t[8]||(t[8]=e=>i.vehiclePlateNumber=e),placeholder:"Input vehicle number"},null,8,["modelValue"])])),_:1})]),(0,a._)("div",at,[(0,a.Wm)(d,{prop:"dateNeeded"},{default:(0,a.w5)((()=>[st,(0,a.Wm)(y,{size:"large",modelValue:i.dateNeeded,"onUpdate:modelValue":t[9]||(t[9]=e=>i.dateNeeded=e),class:"w-full",style:{width:"100%"},type:"date",placeholder:"Pick a day","value-format":"YYYY-MM-DD"},null,8,["modelValue"])])),_:1})]),(0,a._)("div",ot,[(0,a.Wm)(d,{prop:"dateNeededTo"},{default:(0,a.w5)((()=>[rt,(0,a.Wm)(y,{size:"large",modelValue:i.dateNeededTo,"onUpdate:modelValue":t[10]||(t[10]=e=>i.dateNeededTo=e),class:"w-full",style:{width:"100%"},type:"date",placeholder:"Pick a day","value-format":"YYYY-MM-DD"},null,8,["modelValue"])])),_:1})]),(0,a._)("div",it,[(0,a.Wm)(d,{prop:"timeFrom"},{default:(0,a.w5)((()=>[nt,(0,a.Wm)(w,{size:"large",class:"w-full",placeholder:"Start time",modelValue:i.timeFrom,"onUpdate:modelValue":t[11]||(t[11]=e=>i.timeFrom=e),start:"00:00",step:"00:15",end:"24:00"},null,8,["modelValue"])])),_:1})]),(0,a._)("div",ut,[(0,a.Wm)(d,{class:"col-span-6 sm:col-span-3 mb-0",prop:"timeTo"},{default:(0,a.w5)((()=>[mt,(0,a.Wm)(w,{size:"large",disabled:""==i.timeFrom,class:"w-full",placeholder:"End time",modelValue:i.timeTo,"onUpdate:modelValue":t[12]||(t[12]=e=>i.timeTo=e),start:"00:00",step:"00:15",end:"24:00",minTime:i.dateNeededTo!=i.dateNeeded?"00:00":i.timeFrom},null,8,["disabled","modelValue","minTime"])])),_:1})]),(0,a._)("div",ct,[(0,a.Wm)(d,{prop:"managersEmail"},{default:(0,a.w5)((()=>[dt,(0,a.Wm)(f,{size:"large",class:"w-full",modelValue:i.managersEmail,"onUpdate:modelValue":t[13]||(t[13]=e=>i.managersEmail=e),placeholder:"Input your manager's email"},null,8,["modelValue"])])),_:1})])]),(0,a._)("div",pt,[(0,a.Wm)(k,{loading:s.value,type:"primary",onClick:p},{default:(0,a.w5)((()=>[ft])),_:1},8,["loading"])])])),_:1},8,["model","rules"]),(0,a.Wm)(N.Z,{loading:s.value,onSubmit:p},null,8,["loading"])],64)}}});const gt=bt;var yt=gt;const wt=[{location:"South Area - Axis | 05:45 AM",time:"05:45"},{location:"South Area - Shell SM BF (North Bound) | 06:05 AM",time:"06:05"},{location:"South Area - Axis | 07:40 AM",time:"07:40"},{location:"South Area - Shell SM BF (North Bound) | 08:00 AM",time:"08:00"},{location:"North Area - SM Valenzuela | 05:45 AM",time:"05:45"},{location:"North Area - Clean Fuel (North Bound) | 06:35 AM",time:"06:35"},{location:"Manila Area - PITX (Loading / Unloading Area) | 05:45 AM",time:"05:45"},{location:"Manila Area - LRT Buendia (Jollibee North Bound) | 06:15 AM",time:"06:15"},{location:"Manila Area - PITX (Loading / Unloading Area) | 07:40 AM",time:"07:40"},{location:"Manila Area - LRT Buendia (Jollibee North Bound) | 08:05 AM",time:"08:05"}],kt=[{location:"South Area - Axis"},{location:"South Area -  Mercury Drug - Sucat Exit"},{location:"North Area - SM Valenzuela"},{location:"North Area - Araneta"},{location:"Manila Area - PITX"},{location:"Manila Area - LRT Buendia"}],_t=[{time:"17:00"},{time:"20:00"}],vt={class:"mt-3 grid grid-cols-12 gap-x-3 py-3"},ht={class:"col-span-12 sm:col-span-4"},xt=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Email address")],-1),Vt={class:"col-span-12 sm:col-span-4"},St=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Name")],-1),Wt={class:"col-span-12 sm:col-span-4"},Ut=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Contact Number")],-1),Nt={class:"col-span-6 sm:col-span-6"},qt=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Type of Request")],-1),Bt={class:"col-span-6 sm:col-span-6"},Dt=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Department")],-1),Rt={key:0,class:"col-span-6 sm:col-span-6"},Pt=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Number of Passengers")],-1),It={key:1,class:"col-span-6 sm:col-span-6"},Ct=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Reason")],-1),Tt={key:2,class:"col-span-12 sm:col-span-6"},zt=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Shuttle Area")],-1),At={key:3,class:"col-span-12 sm:col-span-6"},Et=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Shuttle Route")],-1),Ot={class:"col-span-12 sm:col-span-6"},Ht=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Date")],-1),Mt={class:"col-span-12 sm:col-span-6"},Yt=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Time")],-1),jt={class:"col-span-12 sm:col-span-6"},Ft=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Pickup Location")],-1),Kt={class:"col-span-12 sm:col-span-6"},Zt=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Drop-off Location")],-1),$t={class:"mt-4 py-4 md:flex justify-end hidden"},Lt=(0,a.Uk)(" Submit ");var Gt=(0,a.aZ)({__name:"VanBooking",props:{sites:{type:Array,required:!0}},setup(e){const l=(0,o.iH)(null),t=(0,o.iH)(!1),s=(0,o.iH)(!1),r=(0,o.qj)({submitByID:1,formScope:"Internal",submitByEmail:"",submitByName:"",siteID:40041,formType:"Van Booking Request",reasonForShuttle:"",date:(0,d.Iz)("yyyy-MM-dd"),time:"",pickUpLocation:"",dropOffLocation:"",typeOfRequest:"",department:"",contactNumber:"",numberOfPassengers:0,shuttleArea:"",shuttleRoute:""});async function i(e){t.value=!0,await m.g.fetchDetailsByEmail(e).then((e=>{e&&e.contactid&&(r.submitByName=`${e.firstname} ${e.lastname}`)})),t.value=!1}async function n(){await(l.value?.validate().then((async()=>{s.value=!0,await U.G.vanBookingRequest(r).then((e=>{s.value=!1,u.Z.push({name:"permits-tracker",query:{email:e.email,cn:e.controlNumber}})})).catch((()=>s.value=!1))})))}return(0,a.YP)((()=>[r.submitByEmail,r.submitByName,r.formScope]),(()=>{r.submitByEmail&&(localStorage.submitByEmail=r.submitByEmail),r.submitByName&&(localStorage.submitByName=r.submitByName)})),(0,a.bv)((()=>{localStorage.submitByEmail&&(r.submitByEmail=localStorage.submitByEmail),localStorage.submitByName&&(r.submitByName=localStorage.submitByName)})),(t,u)=>{const m=(0,a.up)("el-input"),d=(0,a.up)("el-form-item"),p=(0,a.up)("el-option"),f=(0,a.up)("el-select"),b=(0,a.up)("el-date-picker"),g=(0,a.up)("el-time-select"),y=(0,a.up)("el-button"),w=(0,a.up)("el-form");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(w,{class:"divide-y divide-gray-200 overflow-hidden px-4",model:r,ref_key:"editForm",ref:l,rules:(0,o.SU)(W)},{default:(0,a.w5)((()=>[(0,a._)("div",vt,[(0,a._)("div",ht,[(0,a.Wm)(d,{prop:"submitByEmail"},{default:(0,a.w5)((()=>[xt,(0,a.Wm)(m,{size:"large",modelValue:r.submitByEmail,"onUpdate:modelValue":u[0]||(u[0]=e=>r.submitByEmail=e),onChange:i,placeholder:"Requester email address"},null,8,["modelValue"])])),_:1})]),(0,a._)("div",Vt,[(0,a.Wm)(d,{prop:"submitByName"},{default:(0,a.w5)((()=>[St,(0,a.Wm)(m,{size:"large",class:"w-full",modelValue:r.submitByName,"onUpdate:modelValue":u[1]||(u[1]=e=>r.submitByName=e),placeholder:"Requester name"},null,8,["modelValue"])])),_:1})]),(0,a._)("div",Wt,[(0,a.Wm)(d,{prop:"contactNumber"},{default:(0,a.w5)((()=>[Ut,(0,a.Wm)(m,{size:"large",class:"w-full",modelValue:r.contactNumber,"onUpdate:modelValue":u[2]||(u[2]=e=>r.contactNumber=e),placeholder:"Requester contact number"},null,8,["modelValue"])])),_:1})]),(0,a._)("div",Nt,[(0,a.Wm)(d,{prop:"typeOfRequest"},{default:(0,a.w5)((()=>[qt,(0,a.Wm)(f,{size:"large",modelValue:r.typeOfRequest,"onUpdate:modelValue":u[3]||(u[3]=e=>r.typeOfRequest=e),class:"w-full",placeholder:"Select type of request",onChange:u[4]||(u[4]=e=>{r.shuttleArea="",r.shuttleRoute="",r.numberOfPassengers=0,r.reasonForShuttle=""})},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,o.SU)(c.b9)("cf_4878"),((e,l)=>((0,a.wg)(),(0,a.j4)(p,{key:l,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})]),(0,a._)("div",Bt,[(0,a.Wm)(d,{prop:"department"},{default:(0,a.w5)((()=>[Dt,(0,a.Wm)(f,{size:"large",modelValue:r.department,"onUpdate:modelValue":u[5]||(u[5]=e=>r.department=e),class:"w-full",placeholder:"Select your department"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,o.SU)(c.b9)("cf_4880"),((e,l)=>((0,a.wg)(),(0,a.j4)(p,{key:l,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})]),"Errands"==r.typeOfRequest?((0,a.wg)(),(0,a.iD)("div",Rt,[(0,a.Wm)(d,{prop:"numberOfPassengers",rules:[{required:!0,message:"Please input the number of passengers",trigger:"blur"}]},{default:(0,a.w5)((()=>[Pt,(0,a.Wm)(m,{size:"large",class:"w-full",placeholder:"Input number of passengers",modelValue:r.numberOfPassengers,"onUpdate:modelValue":u[6]||(u[6]=e=>r.numberOfPassengers=e)},null,8,["modelValue"])])),_:1})])):(0,a.kq)("",!0),"Errands"==r.typeOfRequest?((0,a.wg)(),(0,a.iD)("div",It,[(0,a.Wm)(d,{prop:"reasonForShuttle",rules:[{required:!0,message:"Please input reason for shuttle",trigger:"blur"}]},{default:(0,a.w5)((()=>[Ct,(0,a.Wm)(f,{size:"large",modelValue:r.reasonForShuttle,"onUpdate:modelValue":u[7]||(u[7]=e=>r.reasonForShuttle=e),class:"w-full",placeholder:"Select your reason"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,o.SU)(c.b9)("cf_4886"),((e,l)=>((0,a.wg)(),(0,a.j4)(p,{key:l,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])):(0,a.kq)("",!0),"Shuttle Booking"==r.typeOfRequest?((0,a.wg)(),(0,a.iD)("div",Tt,[(0,a.Wm)(d,{prop:"shuttleArea",rules:[{required:!0,message:"Please select the shuttle area",trigger:"blur"}]},{default:(0,a.w5)((()=>[zt,(0,a.Wm)(f,{size:"large",modelValue:r.shuttleArea,"onUpdate:modelValue":u[8]||(u[8]=e=>r.shuttleArea=e),class:"w-full",placeholder:"Select the shuttle area"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,o.SU)(c.b9)("cf_4888"),((e,l)=>((0,a.wg)(),(0,a.j4)(p,{key:l,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})])):(0,a.kq)("",!0),"Shuttle Booking"==r.typeOfRequest?((0,a.wg)(),(0,a.iD)("div",At,[(0,a.Wm)(d,{prop:"shuttleRoute",rules:[{required:!0,message:"Please select your route",trigger:"blur"}]},{default:(0,a.w5)((()=>[Et,(0,a.Wm)(f,{size:"large",modelValue:r.shuttleRoute,"onUpdate:modelValue":u[9]||(u[9]=e=>r.shuttleRoute=e),onChange:u[10]||(u[10]=e=>{r.pickUpLocation="",r.dropOffLocation=""}),class:"w-full",placeholder:"Select shuttle route"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{value:"Going to Office"}),(0,a.Wm)(p,{value:"Going Home"})])),_:1},8,["modelValue"])])),_:1})])):(0,a.kq)("",!0),(0,a._)("div",Ot,[(0,a.Wm)(d,{prop:"date"},{default:(0,a.w5)((()=>[Ht,(0,a.Wm)(b,{size:"large",modelValue:r.date,"onUpdate:modelValue":u[11]||(u[11]=e=>r.date=e),class:"w-full",type:"date","value-format":"YYYY-MM-DD",placeholder:"Pick a day",style:{width:"100%"}},null,8,["modelValue"])])),_:1})]),(0,a._)("div",Mt,[(0,a.Wm)(d,{prop:"time"},{default:(0,a.w5)((()=>[Yt,"Shuttle Booking"==r.typeOfRequest&&"Going Home"==r.shuttleRoute?((0,a.wg)(),(0,a.j4)(f,{key:0,size:"large",modelValue:r.time,"onUpdate:modelValue":u[12]||(u[12]=e=>r.time=e),style:{width:"100%"},class:"w-full"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,o.SU)(_t),((e,l)=>((0,a.wg)(),(0,a.j4)(p,{key:l,value:e.time},null,8,["value"])))),128))])),_:1},8,["modelValue"])):((0,a.wg)(),(0,a.j4)(g,{key:1,size:"large",style:{width:"100%"},disabled:"Going to Office"==r.shuttleRoute,class:"w-full",placeholder:"Select time",modelValue:r.time,"onUpdate:modelValue":u[13]||(u[13]=e=>r.time=e),start:"00:00",step:"00:15",end:"24:00"},null,8,["disabled","modelValue"]))])),_:1})]),(0,a._)("div",jt,[(0,a.Wm)(d,{prop:"pickUpLocation"},{default:(0,a.w5)((()=>[Ft,"Shuttle Booking"==r.typeOfRequest&&"Going to Office"==r.shuttleRoute?((0,a.wg)(),(0,a.j4)(f,{key:0,size:"large",modelValue:r.pickUpLocation,"onUpdate:modelValue":u[14]||(u[14]=e=>r.pickUpLocation=e),class:"w-full",onChange:u[15]||(u[15]=e=>r.time=(0,o.SU)(wt).find((l=>l.location==e))?.time)},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,o.SU)(wt),((e,l)=>((0,a.wg)(),(0,a.j4)(p,{key:l,value:e.location},null,8,["value"])))),128))])),_:1},8,["modelValue"])):e.sites&&"Shuttle Booking"==r.typeOfRequest&&"Going Home"==r.shuttleRoute?((0,a.wg)(),(0,a.j4)(f,{key:1,size:"large",filterable:"",modelValue:r.pickUpLocation,"onUpdate:modelValue":u[16]||(u[16]=e=>r.pickUpLocation=e),class:"w-full",placeholder:"Select site"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.sites,((e,l)=>((0,a.wg)(),(0,a.j4)(p,{key:l,label:e.name,value:e.name},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])):((0,a.wg)(),(0,a.j4)(m,{key:2,size:"large",class:"w-full",modelValue:r.pickUpLocation,"onUpdate:modelValue":u[17]||(u[17]=e=>r.pickUpLocation=e),placeholder:"Input pick up location"},null,8,["modelValue"]))])),_:1})]),(0,a._)("div",Kt,[(0,a.Wm)(d,{prop:"dropOffLocation"},{default:(0,a.w5)((()=>[Zt,e.sites&&"Shuttle Booking"==r.typeOfRequest&&"Going to Office"==r.shuttleRoute?((0,a.wg)(),(0,a.j4)(f,{key:0,size:"large",filterable:"",modelValue:r.dropOffLocation,"onUpdate:modelValue":u[18]||(u[18]=e=>r.dropOffLocation=e),class:"w-full",placeholder:"Select site"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.sites,((e,l)=>((0,a.wg)(),(0,a.j4)(p,{key:l,label:e.name,value:e.name},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])):"Shuttle Booking"==r.typeOfRequest&&"Going Home"==r.shuttleRoute?((0,a.wg)(),(0,a.j4)(f,{key:1,size:"large",filterable:"",modelValue:r.dropOffLocation,"onUpdate:modelValue":u[19]||(u[19]=e=>r.dropOffLocation=e),class:"w-full",placeholder:"Select site"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,o.SU)(kt),((e,l)=>((0,a.wg)(),(0,a.j4)(p,{key:l,value:e.location},null,8,["value"])))),128))])),_:1},8,["modelValue"])):((0,a.wg)(),(0,a.j4)(m,{key:2,size:"large",class:"w-full",modelValue:r.dropOffLocation,"onUpdate:modelValue":u[20]||(u[20]=e=>r.dropOffLocation=e),placeholder:"Input drop-off location"},null,8,["modelValue"]))])),_:1})])]),(0,a._)("div",$t,[(0,a.Wm)(y,{loading:s.value,type:"primary",onClick:n},{default:(0,a.w5)((()=>[Lt])),_:1},8,["loading"])])])),_:1},8,["model","rules"]),(0,a.Wm)(N.Z,{loading:s.value,onSubmit:n},null,8,["loading"])],64)}}});const Xt=Gt;var Qt=Xt;const Jt={class:"mt-3 grid grid-cols-12 gap-x-3 py-3"},ea={class:"col-span-12 sm:col-span-12"},la=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Type")],-1),ta={class:"col-span-12 sm:col-span-6"},aa=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Email address")],-1),sa={class:"col-span-12 sm:col-span-6"},oa=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Name")],-1),ra={class:"col-span-12 sm:col-span-6"},ia=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Site")],-1),na={class:"col-span-12 sm:col-span-6"},ua=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Floor")],-1),ma={class:"col-span-12 sm:col-span-6"},ca=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Date of visit")],-1),da={class:"col-span-12 sm:col-span-6"},pa=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Contact Person")],-1),fa={class:"col-span-12 sm:col-span-12"},ba=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Purpose of Visit")],-1),ga={class:"mt-4 py-4 md:flex justify-end hidden"},ya=(0,a.Uk)(" Submit ");var wa=(0,a.aZ)({__name:"VisitorRequest",props:{sites:{type:Array,required:!0}},setup(e){const l=e,t=(0,o.iH)(null),s=(0,o.iH)(!1),r=(0,o.iH)(!1),i=(0,o.qj)({submitByID:1,formScope:"Client",submitByEmail:"",submitByName:"",siteID:40041,floorNo:[],formType:"Visitor Request",dateOfVisit:(0,d.Iz)("yyyy-MM-dd"),contactPerson:"",visitors:[{visitorName:""}],purposeOfVisit:""}),n=(0,a.Fl)((()=>{const e=l.sites.find((e=>e.siteid==i.siteID));return e?e.floors:[]}));async function c(e){s.value=!0,await m.g.fetchDetailsByEmail(e).then((e=>{e&&e.contactid&&(i.submitByName=`${e.firstname} ${e.lastname}`)})),s.value=!1}async function p(){await(t.value?.validate().then((async()=>{r.value=!0,await U.G.visitorRequest(i).then((e=>{r.value=!1,u.Z.push({name:"permits-tracker",query:{email:e.email,cn:e.controlNumber}})})).catch((()=>r.value=!1))})))}return(0,a.YP)((()=>[i.submitByEmail,i.submitByName,i.formScope,i.siteID]),(()=>{i.submitByEmail&&(localStorage.submitByEmail=i.submitByEmail),i.submitByName&&(localStorage.submitByName=i.submitByName),i.formScope&&(localStorage.formScope=i.formScope),i.siteID&&(localStorage.siteID=i.siteID)})),(0,a.bv)((()=>{localStorage.submitByEmail&&(i.submitByEmail=localStorage.submitByEmail),localStorage.submitByName&&(i.submitByName=localStorage.submitByName),localStorage.formScope&&(i.formScope=localStorage.formScope),localStorage.siteID&&(i.siteID=+localStorage.siteID)})),(l,s)=>{const u=(0,a.up)("el-radio-button"),m=(0,a.up)("el-radio-group"),d=(0,a.up)("el-form-item"),f=(0,a.up)("el-input"),b=(0,a.up)("el-option"),g=(0,a.up)("el-select"),y=(0,a.up)("el-date-picker"),w=(0,a.up)("el-button"),k=(0,a.up)("el-form");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(k,{class:"divide-y divide-gray-200 overflow-hidden px-4",model:i,ref_key:"editForm",ref:t,rules:(0,o.SU)(W)},{default:(0,a.w5)((()=>[(0,a._)("div",Jt,[(0,a._)("div",ea,[(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[la,(0,a.Wm)(m,{modelValue:i.formScope,"onUpdate:modelValue":s[0]||(s[0]=e=>i.formScope=e),class:"w-full"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{label:"Client"}),(0,a.Wm)(u,{label:"Internal"}),(0,a.Wm)(u,{label:"Vendor"})])),_:1},8,["modelValue"])])),_:1})]),(0,a._)("div",ta,[(0,a.Wm)(d,{prop:"submitByEmail"},{default:(0,a.w5)((()=>[aa,(0,a.Wm)(f,{size:"large",modelValue:i.submitByEmail,"onUpdate:modelValue":s[1]||(s[1]=e=>i.submitByEmail=e),onChange:c,placeholder:"Requester email address"},null,8,["modelValue"])])),_:1})]),(0,a._)("div",sa,[(0,a.Wm)(d,{prop:"submitByName"},{default:(0,a.w5)((()=>[oa,(0,a.Wm)(f,{size:"large",class:"w-full",modelValue:i.submitByName,"onUpdate:modelValue":s[2]||(s[2]=e=>i.submitByName=e),placeholder:"Requester name"},null,8,["modelValue"])])),_:1})]),(0,a._)("div",ra,[(0,a.Wm)(d,{prop:"siteID"},{default:(0,a.w5)((()=>[ia,e.sites?((0,a.wg)(),(0,a.j4)(g,{key:0,size:"large",filterable:"",modelValue:i.siteID,"onUpdate:modelValue":s[3]||(s[3]=e=>i.siteID=e),class:"w-full",placeholder:"Select site"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(e.sites,((e,l)=>((0,a.wg)(),(0,a.j4)(b,{key:l,label:e.name,value:e.siteid},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])):(0,a.kq)("",!0)])),_:1})]),(0,a._)("div",na,[(0,a.Wm)(d,{prop:"floorNo"},{default:(0,a.w5)((()=>[ua,(0,a.Wm)(g,{size:"large",modelValue:i.floorNo,"onUpdate:modelValue":s[4]||(s[4]=e=>i.floorNo=e),multiple:"",class:"w-full",placeholder:"Select floor"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,o.SU)(n),((e,l)=>((0,a.wg)(),(0,a.j4)(b,{key:l,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})]),(0,a._)("div",ma,[(0,a.Wm)(d,{prop:"dateOfVisit"},{default:(0,a.w5)((()=>[ca,(0,a.Wm)(y,{size:"large",modelValue:i.dateOfVisit,"onUpdate:modelValue":s[5]||(s[5]=e=>i.dateOfVisit=e),class:"w-full",type:"date",style:{width:"100%"},placeholder:"Pick a day"},null,8,["modelValue"])])),_:1})]),(0,a._)("div",da,[(0,a.Wm)(d,{prop:"contactPerson"},{default:(0,a.w5)((()=>[pa,(0,a.Wm)(f,{size:"large",class:"w-full",modelValue:i.contactPerson,"onUpdate:modelValue":s[6]||(s[6]=e=>i.contactPerson=e),placeholder:"Input contact person"},null,8,["modelValue"])])),_:1})]),(0,a._)("div",fa,[(0,a.Wm)(d,{prop:"purposeOfVisit"},{default:(0,a.w5)((()=>[ba,(0,a.Wm)(f,{size:"large",class:"w-full",type:"textarea",rows:2,placeholder:"Input purpose",modelValue:i.purposeOfVisit,"onUpdate:modelValue":s[7]||(s[7]=e=>i.purposeOfVisit=e)},null,8,["modelValue"])])),_:1})])]),(0,a._)("div",ga,[(0,a.Wm)(w,{loading:r.value,type:"primary",onClick:p},{default:(0,a.w5)((()=>[ya])),_:1},8,["loading"])])])),_:1},8,["model","rules"]),(0,a.Wm)(N.Z,{loading:r.value,onSubmit:p},null,8,["loading"])],64)}}});const ka=wa;var _a=ka;const va=[{siteId:40046,buldingAccessOnly:!0,note:"PHP 300.00 - Building Access Card | PHP 100.00 - KMC Office Access Card"},{siteId:40053,buldingAccessOnly:!0,note:"PHP 300.00 - Building Access Card | PHP 100.00 - KMC Office Access Card"},{siteId:40043,buldingAccessOnly:!0,note:"PHP 500.00 - Building Access Card | PHP 100.00 - KMC Office Access Card"},{siteId:40045,buldingAccessOnly:!0,note:"PHP 250.00 - Building Access Card | PHP 100.00 - KMC Office Access Card"},{siteId:297199,buldingAccessOnly:!1,note:"PHP 100.00. You can use the KMC badge card to access the building turnstile."},{siteId:1381877,buldingAccessOnly:!1,note:"PHP 100.00. You can use the KMC badge card to access the building turnstile."},{siteId:40040,buldingAccessOnly:!1,note:"PHP 100.00. You can use the KMC badge card to access the building turnstile."},{siteId:236084,buldingAccessOnly:!1,note:"PHP 100.00. You can use the KMC badge card to access the building turnstile."},{siteId:40058,buldingAccessOnly:!1,note:"PHP 100.00. You can use the KMC badge card to access the building turnstile."},{siteId:210148,buldingAccessOnly:!1,note:"PHP 100.00. You can use the KMC badge card to access the building turnstile."},{siteId:626441,buldingAccessOnly:!1,note:"PHP 100.00 + PHP 100.00 for card activation. You can use the KMC badge card to access the building turnstile."}];var ha=t(5640);const xa={class:"mt-3 grid grid-cols-12 gap-x-3 py-3"},Va={class:"col-span-12 sm:col-span-12"},Sa=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Type")],-1),Wa={class:"col-span-12 sm:col-span-6"},Ua=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Email address")],-1),Na={class:"col-span-12 sm:col-span-6"},qa=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Name")],-1),Ba={class:"col-span-12 sm:col-span-6"},Da=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Designation")],-1),Ra={class:"col-span-12 sm:col-span-6"},Pa=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Site")],-1),Ia={class:"col-span-12 sm:col-span-6"},Ca=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Floor")],-1),Ta={class:"col-span-12 sm:col-span-6"},za=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},[(0,a._)("span",{class:"text-red-500 mr-2"},"*"),(0,a.Uk)("Type of Access")],-1),Aa={class:"col-span-12 sm:col-span-12 mb-0"},Ea=(0,a._)("label",{class:"block text-sm font-semibold text-gray-700 mb-1.5"},"Remarks",-1),Oa={key:0,class:"rounded-md bg-orange-50 p-4 mb-3"},Ha={class:"flex"},Ma={class:"flex-shrink-0"},Ya={class:"ml-3"},ja={class:"text-sm font-medium text-pumpkin"},Fa={class:"mt-4 py-4 md:flex justify-end hidden"},Ka=(0,a.Uk)(" Submit ");var Za=(0,a.aZ)({__name:"AccessCard",props:{sites:{type:Array,required:!0}},setup(e){const l=e,t=(0,o.iH)(null),s=(0,o.iH)(!1),r=(0,o.iH)(!1),n=(0,o.qj)({submitByID:1,formScope:"Client",submitByEmail:"",submitByName:"",siteID:null,formType:"Access Card Request",floorNo:[],designation:"",typeOfAccess:[],remarks:""}),d=(0,a.Fl)((()=>{const e=va.find((e=>e.siteId==n.siteID));return e?e.note:"PHP 100.00. You can use the KMC badge card to access the assigned offices."})),p=(0,a.Fl)((()=>n.typeOfAccess.includes("KMC Office Access")?l.sites:l.sites.filter((e=>va.find((l=>l.siteId==e.siteid)))))),f=(0,a.Fl)((()=>{const e=l.sites.find((e=>e.siteid==n.siteID));return e?e.floors:[]}));async function b(e){s.value=!0,await m.g.fetchDetailsByEmail(e).then((e=>{e&&e.contactid&&(n.submitByName=`${e.firstname} ${e.lastname}`)})),s.value=!1}async function g(){await(t.value?.validate().then((async()=>{r.value=!0,await U.G.accessCard(n).then((e=>{r.value=!1,u.Z.push({name:"permits-tracker",query:{email:e.email,cn:e.controlNumber}})})).catch((()=>r.value=!1))})))}async function y(){const e=va.find((e=>e.siteId==n.siteID));e&&e.buldingAccessOnly&&n.typeOfAccess.includes("Building Access")&&(n.formType="Access Card Building Request",await g()),n.formType="Access Card Office Request",await g()}return(0,a.YP)((()=>n.typeOfAccess),(()=>{const e=p.value.find((e=>e.siteid==n.siteID));null==e&&(n.siteID=null)})),(0,a.YP)((()=>[n.submitByEmail,n.submitByName,n.formScope,n.siteID]),(()=>{n.submitByEmail&&(localStorage.submitByEmail=n.submitByEmail),n.submitByName&&(localStorage.submitByName=n.submitByName),n.formScope&&(localStorage.formScope=n.formScope)})),(0,a.bv)((()=>{localStorage.submitByEmail&&(n.submitByEmail=localStorage.submitByEmail),localStorage.submitByName&&(n.submitByName=localStorage.submitByName),localStorage.formScope&&(n.formScope=localStorage.formScope)})),(l,s)=>{const u=(0,a.up)("el-radio-button"),m=(0,a.up)("el-radio-group"),g=(0,a.up)("el-form-item"),w=(0,a.up)("el-input"),k=(0,a.up)("el-option"),_=(0,a.up)("el-select"),v=(0,a.up)("el-button"),h=(0,a.up)("el-form");return(0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(h,{class:"divide-y divide-gray-200 overflow-hidden px-4",model:n,ref_key:"editForm",ref:t,rules:(0,o.SU)(W)},{default:(0,a.w5)((()=>[(0,a._)("div",xa,[(0,a._)("div",Va,[(0,a.Wm)(g,{prop:"formScope"},{default:(0,a.w5)((()=>[Sa,(0,a.Wm)(m,{modelValue:n.formScope,"onUpdate:modelValue":s[0]||(s[0]=e=>n.formScope=e),class:"w-full"},{default:(0,a.w5)((()=>[(0,a.Wm)(u,{label:"Client"}),(0,a.Wm)(u,{label:"Internal"}),(0,a.Wm)(u,{label:"Vendor"})])),_:1},8,["modelValue"])])),_:1})]),(0,a._)("div",Wa,[(0,a.Wm)(g,{prop:"submitByEmail"},{default:(0,a.w5)((()=>[Ua,(0,a.Wm)(w,{size:"large",modelValue:n.submitByEmail,"onUpdate:modelValue":s[1]||(s[1]=e=>n.submitByEmail=e),onChange:b,placeholder:"Requester email address"},null,8,["modelValue"])])),_:1})]),(0,a._)("div",Na,[(0,a.Wm)(g,{prop:"submitByName"},{default:(0,a.w5)((()=>[qa,(0,a.Wm)(w,{size:"large",class:"w-full",modelValue:n.submitByName,"onUpdate:modelValue":s[2]||(s[2]=e=>n.submitByName=e),placeholder:"Requester name"},null,8,["modelValue"])])),_:1})]),(0,a._)("div",Ba,[(0,a.Wm)(g,{prop:"designation"},{default:(0,a.w5)((()=>[Da,(0,a.Wm)(w,{size:"large",class:"w-full",modelValue:n.designation,"onUpdate:modelValue":s[3]||(s[3]=e=>n.designation=e),placeholder:"Input designation"},null,8,["modelValue"])])),_:1})]),(0,a._)("div",Ra,[(0,a.Wm)(g,{prop:"siteID"},{default:(0,a.w5)((()=>[Pa,e.sites?((0,a.wg)(),(0,a.j4)(_,{key:0,style:{width:"100%"},size:"large",filterable:"",modelValue:n.siteID,"onUpdate:modelValue":s[4]||(s[4]=e=>n.siteID=e),class:"w-full",placeholder:"Select site"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,o.SU)(p),((e,l)=>((0,a.wg)(),(0,a.j4)(k,{key:l,label:e.name,value:e.siteid},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])):(0,a.kq)("",!0)])),_:1})]),(0,a._)("div",Ia,[(0,a.Wm)(g,{prop:"floorNo"},{default:(0,a.w5)((()=>[Ca,(0,a.Wm)(_,{size:"large",modelValue:n.floorNo,"onUpdate:modelValue":s[5]||(s[5]=e=>n.floorNo=e),multiple:"",class:"w-full",placeholder:"Select floor"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,o.SU)(f),((e,l)=>((0,a.wg)(),(0,a.j4)(k,{key:l,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})]),(0,a._)("div",Ta,[(0,a.Wm)(g,{prop:"typeOfAccess"},{default:(0,a.w5)((()=>[za,(0,a.Wm)(_,{size:"large",modelValue:n.typeOfAccess,"onUpdate:modelValue":s[6]||(s[6]=e=>n.typeOfAccess=e),multiple:"",class:"w-full",placeholder:"Select type of access"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,o.SU)(c.b9)("cf_4874"),((e,l)=>((0,a.wg)(),(0,a.j4)(k,{key:l,label:e,value:e},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1})]),(0,a._)("div",Aa,[(0,a.Wm)(g,{prop:"reasonForShuttle"},{default:(0,a.w5)((()=>[Ea,(0,a.Wm)(w,{size:"large",class:"w-full",type:"textarea",rows:2,placeholder:"Input reason",modelValue:n.remarks,"onUpdate:modelValue":s[7]||(s[7]=e=>n.remarks=e)},null,8,["modelValue"])])),_:1})])]),(0,o.SU)(d)?((0,a.wg)(),(0,a.iD)("div",Oa,[(0,a._)("div",Ha,[(0,a._)("div",Ma,[(0,a.Wm)((0,o.SU)(ha),{class:"h-5 w-5 text-orange-400"})]),(0,a._)("div",Ya,[(0,a._)("h3",ja,(0,i.zw)((0,o.SU)(d)),1)])])])):(0,a.kq)("",!0),(0,a._)("div",Fa,[(0,a.Wm)(v,{loading:r.value,type:"primary",onClick:y},{default:(0,a.w5)((()=>[Ka])),_:1},8,["loading"])])])),_:1},8,["model","rules"]),(0,a.Wm)(N.Z,{loading:r.value,onSubmit:y},null,8,["loading"])],64)}}});const $a=Za;var La=$a,Ga=t(2201);const Xa={class:"flex flex-col md:rounded-lg bg-white md:p-6 lg:p-8"},Qa={class:"sm:px-0 px-4"},Ja={class:"sm:hidden"},es=(0,a._)("label",{for:"tabs",class:"sr-only"},"Select a tab",-1),ls={class:"hidden sm:block"},ts={class:"border-b border-gray-200"},as={class:"mt-2 -mb-px flex space-x-8","aria-label":"Tabs"},ss=["onClick"];var os=(0,a.aZ)({__name:"EditForm",setup(e){const l=(0,o.iH)([]),t=(0,Ga.yj)(),s=(0,a.Fl)((()=>t.query.view));async function c(){await m.g.getPublicSitesModule().then((e=>{for(let t=0;t<e.length;t++)zl.includes(e[t].siteid)&&l.value.push(e[t])}))}return(0,a.bv)((()=>{s.value||u.Z.push({query:{view:"gatepass"}}),c()})),(e,t)=>{const m=(0,a.up)("el-option"),c=(0,a.up)("el-select");return(0,a.wg)(),(0,a.iD)("div",Xa,[(0,a._)("div",Qa,[(0,a._)("div",Ja,[es,(0,a.Wm)(c,{"model-value":(0,o.SU)(s),onChange:t[0]||(t[0]=e=>(0,o.SU)(u.Z).push({query:{view:e}})),class:"block w-full rounded-md border-gray-300 py-2"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,o.SU)(n),(e=>((0,a.wg)(),(0,a.j4)(m,{key:e.name,value:e.query,label:e.name},null,8,["value","label"])))),128))])),_:1},8,["model-value"])]),(0,a._)("div",ls,[(0,a._)("div",ts,[(0,a._)("nav",as,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)((0,o.SU)(n),(e=>((0,a.wg)(),(0,a.iD)("a",{key:e.name,onClick:(0,r.iM)((l=>(0,o.SU)(u.Z).push({query:{view:e.query}})),["prevent"]),class:(0,i.C_)([e.query==(0,o.SU)(s)?"border-pumpkin text-pumpkin":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-200","whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm cursor-pointer"])},(0,i.zw)(e.name),11,ss)))),128))])])])]),"gatepass"==(0,o.SU)(s)?((0,a.wg)(),(0,a.j4)(ye,{key:0,sites:l.value},null,8,["sites"])):(0,a.kq)("",!0),"work-permit"==(0,o.SU)(s)?((0,a.wg)(),(0,a.j4)(Tl,{key:1,sites:l.value},null,8,["sites"])):(0,a.kq)("",!0),"temporary-parking"==(0,o.SU)(s)?((0,a.wg)(),(0,a.j4)(yt,{key:2,sites:l.value},null,8,["sites"])):(0,a.kq)("",!0),"van-booking"==(0,o.SU)(s)?((0,a.wg)(),(0,a.j4)(Qt,{key:3,sites:l.value},null,8,["sites"])):(0,a.kq)("",!0),"visitor-request"==(0,o.SU)(s)?((0,a.wg)(),(0,a.j4)(_a,{key:4,sites:l.value},null,8,["sites"])):(0,a.kq)("",!0),"access-card"==(0,o.SU)(s)?((0,a.wg)(),(0,a.j4)(La,{key:5,sites:l.value},null,8,["sites"])):(0,a.kq)("",!0)])}}});const rs=os;var is=rs,ns=t(9274),us=t(7865),ms=t(4204);const cs={class:"min-h-full pb-20 h-full"},ds={class:"p-0 md:pt-10 md:py-10 2xl:px-8 max-w-7xl mx-auto flex flex-col justify-start"};var ps=(0,a.aZ)({__name:"Edit",setup(e){return(0,a.bv)((async()=>{await ns.h.commit(ms.qo.CLEAR_OPTIONS),await ns.h.dispatch(us.lj.FETCH_PUBLIC_OPTIONS,190),await ns.h.dispatch(us.lj.FETCH_PUBLIC_OPTIONS,185)})),(e,l)=>((0,a.wg)(),(0,a.iD)(a.HY,null,[(0,a.Wm)(s.Z,{name:"New Permit",subName:"Permits",redirectRoute:"permits"}),(0,a._)("div",cs,[(0,a._)("div",ds,[(0,a.Wm)(is)])])],64))}});const fs=ps;var bs=fs},3724:function(e,l,t){"use strict";t.d(l,{G:function(){return s}});var a=t(5425);const s={async submitGatepass(e){const l=await a.s.post("/public/admin/permits",e);return l.data},async getWorkingpermitsTemplates(e){const l=await a.s.get(`/public/admin/working-permits/templates/${e}`);return l.data},async submitWorkingPermit(e){const l=await a.s.post("/public/admin/working-permits",e);return l.data},async workingPermitsDetails(e){const l=await a.s.get(`/public/admin/working-permits/record-detail/${e}`);return l.data},async submitTemporaryParking(e){const l=await a.s.post("/public/admin/temporary-parking-request",e);return l.data},async vanBookingRequest(e){const l=await a.s.post("/public/admin/van-booking-request",e);return l.data},async visitorRequest(e){const l=await a.s.post("/public/admin/visitor-request",e);return l.data},async accessCard(e){const l=await a.s.post("/public/admin/access-card-request",e);return l.data},async fetchPermit(e){const l=await a.s.get(`/public/admin/track-permit/${e.submitByEmail}/${e.automationno}`);return l.data},async getFormView(e){const l=await a.s.get(`/admin/formview/${e}`);return l.data},async sign(e,l){const t=await a.s.put(`/admin/insertsign/${e}`,l);return t.data},async saveExternalField(e,l){const t=await a.s.put(`/admin/add-external-field/${e}`,l);return t.data},async getNotes(e){const l=await a.s.get("/public/permits/notes/get",e);return l.data},async addNote(e,l){const t=await a.s.post(`/public/permits/notes/add/${e}`,l);return t.data},async decline(e,l){const t=await a.s.put(`/admin/declined/${e}`,l);return t.data}}},9812:function(e,l,t){"use strict";t.r(l),t.d(l,{BaseTransition:function(){return a.P$},Comment:function(){return a.sv},EffectScope:function(){return a.Bj},Fragment:function(){return a.HY},KeepAlive:function(){return a.Ob},ReactiveEffect:function(){return a.qq},Static:function(){return a.qG},Suspense:function(){return a.n4},Teleport:function(){return a.lR},Text:function(){return a.xv},Transition:function(){return a.uT},TransitionGroup:function(){return a.W3},VueElement:function(){return a.a2},callWithAsyncErrorHandling:function(){return a.$d},callWithErrorHandling:function(){return a.KU},camelize:function(){return a._A},capitalize:function(){return a.kC},cloneVNode:function(){return a.Ho},compatUtils:function(){return a.ry},compile:function(){return s},computed:function(){return a.Fl},createApp:function(){return a.ri},createBlock:function(){return a.j4},createCommentVNode:function(){return a.kq},createElementBlock:function(){return a.iD},createElementVNode:function(){return a._},createHydrationRenderer:function(){return a.Eo},createPropsRestProxy:function(){return a.p1},createRenderer:function(){return a.Us},createSSRApp:function(){return a.vr},createSlots:function(){return a.Nv},createStaticVNode:function(){return a.uE},createTextVNode:function(){return a.Uk},createVNode:function(){return a.Wm},customRef:function(){return a.ZM},defineAsyncComponent:function(){return a.RC},defineComponent:function(){return a.aZ},defineCustomElement:function(){return a.MW},defineEmits:function(){return a.Bz},defineExpose:function(){return a.WY},defineProps:function(){return a.yb},defineSSRCustomElement:function(){return a.Ah},devtools:function(){return a.mW},effect:function(){return a.cE},effectScope:function(){return a.B},getCurrentInstance:function(){return a.FN},getCurrentScope:function(){return a.nZ},getTransitionRawChildren:function(){return a.Q6},guardReactiveProps:function(){return a.F4},h:function(){return a.h},handleError:function(){return a.S3},hydrate:function(){return a.ZB},initCustomFormatter:function(){return a.Mr},initDirectivesForSSR:function(){return a.Nd},inject:function(){return a.f3},isMemoSame:function(){return a.nQ},isProxy:function(){return a.X3},isReactive:function(){return a.PG},isReadonly:function(){return a.$y},isRef:function(){return a.dq},isRuntimeOnly:function(){return a.of},isShallow:function(){return a.yT},isVNode:function(){return a.lA},markRaw:function(){return a.Xl},mergeDefaults:function(){return a.u_},mergeProps:function(){return a.dG},nextTick:function(){return a.Y3},normalizeClass:function(){return a.C_},normalizeProps:function(){return a.vs},normalizeStyle:function(){return a.j5},onActivated:function(){return a.dl},onBeforeMount:function(){return a.wF},onBeforeUnmount:function(){return a.Jd},onBeforeUpdate:function(){return a.Xn},onDeactivated:function(){return a.se},onErrorCaptured:function(){return a.d1},onMounted:function(){return a.bv},onRenderTracked:function(){return a.bT},onRenderTriggered:function(){return a.Yq},onScopeDispose:function(){return a.EB},onServerPrefetch:function(){return a.vl},onUnmounted:function(){return a.SK},onUpdated:function(){return a.ic},openBlock:function(){return a.wg},popScopeId:function(){return a.Cn},provide:function(){return a.JJ},proxyRefs:function(){return a.WL},pushScopeId:function(){return a.dD},queuePostFlushCb:function(){return a.qb},reactive:function(){return a.qj},readonly:function(){return a.OT},ref:function(){return a.iH},registerRuntimeCompiler:function(){return a.Y1},render:function(){return a.sY},renderList:function(){return a.Ko},renderSlot:function(){return a.WI},resolveComponent:function(){return a.up},resolveDirective:function(){return a.Q2},resolveDynamicComponent:function(){return a.LL},resolveFilter:function(){return a.eq},resolveTransitionHooks:function(){return a.U2},setBlockTracking:function(){return a.qZ},setDevtoolsHook:function(){return a.ec},setTransitionHooks:function(){return a.nK},shallowReactive:function(){return a.Um},shallowReadonly:function(){return a.YS},shallowRef:function(){return a.XI},ssrContextKey:function(){return a.Uc},ssrUtils:function(){return a.G},stop:function(){return a.sT},toDisplayString:function(){return a.zw},toHandlerKey:function(){return a.hR},toHandlers:function(){return a.mx},toRaw:function(){return a.IU},toRef:function(){return a.Vh},toRefs:function(){return a.BK},transformVNodeArgs:function(){return a.C3},triggerRef:function(){return a.oR},unref:function(){return a.SU},useAttrs:function(){return a.l1},useCssModule:function(){return a.fb},useCssVars:function(){return a.sj},useSSRContext:function(){return a.Zq},useSlots:function(){return a.Rr},useTransitionState:function(){return a.Y8},vModelCheckbox:function(){return a.e8},vModelDynamic:function(){return a.YZ},vModelRadio:function(){return a.G2},vModelSelect:function(){return a.bM},vModelText:function(){return a.nr},vShow:function(){return a.F8},version:function(){return a.i8},warn:function(){return a.ZK},watch:function(){return a.YP},watchEffect:function(){return a.m0},watchPostEffect:function(){return a.Rh},watchSyncEffect:function(){return a.yX},withAsyncContext:function(){return a.mv},withCtx:function(){return a.w5},withDefaults:function(){return a.b9},withDirectives:function(){return a.wy},withKeys:function(){return a.D2},withMemo:function(){return a.MX},withModifiers:function(){return a.iM},withScopeId:function(){return a.HX}});var a=t(9963);const s=()=>{0}}}]);